import{r as a}from"./vendor-react-BGn7VswH.js";import{c as l}from"./categoryService-BABVpLtA.js";const w=(n={})=>{const{autoFetch:C=!0,includeAdmin:h=!1}=n,[g,f]=a.useState([]),[A,c]=a.useState(!1),[m,t]=a.useState(null),[i,d]=a.useState(null),u=a.useCallback(async()=>{c(!0),t(null);try{const e=h?await l.getAllCategoriesAdmin():await l.getAllCategories();e.success?f(e.data||[]):t(e.error||"Failed to fetch categories")}catch(e){t("An error occurred while fetching categories"),console.error("Error fetching categories:",e)}finally{c(!1)}},[h]),b=a.useCallback(async e=>{c(!0),t(null);try{const r=await l.createCategory(e);return r.success?(await u(),{success:!0,data:r.data}):(t(r.error||"Failed to create category"),{success:!1,error:r.error})}catch{const s="An error occurred while creating category";return t(s),{success:!1,error:s}}finally{c(!1)}},[u]),p=a.useCallback(async(e,r)=>{c(!0),t(null);try{const s=await l.updateCategory(e,r);return s.success?(f(o=>o.map(y=>y.id===e?{...y,...s.data}:y)),{success:!0,data:s.data}):(t(s.error||"Failed to update category"),{success:!1,error:s.error})}catch{const o="An error occurred while updating category";return t(o),{success:!1,error:o}}finally{c(!1)}},[]),k=a.useCallback(async e=>{c(!0),t(null);try{const r=await l.deleteCategory(e);return r.success?(f(s=>s.filter(o=>o.id!==e)),i?.id===e&&d(null),{success:!0}):(t(r.error||"Failed to delete category"),{success:!1,error:r.error})}catch{const s="An error occurred while deleting category";return t(s),{success:!1,error:s}}finally{c(!1)}},[i]),S=a.useCallback(async e=>{if(!e)return null;try{const r=await l.getCategoryById(e);return r.success?r.data:(t(r.error||"Failed to fetch category"),null)}catch(r){return t("An error occurred while fetching category"),console.error("Error fetching category:",r),null}},[]),E=a.useCallback(e=>{d(e)},[]),F=a.useCallback(()=>{d(null)},[]);return a.useEffect(()=>{C&&u()},[u,C]),a.useEffect(()=>{t(null)},[i]),{categories:g,selectedCategory:i,loading:A,error:m,fetchCategories:u,createCategory:b,updateCategory:p,deleteCategory:k,getCategoryById:S,selectCategory:E,clearSelection:F,hasCategories:g.length>0,categoriesCount:g.length}},B=(n={})=>w({...n,includeAdmin:!1}),I=(n={})=>w({...n,includeAdmin:!0});export{w as a,I as b,B as u};
