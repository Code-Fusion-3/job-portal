import{ag as S,r as l,j as e,aM as F,ae as M,ay as E,aN as I}from"./vendor-react-DetuyqZR.js";import{a as L,u as P,L as b}from"./vendor-router-CcGrsq4S.js";import{u as C,H as A,B as q,F as D}from"./index-DdcngoYs.js";import{F as H}from"./FormInput-B_1xd9od.js";import{P as R}from"./PasswordInput-D4fi5Shu.js";import{F as B}from"./FormCheckbox-YskMfmA_.js";import{H as T}from"./HeroSection-DkIGKG9z.js";import{j as z}from"./jobseekerBackground-BLVGbC9a.js";import{m as g}from"./vendor-motion-CjTzmV1J.js";import"./vendor-gsap-B4nt0ofr.js";const Y=()=>{const{t:s}=S(),o=L(),t=P(),{login:j}=C(),[a,w]=l.useState({identifier:"",password:"",rememberMe:!1}),[p,u]=l.useState(!1),[n,d]=l.useState({}),[h,f]=l.useState("");l.useEffect(()=>{t.state?.message?(f(t.state.message),o(t.pathname,{replace:!0})):t.search.includes("session=expired")&&(f(s("login.sessionExpired")),o(t.pathname,{replace:!0}))},[t.state,t.search,o]);const c=i=>{const{name:r,value:m,type:N,checked:k}=i.target;w(x=>({...x,[r]:N==="checkbox"?k:m})),n[r]&&d(x=>({...x,[r]:""}))},y=()=>{const i={};if(!a.identifier)i.identifier=s("login.errors.identifierRequired");else{const r=/\S+@\S+\.\S+/.test(a.identifier),m=a.identifier.replace(/\D/g,"").length>=9;!r&&!m&&(i.identifier=s("login.errors.identifierInvalid"))}return a.password?a.password.length<6&&(i.password=s("login.errors.passwordLength")):i.password=s("login.errors.passwordRequired"),d(i),Object.keys(i).length===0},v=async i=>{if(i.preventDefault(),!!y()){u(!0);try{const r=await j(a.identifier,a.password,"jobseeker");r.success&&r.user?r.user.role==="jobseeker"?o("/update-profile"):r.user.role==="admin"?o("/dashboard/admin"):o("/"):d({general:r.error||s("login.errors.general")})}catch(r){console.error("Login error:",r),d({general:s("login.errors.general")})}finally{u(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-cover bg-center bg-fixed",style:{backgroundImage:`url(${z})`},children:[e.jsx(A,{}),e.jsx(T,{title:s("login.hero.title"),description:s("login.hero.description")}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20",children:[h&&e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-yellow-800 text-sm",children:h})]})}),n.general&&e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 text-sm",children:n.general})]})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(H,{type:"text",id:"identifier",name:"identifier",label:s("login.identifier"),value:a.identifier,onChange:c,placeholder:s("login.identifierPlaceholder"),error:n.identifier,icon:E,required:!0}),e.jsx(R,{id:"password",name:"password",label:s("login.password"),value:a.password,onChange:c,placeholder:s("login.passwordPlaceholder"),error:n.password,required:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{id:"rememberMe",name:"rememberMe",label:s("login.rememberMe"),checked:a.rememberMe,onChange:c}),e.jsx(b,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200 font-medium",children:s("login.forgotPassword")})]}),e.jsx(q,{type:"submit",variant:"primary",size:"lg",className:"w-full group bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("login.signingIn")]}):e.jsxs(e.Fragment,{children:[s("login.signIn"),e.jsx(I,{className:"ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:s("login.newToPlatform")})})]}),e.jsxs("p",{className:"text-gray-600",children:[s("login.noAccount")," ",e.jsx(b,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors duration-200",children:s("login.signUp")})]})]})]})]})})}),e.jsx(D,{})]})};export{Y as default};
