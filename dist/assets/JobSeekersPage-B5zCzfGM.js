import{r as o,aW as qe,j as e,ag as Ve,ae as oe,ba as Ye,bs as Qe,af as ye,aL as Xe,aS as Ce,bm as Le,aJ as Ae,aI as Pe,bt as Ze,aw as ea,b2 as aa,bo as ta,ax as ra,b3 as sa,aT as la,aY as ia}from"./vendor-react-WH37UOTs.js";import{a as na}from"./useJobSeekers-nZ4EaXVy.js";import{u as oa,L as Ee,B as j,A as ce,d as je,C as B,P as ca}from"./index-B6S3N3CG.js";import{b as da}from"./useCategories-BDUlSI-r.js";import{u as ma}from"./useApprovalManagement-DG9_Ci0-.js";import{B as Ne}from"./Badge-Ch8TlMYY.js";import{S as ua}from"./StatusBadge-SdYflwmR.js";import{D as xa}from"./DataTable-Bq--Dtfi.js";import{M as Y}from"./Modal-hQLIuKk4.js";import{m as Re}from"./vendor-motion-jqNBOlmn.js";import"./vendor-router-Dre9H3zL.js";import"./vendor-gsap-B4nt0ofr.js";import"./categoryService-D8i_CdnK.js";const Me=({isOpen:Q,onClose:N,onSubmit:de,educationLevels:we=[],availabilityOptions:me=[],skillsData:X=[],languageLevels:t=[],jobCategories:h=[],isEdit:L=!1,initialData:c=null})=>{const[l,A]=o.useState({firstName:"",lastName:"",email:"",contactNumber:"",description:"",skills:"",gender:"",dateOfBirth:"",idNumber:"",maritalStatus:"",location:"",city:"",country:"Rwanda",references:"",experience:"",experienceLevel:"",monthlyRate:"",jobCategoryId:"",educationLevel:"",availability:"",languages:"",certifications:""}),[m,w]=o.useState({}),[T,C]=o.useState(!1),[Z,O]=o.useState(null),[k,D]=o.useState(null),[n,y]=o.useState([]),[$,ee]=o.useState(""),[ae,te]=o.useState(""),[p,R]=o.useState([]),[J,S]=o.useState(""),[U,P]=o.useState(""),ue=[{value:"no_experience",label:"No Experience (0 years)",description:"New to the workforce"},{value:"beginner",label:"Beginner (1-2 years)",description:"Some basic experience"},{value:"intermediate",label:"Intermediate (3-5 years)",description:"Moderate experience"},{value:"experienced",label:"Experienced (6-10 years)",description:"Significant experience"},{value:"expert",label:"Expert (10+ years)",description:"Extensive experience"}],H=["House Cleaning","Laundry","Ironing","Cooking","Meal Preparation","Kitchen Management","Childcare","Elderly Care","Pet Care","First Aid","Safety","Educational Activities","Gardening","Plant Care","Basic Repairs","Security Monitoring","Access Control","Food Service","Table Setting","Order Taking","Cash Handling","Customer Service","Bartending","Food Delivery","Housekeeping","Reception","Secretarial Work","Carpentry","Plumbing","Electrical Work","Masonry","Painting","Welding","Machining","Landscaping","Baking","Safe Driving","Vehicle Maintenance","Route Planning","GPS Navigation","Defensive Driving","Passenger Safety","Accounting","Bookkeeping","Marketing","Sales","Business Development","Financial Analysis","Human Resources","Operations Management","Supply Chain Management","Inventory Management","Negotiation","Product Knowledge","Market Knowledge","JavaScript","React","Node.js","Python","Java","C++","PHP","Ruby","Go","Rust","HTML/CSS","TypeScript","Angular","Vue.js","Django","Flask","Laravel","Express.js","MongoDB","PostgreSQL","MySQL","Redis","Docker","Kubernetes","AWS","Azure","GCP","Project Management","Agile/Scrum","Leadership","Team Management","Communication","Problem Solving","Critical Thinking","Time Management","Graphic Design","Web Design","Video Editing","Photography","Content Writing","Social Media Management","Digital Marketing","SEO","Copywriting","Nursing","Medical Assistance","Pharmacy","Laboratory Work","Patient Care","Medical Records","Health Administration","Teaching","Tutoring","Curriculum Development","Student Assessment","Classroom Management","Special Education","ESL Teaching","Security","Event Planning","Tourism","Translation","Interpretation","Data Entry","Administrative Work"].filter(r=>r.toLowerCase().includes(ae.toLowerCase())),E=["Kinyarwanda","English","French","Swahili","German","Spanish","Chinese","Arabic","Portuguese","Italian","Dutch","Russian","Japanese","Korean","Hindi","Turkish"].filter(r=>r.toLowerCase().includes(U.toLowerCase())),u=r=>{const{name:i,value:v}=r.target;A(g=>({...g,[i]:v})),m[i]&&w(g=>({...g,[i]:""}))},re=r=>{n.includes(r)||(y(i=>[...i,r]),z([...n,r]))},xe=r=>{const i=n.filter(v=>v!==r);y(i),z(i)},M=()=>{if($.trim()&&!n.includes($.trim())){const r=[...n,$.trim()];y(r),ee(""),z(r)}},z=r=>{A(i=>({...i,skills:r.join(", ")}))},pe=r=>{p.includes(r)||(R(i=>[...i,r]),q([...p,r]))},ge=r=>{const i=p.filter(v=>v!==r);R(i),q(i)},se=()=>{if(J.trim()&&!p.includes(J.trim())){const r=[...p,J.trim()];R(r),S(""),q(r)}},q=r=>{A(i=>({...i,languages:r.join(", ")}))},he=()=>{const r={};if(l.firstName.trim()?l.firstName.trim().length<2&&(r.firstName="First name must be at least 2 characters"):r.firstName="First name is required",l.lastName.trim()?l.lastName.trim().length<2&&(r.lastName="Last name must be at least 2 characters"):r.lastName="Last name is required",l.contactNumber&&l.contactNumber.replace(/\D/g,"").length<9&&(r.contactNumber="Phone number must be at least 9 digits"),l.experienceLevel.trim()||(r.experienceLevel="Experience level is required"),l.email.trim()&&!/\S+@\S+\.\S+/.test(l.email.trim())&&(r.email="Please enter a valid email address"),l.dateOfBirth){const i=new Date(l.dateOfBirth),g=new Date().getFullYear()-i.getFullYear();(g<16||g>100)&&(r.dateOfBirth="Age must be between 16 and 100 years")}return l.monthlyRate&&isNaN(parseFloat(l.monthlyRate))&&(r.monthlyRate="Please enter a valid number for monthly rate"),l.skills.trim()||(r.skills="At least one skill is required"),w(r),Object.keys(r).length===0},le=async r=>{if(r.preventDefault(),he()){C(!0);try{const i={firstName:l.firstName.trim(),lastName:l.lastName.trim(),email:l.email.trim()||null,contactNumber:l.contactNumber.trim(),description:l.description.trim(),skills:l.skills.trim(),gender:l.gender,dateOfBirth:l.dateOfBirth,idNumber:l.idNumber.trim(),maritalStatus:l.maritalStatus,location:l.location.trim(),city:l.city.trim(),country:l.country,references:l.references.trim(),experience:l.experience.trim(),experienceLevel:l.experienceLevel.trim(),monthlyRate:l.monthlyRate?parseFloat(l.monthlyRate):null,jobCategoryId:l.jobCategoryId?parseInt(l.jobCategoryId,10):null,educationLevel:l.educationLevel,availability:l.availability,languages:l.languages.trim(),certifications:l.certifications.trim()};await de(i,Z),N()}catch(i){console.error("Form submission error:",i)}finally{C(!1)}}},fe=()=>{N()};qe.useEffect(()=>{if(Q){if(L&&c){if(A({firstName:c.firstName||"",lastName:c.lastName||"",email:c.email||"",contactNumber:c.contactNumber||"",description:c.description||"",skills:c.skills||"",gender:c.gender||"",dateOfBirth:c.dateOfBirth||"",idNumber:c.idNumber||"",maritalStatus:c.maritalStatus||"",location:c.location||"",city:c.city||"",country:c.country||"Rwanda",references:c.references||"",experience:c.experience||"",experienceLevel:c.experienceLevel||"",monthlyRate:c.monthlyRate||"",jobCategoryId:c.jobCategoryId||"",educationLevel:c.educationLevel||"",availability:c.availability||"",languages:c.languages||"",certifications:c.certifications||""}),c.skills){const r=c.skills.split(",").map(i=>i.trim()).filter(i=>i);y(r)}if(c.languages){const r=c.languages.split(",").map(i=>i.trim()).filter(i=>i);R(r)}c.photo?D(c.photo):D(null)}else A({firstName:"",lastName:"",email:"",contactNumber:"",description:"",skills:"",gender:"",dateOfBirth:"",idNumber:"",maritalStatus:"",location:"",city:"",country:"Rwanda",references:"",experience:"",experienceLevel:"",monthlyRate:"",jobCategoryId:"",educationLevel:"",availability:"",languages:"",certifications:""}),y([]),R([]);w({}),O(null),L||D(null)}},[Q,L]);const be=r=>{const i=r.target.files&&r.target.files[0];if(!i)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(i.type)){w(g=>({...g,photo:"Invalid file type. Use JPEG/PNG/GIF/WEBP."}));return}if(i.size>5*1024*1024){w(g=>({...g,photo:"Photo must be less than 5MB."}));return}w(g=>({...g,photo:""})),O(i),D(URL.createObjectURL(i))};return e.jsx(Y,{isOpen:Q,onClose:N,title:L?"Edit Job Seeker":"Add New Job Seeker",maxWidth:"max-w-4xl",children:e.jsxs("form",{onSubmit:le,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name",required:!0}),m.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name",required:!0}),m.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email (optional)"}),m.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"contactNumber",value:l.contactNumber,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.contactNumber?"border-red-500":"border-gray-300"}`,placeholder:"+250788123456",required:!0}),m.contactNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.contactNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:l.gender,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (optional)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:k?e.jsx("img",{src:k,alt:"preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-gray-500",children:"No photo"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:be,className:"block"}),m.photo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.photo}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5MB. JPEG/PNG/GIF/WEBP."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:l.dateOfBirth,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.dateOfBirth?"border-red-500":"border-gray-300"}`}),m.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.dateOfBirth})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number"}),e.jsx("input",{type:"text",name:"idNumber",value:l.idNumber,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marital Status"}),e.jsxs("select",{name:"maritalStatus",value:l.maritalStatus,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:l.location,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Kigali, Rwanda"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"city",value:l.city,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:l.country,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter country"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Category"}),e.jsxs("select",{name:"jobCategoryId",value:l.jobCategoryId,onChange:u,disabled:h.length===0,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:h.length===0?"Loading categories...":"Select Category"}),h.map(r=>e.jsxs("option",{value:r.id.toString(),children:[r.name_en," - ",r.name_rw]},r.id))]}),h.length===0&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Loading job categories..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate (frw)"}),e.jsx("input",{type:"number",name:"monthlyRate",value:l.monthlyRate,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.monthlyRate?"border-red-500":"border-gray-300"}`,placeholder:"Enter monthly rate"}),m.monthlyRate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.monthlyRate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Education Level"}),e.jsxs("select",{name:"educationLevel",value:l.educationLevel,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Education Level"}),e.jsx("option",{value:"No Formal Education",children:"No Formal Education"}),e.jsx("option",{value:"Primary School",children:"Primary School"}),e.jsx("option",{value:"Secondary School",children:"Secondary School"}),e.jsx("option",{value:"High School",children:"High School"}),e.jsx("option",{value:"Vocational Training",children:"Vocational Training"}),e.jsx("option",{value:"Associate Degree",children:"Associate Degree"}),e.jsx("option",{value:"Bachelor's Degree",children:"Bachelor's Degree"}),e.jsx("option",{value:"Master's Degree",children:"Master's Degree"}),e.jsx("option",{value:"PhD",children:"PhD"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability"}),e.jsxs("select",{name:"availability",value:l.availability,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Availability"}),e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Freelance",children:"Freelance"}),e.jsx("option",{value:"Not Available",children:"Not Available"}),e.jsx("option",{value:"Open to Opportunities",children:"Open to Opportunities"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills *"}),e.jsxs("div",{className:"space-y-3",children:[n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((r,i)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[r,e.jsx("button",{type:"button",onClick:()=>xe(r),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},i))}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:ae,onChange:r=>te(r.target.value),placeholder:"Search skills...",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-1 max-h-32 overflow-y-auto border border-gray-300 rounded p-2",children:H.map(r=>e.jsx("button",{type:"button",onClick:()=>re(r),disabled:n.includes(r),className:`text-left p-1 rounded text-xs ${n.includes(r)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white hover:bg-blue-50 text-gray-700 border border-gray-200"}`,children:r},r))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:$,onChange:r=>ee(r.target.value),placeholder:"Add custom skill...",className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",onKeyPress:r=>r.key==="Enter"&&(r.preventDefault(),M())}),e.jsx("button",{type:"button",onClick:M,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Add"})]})]}),m.skills&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.skills})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience Level *"}),e.jsxs("select",{name:"experienceLevel",value:l.experienceLevel,onChange:u,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.experienceLevel?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Experience Level"}),ue.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),m.experienceLevel&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.experienceLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience Details (Optional)"}),e.jsx("textarea",{name:"experience",value:l.experience,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Describe your specific work experience, previous jobs, or relevant background",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Brief description about yourself",rows:"3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Languages"}),e.jsxs("div",{className:"space-y-3",children:[p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:p.map((r,i)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[r,e.jsx("button",{type:"button",onClick:()=>ge(r),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},i))}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:U,onChange:r=>P(r.target.value),placeholder:"Search languages...",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-1 max-h-32 overflow-y-auto border border-gray-300 rounded p-2",children:E.map(r=>e.jsx("button",{type:"button",onClick:()=>pe(r),disabled:p.includes(r),className:`text-left p-1 rounded text-xs ${p.includes(r)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white hover:bg-green-50 text-gray-700 border border-gray-200"}`,children:r},r))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:J,onChange:r=>S(r.target.value),placeholder:"Add custom language...",className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",onKeyPress:r=>r.key==="Enter"&&(r.preventDefault(),se())}),e.jsx("button",{type:"button",onClick:se,className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Add"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certifications"}),e.jsx("textarea",{name:"certifications",value:l.certifications,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"List any certifications or licenses",rows:"2"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"References"}),e.jsx("textarea",{name:"references",value:l.references,onChange:u,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"List your references with contact information",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx("button",{type:"button",onClick:fe,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",disabled:T,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:T,children:T?L?"Updating...":"Creating...":L?"Update Job Seeker":"Create Job Seeker"})]})]})})},Fe=[{id:"none",name:"No Formal Education",description:"Learned through experience"},{id:"primary",name:"Primary School",description:"Basic education completed"},{id:"secondary",name:"Secondary School",description:"High school education"},{id:"vocational",name:"Vocational Training",description:"Trade or skill training"},{id:"bachelor",name:"Bachelor's Degree",description:"University degree"},{id:"master",name:"Master's Degree",description:"Advanced university degree"},{id:"phd",name:"PhD/Doctorate",description:"Highest academic degree"}],Be=[{id:"fulltime",name:"Full Time",description:"Available for full-time work"},{id:"parttime",name:"Part Time",description:"Available for part-time work"},{id:"flexible",name:"Flexible",description:"Flexible schedule available"},{id:"weekends",name:"Weekends Only",description:"Available on weekends"},{id:"evenings",name:"Evenings Only",description:"Available in evenings"},{id:"oncall",name:"On Call",description:"Available when needed"}],Oe=["House Cleaning","Laundry","Ironing","Cooking","Meal Preparation","Kitchen Management","Childcare","Elderly Care","Pet Care","First Aid","Safety","Educational Activities","Gardening","Landscaping","Plant Care","Basic Repairs","Plumbing","Electrical","Carpentry","Painting","Security Monitoring","Access Control","Patrol","Safe Driving","Vehicle Maintenance","Route Planning","GPS Navigation","Defensive Driving","Passenger Safety","Food Service","Table Setting","Order Taking","Cash Handling","Customer Service","Bartending","Food Delivery","Sales","Inventory Management","Negotiation","Product Knowledge","Market Knowledge","Kinyarwanda","English","French","Swahili","Basic Communication","Translation"],De=[{id:"basic",name:"Basic",description:"Can understand and speak basic phrases"},{id:"conversational",name:"Conversational",description:"Can hold basic conversations"},{id:"fluent",name:"Fluent",description:"Can speak and understand well"},{id:"native",name:"Native",description:"Native speaker level"}],pa=[{value:"no_experience",label:"No Experience (0 years)",description:"New to the workforce"},{value:"beginner",label:"Beginner (1-2 years)",description:"Some basic experience"},{value:"intermediate",label:"Intermediate (3-5 years)",description:"Moderate experience"},{value:"experienced",label:"Experienced (6-10 years)",description:"Significant experience"},{value:"expert",label:"Expert (10+ years)",description:"Extensive experience"}],W={experienceLevel:[{value:"",label:"All Experience Levels"},...pa],category:[{value:"",label:"All Categories"}],location:[{value:"",label:"All Locations"},{value:"kigali",label:"Kigali"},{value:"butare",label:"Butare"},{value:"gisenyi",label:"Gisenyi"},{value:"ruhengeri",label:"Ruhengeri"},{value:"kibuye",label:"Kibuye"},{value:"cyangugu",label:"Cyangugu"},{value:"kibungo",label:"Kibungo"},{value:"rwamagana",label:"Rwamagana"}],gender:[{value:"",label:"All Genders"},{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],approvalStatus:[{value:"",label:"All Approval Statuses"},{value:"pending",label:"Pending Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]},Pa=()=>{const{t:Q}=Ve(),{user:N,isAuthenticated:de,loading:we}=oa(),[me,X]=o.useState(!1),[t,h]=o.useState(null),[L,c]=o.useState(!1),[l,A]=o.useState(!1),[m,w]=o.useState(!1),[T,C]=o.useState(!1),[Z,O]=o.useState(!1),[k,D]=o.useState(""),[n,y]=o.useState({experienceLevel:"",category:"",location:"",gender:"",approvalStatus:""}),[$,ee]=o.useState(!1),[ae,te]=o.useState(!1),{categories:p,loading:R}=da(),[J,S]=o.useState(""),[U,P]=o.useState(!1),[ue,f]=o.useState(""),[H,b]=o.useState(!1),{jobSeekers:E,loading:u,error:re,totalItems:xe,fetchJobSeekers:M,createJobSeeker:z,updateJobSeeker:pe,deleteJobSeeker:ge}=na({autoFetch:!0,itemsPerPage:10}),{pendingProfiles:se,approvedProfiles:q,rejectedProfiles:he,loading:le,approveProfile:fe,rejectProfile:be,fetchProfilesByStatus:r}=ma({autoFetch:!1,itemsPerPage:10});o.useEffect(()=>{N&&N.role==="admin"&&M()},[N,M]),o.useEffect(()=>{N&&N.role==="admin"&&(async()=>{try{await Promise.all([r("pending",1),r("approved",1),r("rejected",1)])}catch(s){console.error("Error fetching approval data:",s)}})()},[N,r]),o.useEffect(()=>{if(U){const a=setTimeout(()=>{P(!1),S("")},3e3);return()=>clearTimeout(a)}},[U]),o.useEffect(()=>{if(H){const a=setTimeout(()=>{b(!1),f("")},5e3);return()=>clearTimeout(a)}},[H]);const i=a=>{D(a),te(!0),setTimeout(()=>te(!1),300)},v=(a,s)=>{y(d=>({...d,[a]:s}))},g=()=>{y({experienceLevel:"",category:"",location:"",gender:"",approvalStatus:""}),D("")},G=o.useMemo(()=>!E||E.length===0?[]:E.filter(a=>{if(k){const s=k.toLowerCase(),d=`${a.profile?.firstName||a.firstName||""} ${a.profile?.lastName||a.lastName||""}`.toLowerCase(),x=(a.email||"").toLowerCase(),I=(a.profile?.skills||a.skills||"").toLowerCase(),ve=(a.profile?.location||a.location||"").toLowerCase();if(!d.includes(s)&&!x.includes(s)&&!I.includes(s)&&!ve.includes(s))return!1}return!(n.experienceLevel&&a.profile?.experienceLevel!==n.experienceLevel||n.category&&a.profile?.jobCategory?.name_en?.toLowerCase()!==n.category.toLowerCase()||n.location&&(a.profile?.location||a.location||"").toLowerCase()!==n.location.toLowerCase()||n.gender&&a.profile?.gender!==n.gender||n.approvalStatus&&(a.profile?.approvalStatus||a.approvalStatus||"pending")!==n.approvalStatus)}),[E,k,n]),K=o.useMemo(()=>{let a=0;return k&&a++,Object.values(n).forEach(s=>{s&&a++}),a},[k,n]);o.useEffect(()=>{if(p&&p.length>0){const a=[{value:"",label:"All Categories"},...p.map(s=>({value:s.name_en.toLowerCase(),label:s.name_en}))];W.category=a}},[p]);const $e=async()=>{try{S("Refreshing data..."),P(!0),await Promise.all([M(),r("pending",1),r("approved",1),r("rejected",1)]),S("Data refreshed successfully!"),setTimeout(()=>{P(!1)},3e3)}catch(a){f("Failed to refresh data"),b(!0),console.error("Manual refresh error:",a)}},V=a=>{switch(a){case"total":y(s=>({...s,approvalStatus:""}));break;case"pending":y(s=>({...s,approvalStatus:"pending"}));break;case"approved":y(s=>({...s,approvalStatus:"approved"}));break;case"rejected":y(s=>({...s,approvalStatus:"rejected"}));break;case"clear":g();break}},_=(a,s)=>{switch(a){case"openActions":h(s),C(!0);break;case"view":h(s),c(!0),C(!1);break;case"edit":h(s),A(!0),C(!1);break;case"approve":ke(s.id,"approved"),C(!1);break;case"reject":h(s),O(!0),C(!1);break;case"delete":h(s),w(!0),C(!1);break}},Ie=async(a,s=null)=>{try{const d=await z(a,s);d.success?(X(!1),S("Job seeker created successfully!"),P(!0)):(f(`Error: ${d.error}`),b(!0))}catch(d){f("Failed to create job seeker"),b(!0),console.error("Create job seeker error:",d)}},Te=async(a,s=null)=>{if(t)try{const d=await pe(t.id,a,s);d.success?(A(!1),h(null),S("Job seeker updated successfully!"),P(!0)):(f(`Error: ${d.error}`),b(!0))}catch(d){f("Failed to update job seeker"),b(!0),console.error("Update job seeker error:",d)}},Je=async()=>{if(t)try{const a=await ge(t.id);a.success?(w(!1),h(null),S("Job seeker deleted successfully!"),P(!0)):(f(`Error: ${a.error}`),b(!0))}catch(a){f("Failed to delete job seeker"),b(!0),console.error("Delete job seeker error:",a)}},ke=async(a,s,d=null)=>{try{let x;if(s==="approved")x=await fe(a);else if(s==="rejected"){if(!d){f("Rejection reason is required"),b(!0);return}x=await be(a,d)}if(x&&x.success){S(x.message||`Profile ${s} successfully - refreshing data...`),P(!0);try{await M(),await Promise.all([r("pending",1),r("approved",1),r("rejected",1)]),S(x.message||`Profile ${s} successfully - data refreshed!`),h(null)}catch(I){console.error("Error refreshing data after approval change:",I),f("Action completed but failed to refresh data. Please refresh the page manually."),b(!0)}}else x&&(f(x.error||`Failed to ${s} profile`),b(!0))}catch(x){f(`Failed to ${s} profile`),b(!0),console.error("Approval change error:",x)}},Ue=a=>[{key:"openActions",title:"Actions",icon:Ze,className:"text-gray-600 hover:bg-gray-50"}];if(we)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ee,{size:"lg",text:"Checking authentication..."})});if(!de)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700",children:"You must be logged in to access this page."})]}),e.jsx(j,{onClick:()=>window.location.href="/login",className:"mt-2",variant:"outline",size:"sm",children:"Go to Login"})]});if(N?.role!=="admin")return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-yellow-700",children:"You must be an admin to access this page."})]}),e.jsx(j,{onClick:()=>window.location.href="/dashboard/jobseeker",className:"mt-2",variant:"outline",size:"sm",children:"Go to Job Seeker Dashboard"})]});const Ge=[{key:"name",label:"joobseekr details",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.firstName||a.firstName||"Unknown",d=a.profile?.lastName||a.lastName||"",x=a.email||"No email",I=a.profile?.contactNumber||a.contactNumber||"No phone",ve=a.profile?.gender||a.gender||"Not specified",Ke=a.profile?.photo||a.photo||null,Se=(F=>F?/^https?:\/\//i.test(F)?F:`${ce.BASE_URL}/${F.replace(/^\//,"")}`:null)(Ke),_e=(F,We)=>{const ie=(F||"").trim(),ne=(We||"").trim(),He=ie?ie.charAt(0).toUpperCase():"",ze=ne?ne.charAt(0).toUpperCase():"";return`${He}${ze}`||(ie||ne?(ie||ne).charAt(0).toUpperCase():"")};return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:Se?e.jsx("img",{src:Se,alt:`${s} ${d}`,className:"w-full h-full object-cover",onError:F=>{F.currentTarget.src=je}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-sm font-semibold text-white",children:_e(s,d)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s," ",d]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[I," ",e.jsxs(e.Fragment,{children:["• ",ve]})]}),e.jsx("div",{className:"text-lg text-gray-400",children:x})]})]})}},{key:"location",label:"Location",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.location||a.location||"Not specified";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ra,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s})]})}},{key:"skills",label:"Skills",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.skills||a.skills||"",d=Array.isArray(s)?s:s.split(",").map(x=>x.trim()).filter(x=>x);return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.slice(0,3).map((x,I)=>e.jsx(Ne,{variant:"secondary",size:"sm",children:x},I)),d.length>3&&e.jsxs(Ne,{variant:"outline",size:"sm",children:["+",d.length-3," more"]})]})}},{key:"education",label:"Education",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.educationLevel||"Not specified",d=a.profile?.availability||"Not specified";return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(sa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:d})]})]})}},{key:"experience",label:"Experience",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.experienceLevel||"Not specified",d=x=>{switch(x){case"no_experience":return"No Experience";case"beginner":return"Beginner (1-2 years)";case"intermediate":return"Intermediate (3-5 years)";case"experienced":return"Experienced (6-10 years)";case"expert":return"Expert (10+ years)";default:return x}};return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(la,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:d(s)})]})}},{key:"createdAt",label:"Registered",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.createdAt;return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ia,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s?new Date(s).toLocaleDateString():"Invalid Date"})]})}},{key:"approvalStatus",label:"Approval Status",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.approvalStatus||a.approvalStatus||"pending";return e.jsx(ua,{status:s,size:"sm"})}}];return u&&E.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ee,{size:"lg",text:"Loading job seekers..."})}):re?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-red-700",children:["Error: ",re]})]}),e.jsx(j,{onClick:M,className:"mt-2",variant:"outline",size:"sm",children:"Retry"})]}):(E.length>0,e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:(function(){const a=t?.profile?.photo||t?.photo||null,s=a&&(/^https?:\/\//i.test(a)?a:`${ce.BASE_URL}/${a.replace(/^\//,"")}`);if(s)return e.jsx("img",{src:s,alt:`${t?.profile?.firstName||""} ${t?.profile?.lastName||""}`,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src=je}});const d=((t?.profile?.firstName||t?.firstName||"").charAt(0)||"")+((t?.profile?.lastName||t?.lastName||"").charAt(0)||"");return e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-400 text-2xl font-semibold text-white",children:d.toUpperCase()||"U"})})()}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[t?.profile?.firstName||t?.firstName||"Unknown"," ",t?.profile?.lastName||t?.lastName||""]}),e.jsx("p",{className:"text-sm text-gray-500",children:t?.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Job Seekers Management"}),e.jsxs("p",{className:"text-gray-600",children:["Manage all registered job seekers (",xe," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(j,{onClick:$e,variant:"outline",disabled:u||le,className:"flex items-center gap-2",children:[e.jsx(Ye,{className:`w-4 h-4 ${u||le?"animate-spin":""}`}),"Refresh"]}),e.jsxs(j,{onClick:()=>X(!0),children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Add Job Seeker"]})]})]}),U&&e.jsx(Re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-green-700",children:J})]})}),H&&e.jsx(Re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700",children:ue})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs(B,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus?"hover:border-blue-300":"border-blue-400 bg-blue-50 shadow-lg"}`,onClick:()=>V("total"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Job Seekers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus?`${G.length} currently showing`:"All profiles visible"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Xe,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-blue-600 font-medium",children:n.approvalStatus?"Click to show all profiles":"✓ Showing all profiles"})]}),e.jsxs(B,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="pending"?"border-yellow-400 bg-yellow-50":"hover:border-yellow-300"}`,onClick:()=>V("pending"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="pending"?`${G.length} currently showing`:"Click to filter pending profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(Ce,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-yellow-600 font-medium",children:n.approvalStatus==="pending"?"✓ Active filter":"Click to filter pending"})]}),e.jsxs(B,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="approved"?"border-green-400 bg-green-50":"hover:border-green-300"}`,onClick:()=>V("approved"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="approved"?`${G.length} currently showing`:"Click to filter approved profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ye,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-green-600 font-medium",children:n.approvalStatus==="approved"?"✓ Active filter":"Click to filter approved"})]}),e.jsxs(B,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="rejected"?"border-red-400 bg-red-50":"hover:border-red-300"}`,onClick:()=>V("rejected"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:he.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="rejected"?`${G.length} currently showing`:"Click to filter rejected profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Le,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-red-600 font-medium",children:n.approvalStatus==="rejected"?"✓ Active filter":"Click to filter rejected"})]}),e.jsxs(B,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${K>0?"border-purple-400 bg-purple-50":"hover:border-purple-300"}`,onClick:()=>V("clear"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Filters"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-purple-600 font-medium",children:K>0?"Click to clear all filters":"No active filters"})]})]}),e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, skills, or location...",value:k,onChange:a=>i(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),ae&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),e.jsxs(j,{onClick:()=>ee(!$),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Filters ",K>0&&`(${K})`]}),K>0&&e.jsx(j,{onClick:g,variant:"outline",className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),$&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience Level"}),e.jsx("select",{value:n.experienceLevel,onChange:a=>v("experienceLevel",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:W.experienceLevel.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:n.category,onChange:a=>v("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:R,children:R?e.jsx("option",{children:"Loading categories..."}):W.category.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("select",{value:n.location,onChange:a=>v("location",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:W.location.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),e.jsx("select",{value:n.gender,onChange:a=>v("gender",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:W.gender.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approval Status"}),e.jsx("select",{value:n.approvalStatus,onChange:a=>v("approvalStatus",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:W.approvalStatus.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]})]})}),G.length===0&&(k||Object.values(n).some(a=>a))&&e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or filters to find more job seekers."}),e.jsx(j,{onClick:g,variant:"outline",children:"Clear All Filters"})]}),e.jsx(B,{children:e.jsx(xa,{data:G,columns:Ge,loading:u,emptyMessage:"No job seekers found",actionButtons:Ue,onRowAction:_,pagination:!0,itemsPerPage:15,searchTerm:k,onSearchChange:i,showSearch:!1})}),me&&e.jsx(e.Fragment,{children:e.jsx(Me,{isOpen:me,onClose:()=>X(!1),onSubmit:Ie,educationLevels:Fe,availabilityOptions:Be,skillsData:Oe,languageLevels:De,jobCategories:p,isEdit:!1})}),l&&t&&e.jsx(e.Fragment,{children:(()=>{const a={firstName:t.profile?.firstName||t.firstName||"",lastName:t.profile?.lastName||t.lastName||"",email:t.email||"",contactNumber:t.profile?.contactNumber||t.contactNumber||"",description:t.profile?.description||t.description||"",skills:t.profile?.skills||t.skills||"",gender:t.profile?.gender||t.gender||"",dateOfBirth:t.profile?.dateOfBirth?new Date(t.profile.dateOfBirth).toISOString().split("T")[0]:"",idNumber:t.profile?.idNumber||"",maritalStatus:t.profile?.maritalStatus||"",location:t.profile?.location||t.location||"",city:t.profile?.city||"",country:t.profile?.country||"Rwanda",references:t.profile?.references||"",experience:t.profile?.experience||t.experience||"",experienceLevel:t.profile?.experienceLevel||"",monthlyRate:t.profile?.monthlyRate?t.profile.monthlyRate.toString():"",jobCategoryId:t.profile?.jobCategoryId?t.profile.jobCategoryId.toString():"",jobCategoryName:t.profile?.jobCategory?.name_en||"",educationLevel:t.profile?.educationLevel||"",availability:t.profile?.availability||"",languages:t.profile?.languages||"",certifications:t.profile?.certifications||"",photo:(()=>{const s=t?.profile?.photo||t?.photo||null;return s?/^https?:\/\//i.test(s)?s:`${ce.BASE_URL}/${s.replace(/^\//,"")}`:null})()};return e.jsx(Me,{isOpen:l,onClose:()=>A(!1),onSubmit:Te,educationLevels:Fe,availabilityOptions:Be,skillsData:Oe,languageLevels:De,jobCategories:p,initialData:a,isEdit:!0})})()}),L&&t&&e.jsx(Y,{isOpen:L,onClose:()=>c(!1),title:"Job Seeker Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsxs("p",{className:"mt-1 text-gray-900",children:[t.profile?.firstName||t.firstName||"Unknown"," "," ",t.profile?.lastName||t.lastName||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.contactNumber||t.contactNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.location||t.location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.gender||t.gender||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Registered"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.createdAt?new Date(t.createdAt).toLocaleDateString():"Not available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Photo"}),e.jsx("div",{className:"mt-2",children:(function(){const a=t?.profile?.photo||t?.photo||null,s=a?/^https?:\/\//i.test(a)?a:`${ce.BASE_URL}/${a.replace(/^\//,"")}`:je;return e.jsx(ca,{src:s,alt:`${t?.profile?.firstName||""} ${t?.profile?.lastName||""}`,size:"xl",variant:"rounded",isPrivate:!1})})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.profile?.skills||t.skills||"").split(",").map((a,s)=>a.trim()).filter(a=>a).map((a,s)=>e.jsx(Ne,{variant:"secondary",children:a},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.description||t.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Experience Level"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(()=>{switch(t.profile?.experienceLevel){case"no_experience":return"No Experience (0 years)";case"beginner":return"Beginner (1-2 years)";case"intermediate":return"Intermediate (3-5 years)";case"experienced":return"Experienced (6-10 years)";case"expert":return"Expert (10+ years)";default:return"Not specified"}})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Experience Details"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.experience||t.experience||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.city||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.country||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Category"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.jobCategory?.name_en||t.profile?.jobCategoryId||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Monthly Rate"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.monthlyRate?`${t.profile.monthlyRate} frw`:"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Education Level"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.educationLevel||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Availability"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.availability||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marital Status"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.maritalStatus||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Languages"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.languages||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Certifications"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile?.certifications||"Not specified"})]})]}),t.profile?.references&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"References"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile.references})]}),t.profile?.idNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ID Number"}),e.jsx("p",{className:"mt-1 text-gray-900",children:t.profile.idNumber})]}),t.profile?.dateOfBirth&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("p",{className:"mt-1 text-gray-900",children:new Date(t.profile.dateOfBirth).toLocaleDateString()})]})]})}),T&&t&&e.jsx(Y,{isOpen:T,onClose:()=>C(!1),title:`Actions for ${t.profile?.firstName||t.firstName||"Unknown"} ${t.profile?.lastName||t.lastName||""}`,maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>_("view",t),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-blue-50 transition-colors duration-200",children:[e.jsx(ea,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-gray-900",children:"View Details"})]}),e.jsxs("button",{onClick:()=>_("edit",t),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-green-50 transition-colors duration-200",children:[e.jsx(aa,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-900",children:"Edit Job Seeker"})]}),t&&(t.profile?.approvalStatus||t.approvalStatus)!=="approved"&&e.jsxs("button",{onClick:()=>_("approve",t),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-green-50 transition-colors duration-200",children:[e.jsx(ye,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-900",children:"Approve Profile"})]}),t&&(t.profile?.approvalStatus||t.approvalStatus)!=="rejected"&&e.jsxs("button",{onClick:()=>_("reject",t),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-red-50 transition-colors duration-200",children:[e.jsx(Le,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-gray-900",children:"Reject Profile"})]}),e.jsxs("button",{onClick:()=>_("delete",t),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-red-50 transition-colors duration-200",children:[e.jsx(ta,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-gray-900",children:"Delete Job Seeker"})]})]})}),Z&&t&&e.jsx(Y,{isOpen:Z,onClose:()=>O(!1),title:`Reject Profile - ${t.profile?.firstName||t.firstName||"Unknown"} ${t.profile?.lastName||t.lastName||""}`,maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Please provide a reason for rejecting this profile. This will help the job seeker understand why their profile was not approved."}),e.jsx("textarea",{placeholder:"Enter rejection reason (minimum 10 characters)...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:4,minLength:10,maxLength:500,id:"rejectionReason"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(j,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(j,{variant:"danger",onClick:()=>{const a=document.getElementById("rejectionReason").value.trim();a.length>=10?(ke(t.id,"rejected",a),O(!1)):alert("Please provide a rejection reason (minimum 10 characters)")},children:"Reject Profile"})]})]})}),m&&t&&e.jsx(Y,{isOpen:m,onClose:()=>w(!1),title:"Delete Job Seeker",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to delete"," ",t.profile?.firstName||t.firstName||"Unknown"," "," ",t.profile?.lastName||t.lastName||"","? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(j,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(j,{variant:"danger",onClick:Je,children:"Delete"})]})]})})]}))};export{Pa as default};
