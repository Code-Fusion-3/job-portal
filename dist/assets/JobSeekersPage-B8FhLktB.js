import{r as c,K as Ve,j as e,c as Ye,C as oe,a2 as Qe,ar as Xe,a as ye,U as Ze,a0 as Se,a4 as Le,q as Ae,S as Pe,aw as ea,e as aa,a5 as ra,ao as ta,f as sa,D as la,a1 as ia,O as na}from"./vendor-react-BkwhrffK.js";import{a as oa}from"./useJobSeekers-BoL8J6I2.js";import{u as ca,L as Ee,B as N,A as ce,d as je,C as D,P as da,g as ma,i as ua,k as Re,v as xa}from"./index-BwJdDrjx.js";import{b as pa}from"./useCategories-sOSLjpJi.js";import{u as ga}from"./useApprovalManagement-CtLffP8F.js";import{B as Ne}from"./Badge-p12a0enm.js";import{S as ha}from"./StatusBadge-DD9XEp3_.js";import{D as fa}from"./DataTable-CItc7P9l.js";import{M as Y}from"./Modal-D8dq9gsi.js";import{m as Me}from"./vendor-motion-CuEGWhdi.js";import"./vendor-common-BZD0eUgH.js";import"./vendor-gsap-lnFyu4_T.js";import"./categoryService-n484xWdK.js";const Fe=({isOpen:Q,onClose:w,onSubmit:de,educationLevels:we=[],availabilityOptions:me=[],skillsData:X=[],languageLevels:r=[],jobCategories:b=[],isEdit:A=!1,initialData:d=null})=>{const[l,P]=c.useState({firstName:"",lastName:"",email:"",contactNumber:"",description:"",skills:"",gender:"",dateOfBirth:"",idNumber:"",maritalStatus:"",location:"",city:"",country:"Rwanda",references:"",experience:"",experienceLevel:"",monthlyRate:"",jobCategoryId:"",educationLevel:"",availability:"",languages:"",certifications:""}),[m,k]=c.useState({}),[T,L]=c.useState(!1),[Z,O]=c.useState(null),[C,$]=c.useState(null),[n,y]=c.useState([]),[I,ee]=c.useState(""),[ae,re]=c.useState(""),[p,M]=c.useState([]),[J,S]=c.useState(""),[U,E]=c.useState(""),ue=[{value:"no_experience",label:"No Experience (0 years)",description:"New to the workforce"},{value:"beginner",label:"Beginner (1-2 years)",description:"Some basic experience"},{value:"intermediate",label:"Intermediate (3-5 years)",description:"Moderate experience"},{value:"experienced",label:"Experienced (6-10 years)",description:"Significant experience"},{value:"expert",label:"Expert (10+ years)",description:"Extensive experience"}],W=["House Cleaning","Laundry","Ironing","Cooking","Meal Preparation","Kitchen Management","Childcare","Elderly Care","Pet Care","First Aid","Safety","Educational Activities","Gardening","Plant Care","Basic Repairs","Security Monitoring","Access Control","Food Service","Table Setting","Order Taking","Cash Handling","Customer Service","Bartending","Food Delivery","Housekeeping","Reception","Secretarial Work","Carpentry","Plumbing","Electrical Work","Masonry","Painting","Welding","Machining","Landscaping","Baking","Safe Driving","Vehicle Maintenance","Route Planning","GPS Navigation","Defensive Driving","Passenger Safety","Accounting","Bookkeeping","Marketing","Sales","Business Development","Financial Analysis","Human Resources","Operations Management","Supply Chain Management","Inventory Management","Negotiation","Product Knowledge","Market Knowledge","JavaScript","React","Node.js","Python","Java","C++","PHP","Ruby","Go","Rust","HTML/CSS","TypeScript","Angular","Vue.js","Django","Flask","Laravel","Express.js","MongoDB","PostgreSQL","MySQL","Redis","Docker","Kubernetes","AWS","Azure","GCP","Project Management","Agile/Scrum","Leadership","Team Management","Communication","Problem Solving","Critical Thinking","Time Management","Graphic Design","Web Design","Video Editing","Photography","Content Writing","Social Media Management","Digital Marketing","SEO","Copywriting","Nursing","Medical Assistance","Pharmacy","Laboratory Work","Patient Care","Medical Records","Health Administration","Teaching","Tutoring","Curriculum Development","Student Assessment","Classroom Management","Special Education","ESL Teaching","Security","Event Planning","Tourism","Translation","Interpretation","Data Entry","Administrative Work"].filter(t=>t.toLowerCase().includes(ae.toLowerCase())),R=["Kinyarwanda","English","French","Swahili","German","Spanish","Chinese","Arabic","Portuguese","Italian","Dutch","Russian","Japanese","Korean","Hindi","Turkish"].filter(t=>t.toLowerCase().includes(U.toLowerCase())),x=t=>{const{name:i,value:v}=t.target;P(g=>({...g,[i]:v})),m[i]&&k(g=>({...g,[i]:""}))},te=t=>{n.includes(t)||(y(i=>[...i,t]),z([...n,t]))},xe=t=>{const i=n.filter(v=>v!==t);y(i),z(i)},F=()=>{if(I.trim()&&!n.includes(I.trim())){const t=[...n,I.trim()];y(t),ee(""),z(t)}},z=t=>{P(i=>({...i,skills:t.join(", ")}))},pe=t=>{p.includes(t)||(M(i=>[...i,t]),q([...p,t]))},ge=t=>{const i=p.filter(v=>v!==t);M(i),q(i)},se=()=>{if(J.trim()&&!p.includes(J.trim())){const t=[...p,J.trim()];M(t),S(""),q(t)}},q=t=>{P(i=>({...i,languages:t.join(", ")}))},he=()=>{const t={};if(l.firstName.trim()?l.firstName.trim().length<2&&(t.firstName="First name must be at least 2 characters"):t.firstName="First name is required",l.lastName.trim()?l.lastName.trim().length<2&&(t.lastName="Last name must be at least 2 characters"):t.lastName="Last name is required",l.contactNumber&&l.contactNumber.replace(/\D/g,"").length<9&&(t.contactNumber="Phone number must be at least 9 digits"),l.experienceLevel.trim()||(t.experienceLevel="Experience level is required"),l.email.trim()&&!/\S+@\S+\.\S+/.test(l.email.trim())&&(t.email="Please enter a valid email address"),l.dateOfBirth){const i=new Date(l.dateOfBirth),g=new Date().getFullYear()-i.getFullYear();(g<16||g>100)&&(t.dateOfBirth="Age must be between 16 and 100 years")}return l.monthlyRate&&isNaN(parseFloat(l.monthlyRate))&&(t.monthlyRate="Please enter a valid number for monthly rate"),l.skills.trim()||(t.skills="At least one skill is required"),k(t),Object.keys(t).length===0},le=async t=>{if(t.preventDefault(),he()){L(!0);try{const i={firstName:l.firstName.trim(),lastName:l.lastName.trim(),email:l.email.trim()||null,contactNumber:l.contactNumber.trim(),description:l.description.trim(),skills:l.skills.trim(),gender:l.gender,dateOfBirth:l.dateOfBirth,idNumber:l.idNumber.trim(),maritalStatus:l.maritalStatus,location:l.location.trim(),city:l.city.trim(),country:l.country,references:l.references.trim(),experience:l.experience.trim(),experienceLevel:l.experienceLevel.trim(),monthlyRate:l.monthlyRate?parseFloat(l.monthlyRate):null,jobCategoryId:l.jobCategoryId?parseInt(l.jobCategoryId,10):null,educationLevel:l.educationLevel,availability:l.availability,languages:l.languages.trim(),certifications:l.certifications.trim()};await de(i,Z),w()}catch(i){console.error("Form submission error:",i)}finally{L(!1)}}},fe=()=>{w()};Ve.useEffect(()=>{if(Q){if(A&&d){if(P({firstName:d.firstName||"",lastName:d.lastName||"",email:d.email||"",contactNumber:d.contactNumber||"",description:d.description||"",skills:d.skills||"",gender:d.gender||"",dateOfBirth:d.dateOfBirth||"",idNumber:d.idNumber||"",maritalStatus:d.maritalStatus||"",location:d.location||"",city:d.city||"",country:d.country||"Rwanda",references:d.references||"",experience:d.experience||"",experienceLevel:d.experienceLevel||"",monthlyRate:d.monthlyRate||"",jobCategoryId:d.jobCategoryId||"",educationLevel:d.educationLevel||"",availability:d.availability||"",languages:d.languages||"",certifications:d.certifications||""}),d.skills){const t=d.skills.split(",").map(i=>i.trim()).filter(i=>i);y(t)}if(d.languages){const t=d.languages.split(",").map(i=>i.trim()).filter(i=>i);M(t)}d.photo?$(d.photo):$(null)}else P({firstName:"",lastName:"",email:"",contactNumber:"",description:"",skills:"",gender:"",dateOfBirth:"",idNumber:"",maritalStatus:"",location:"",city:"",country:"Rwanda",references:"",experience:"",experienceLevel:"",monthlyRate:"",jobCategoryId:"",educationLevel:"",availability:"",languages:"",certifications:""}),y([]),M([]);k({}),O(null),A||$(null)}},[Q,A]);const be=t=>{const i=t.target.files&&t.target.files[0];if(!i)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(i.type)){k(g=>({...g,photo:"Invalid file type. Use JPEG/PNG/GIF/WEBP."}));return}if(i.size>5*1024*1024){k(g=>({...g,photo:"Photo must be less than 5MB."}));return}k(g=>({...g,photo:""})),O(i),$(URL.createObjectURL(i))};return e.jsx(Y,{isOpen:Q,onClose:w,title:A?"Edit Job Seeker":"Add New Job Seeker",maxWidth:"max-w-4xl",children:e.jsxs("form",{onSubmit:le,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name",required:!0}),m.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Enter last name",required:!0}),m.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter email (optional)"}),m.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"contactNumber",value:l.contactNumber,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.contactNumber?"border-red-500":"border-gray-300"}`,placeholder:"+250788123456",required:!0}),m.contactNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.contactNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:l.gender,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (optional)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:C?e.jsx("img",{src:C,alt:"preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-gray-500",children:"No photo"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",onChange:be,className:"block"}),m.photo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.photo}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Max 5MB. JPEG/PNG/GIF/WEBP."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:l.dateOfBirth,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.dateOfBirth?"border-red-500":"border-gray-300"}`}),m.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.dateOfBirth})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Number"}),e.jsx("input",{type:"text",name:"idNumber",value:l.idNumber,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marital Status"}),e.jsxs("select",{name:"maritalStatus",value:l.maritalStatus,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:l.location,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Kigali, Rwanda"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",name:"city",value:l.city,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:l.country,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Enter country"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Category"}),e.jsxs("select",{name:"jobCategoryId",value:l.jobCategoryId,onChange:x,disabled:b.length===0,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:b.length===0?"Loading categories...":"Select Category"}),b.map(t=>e.jsxs("option",{value:t.id.toString(),children:[t.name_en," - ",t.name_rw]},t.id))]}),b.length===0&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Loading job categories..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate (frw)"}),e.jsx("input",{type:"number",name:"monthlyRate",value:l.monthlyRate,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.monthlyRate?"border-red-500":"border-gray-300"}`,placeholder:"Enter monthly rate"}),m.monthlyRate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.monthlyRate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Education Level"}),e.jsxs("select",{name:"educationLevel",value:l.educationLevel,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Education Level"}),e.jsx("option",{value:"No Formal Education",children:"No Formal Education"}),e.jsx("option",{value:"Primary School",children:"Primary School"}),e.jsx("option",{value:"Secondary School",children:"Secondary School"}),e.jsx("option",{value:"High School",children:"High School"}),e.jsx("option",{value:"Vocational Training",children:"Vocational Training"}),e.jsx("option",{value:"Associate Degree",children:"Associate Degree"}),e.jsx("option",{value:"Bachelor's Degree",children:"Bachelor's Degree"}),e.jsx("option",{value:"Master's Degree",children:"Master's Degree"}),e.jsx("option",{value:"PhD",children:"PhD"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Availability"}),e.jsxs("select",{name:"availability",value:l.availability,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Availability"}),e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Freelance",children:"Freelance"}),e.jsx("option",{value:"Not Available",children:"Not Available"}),e.jsx("option",{value:"Open to Opportunities",children:"Open to Opportunities"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills *"}),e.jsxs("div",{className:"space-y-3",children:[n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((t,i)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[t,e.jsx("button",{type:"button",onClick:()=>xe(t),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},i))}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:ae,onChange:t=>re(t.target.value),placeholder:"Search skills...",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-1 max-h-32 overflow-y-auto border border-gray-300 rounded p-2",children:W.map(t=>e.jsx("button",{type:"button",onClick:()=>te(t),disabled:n.includes(t),className:`text-left p-1 rounded text-xs ${n.includes(t)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white hover:bg-blue-50 text-gray-700 border border-gray-200"}`,children:t},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:I,onChange:t=>ee(t.target.value),placeholder:"Add custom skill...",className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),F())}),e.jsx("button",{type:"button",onClick:F,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Add"})]})]}),m.skills&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.skills})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience Level *"}),e.jsxs("select",{name:"experienceLevel",value:l.experienceLevel,onChange:x,className:`w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 ${m.experienceLevel?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Experience Level"}),ue.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),m.experienceLevel&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.experienceLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience Details (Optional)"}),e.jsx("textarea",{name:"experience",value:l.experience,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Describe your specific work experience, previous jobs, or relevant background",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:l.description,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"Brief description about yourself",rows:"3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Languages"}),e.jsxs("div",{className:"space-y-3",children:[p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:p.map((t,i)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[t,e.jsx("button",{type:"button",onClick:()=>ge(t),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},i))}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:U,onChange:t=>E(t.target.value),placeholder:"Search languages...",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-1 max-h-32 overflow-y-auto border border-gray-300 rounded p-2",children:R.map(t=>e.jsx("button",{type:"button",onClick:()=>pe(t),disabled:p.includes(t),className:`text-left p-1 rounded text-xs ${p.includes(t)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white hover:bg-green-50 text-gray-700 border border-gray-200"}`,children:t},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:J,onChange:t=>S(t.target.value),placeholder:"Add custom language...",className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",onKeyPress:t=>t.key==="Enter"&&(t.preventDefault(),se())}),e.jsx("button",{type:"button",onClick:se,className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Add"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certifications"}),e.jsx("textarea",{name:"certifications",value:l.certifications,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"List any certifications or licenses",rows:"2"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"References"}),e.jsx("textarea",{name:"references",value:l.references,onChange:x,className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",placeholder:"List your references with contact information",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[e.jsx("button",{type:"button",onClick:fe,className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",disabled:T,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:T,children:T?A?"Updating...":"Creating...":A?"Update Job Seeker":"Create Job Seeker"})]})]})})},Be=[{id:"none",name:"No Formal Education",description:"Learned through experience"},{id:"primary",name:"Primary School",description:"Basic education completed"},{id:"secondary",name:"Secondary School",description:"High school education"},{id:"vocational",name:"Vocational Training",description:"Trade or skill training"},{id:"bachelor",name:"Bachelor's Degree",description:"University degree"},{id:"master",name:"Master's Degree",description:"Advanced university degree"},{id:"phd",name:"PhD/Doctorate",description:"Highest academic degree"}],De=[{id:"fulltime",name:"Full Time",description:"Available for full-time work"},{id:"parttime",name:"Part Time",description:"Available for part-time work"},{id:"flexible",name:"Flexible",description:"Flexible schedule available"},{id:"weekends",name:"Weekends Only",description:"Available on weekends"},{id:"evenings",name:"Evenings Only",description:"Available in evenings"},{id:"oncall",name:"On Call",description:"Available when needed"}],Oe=["House Cleaning","Laundry","Ironing","Cooking","Meal Preparation","Kitchen Management","Childcare","Elderly Care","Pet Care","First Aid","Safety","Educational Activities","Gardening","Landscaping","Plant Care","Basic Repairs","Plumbing","Electrical","Carpentry","Painting","Security Monitoring","Access Control","Patrol","Safe Driving","Vehicle Maintenance","Route Planning","GPS Navigation","Defensive Driving","Passenger Safety","Food Service","Table Setting","Order Taking","Cash Handling","Customer Service","Bartending","Food Delivery","Sales","Inventory Management","Negotiation","Product Knowledge","Market Knowledge","Kinyarwanda","English","French","Swahili","Basic Communication","Translation"],$e=[{id:"basic",name:"Basic",description:"Can understand and speak basic phrases"},{id:"conversational",name:"Conversational",description:"Can hold basic conversations"},{id:"fluent",name:"Fluent",description:"Can speak and understand well"},{id:"native",name:"Native",description:"Native speaker level"}],ba=[{value:"no_experience",label:"No Experience (0 years)",description:"New to the workforce"},{value:"beginner",label:"Beginner (1-2 years)",description:"Some basic experience"},{value:"intermediate",label:"Intermediate (3-5 years)",description:"Moderate experience"},{value:"experienced",label:"Experienced (6-10 years)",description:"Significant experience"},{value:"expert",label:"Expert (10+ years)",description:"Extensive experience"}],H={experienceLevel:[{value:"",label:"All Experience Levels"},...ba],category:[{value:"",label:"All Categories"}],location:[{value:"",label:"All Locations"},{value:"kigali",label:"Kigali"},{value:"butare",label:"Butare"},{value:"gisenyi",label:"Gisenyi"},{value:"ruhengeri",label:"Ruhengeri"},{value:"kibuye",label:"Kibuye"},{value:"cyangugu",label:"Cyangugu"},{value:"kibungo",label:"Kibungo"},{value:"rwamagana",label:"Rwamagana"}],gender:[{value:"",label:"All Genders"},{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],approvalStatus:[{value:"",label:"All Approval Statuses"},{value:"pending",label:"Pending Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]},Fa=()=>{const{t:Q}=Ye(),{user:w,isAuthenticated:de,loading:we}=ca(),[me,X]=c.useState(!1),[r,b]=c.useState(null),[A,d]=c.useState(!1),[l,P]=c.useState(!1),[m,k]=c.useState(!1),[T,L]=c.useState(!1),[Z,O]=c.useState(!1),[C,$]=c.useState(""),[n,y]=c.useState({experienceLevel:"",category:"",location:"",gender:"",approvalStatus:""}),[I,ee]=c.useState(!1),[ae,re]=c.useState(!1),{categories:p,loading:M}=pa(),[J,S]=c.useState(""),[U,E]=c.useState(!1),[ue,h]=c.useState(""),[W,f]=c.useState(!1),{jobSeekers:R,loading:x,error:te,totalItems:xe,fetchJobSeekers:F,createJobSeeker:z,updateJobSeeker:pe,deleteJobSeeker:ge}=oa({autoFetch:!0,itemsPerPage:10}),{pendingProfiles:se,approvedProfiles:q,rejectedProfiles:he,loading:le,approveProfile:fe,rejectProfile:be,fetchProfilesByStatus:t}=ga({autoFetch:!1,itemsPerPage:10});c.useEffect(()=>{w&&w.role==="admin"&&F()},[w,F]),c.useEffect(()=>{w&&w.role==="admin"&&(async()=>{try{await Promise.all([t("pending",1),t("approved",1),t("rejected",1)])}catch(s){console.error("Error fetching approval data:",s)}})()},[w,t]),c.useEffect(()=>{if(U){const a=setTimeout(()=>{E(!1),S("")},3e3);return()=>clearTimeout(a)}},[U]),c.useEffect(()=>{if(W){const a=setTimeout(()=>{f(!1),h("")},5e3);return()=>clearTimeout(a)}},[W]);const i=a=>{$(a),re(!0),setTimeout(()=>re(!1),300)},v=(a,s)=>{y(o=>({...o,[a]:s}))},g=()=>{y({experienceLevel:"",category:"",location:"",gender:"",approvalStatus:""}),$("")},G=c.useMemo(()=>!R||R.length===0?[]:R.filter(a=>{if(C){const s=C.toLowerCase(),o=`${a.profile?.firstName||a.firstName||""} ${a.profile?.lastName||a.lastName||""}`.toLowerCase(),u=(a.email||"").toLowerCase(),j=(a.profile?.skills||a.skills||"").toLowerCase(),ve=(a.profile?.location||a.location||"").toLowerCase();if(!o.includes(s)&&!u.includes(s)&&!j.includes(s)&&!ve.includes(s))return!1}return!(n.experienceLevel&&a.profile?.experienceLevel!==n.experienceLevel||n.category&&a.profile?.jobCategory?.name_en?.toLowerCase()!==n.category.toLowerCase()||n.location&&(a.profile?.location||a.location||"").toLowerCase()!==n.location.toLowerCase()||n.gender&&a.profile?.gender!==n.gender||n.approvalStatus&&(a.profile?.approvalStatus||a.approvalStatus||"pending")!==n.approvalStatus)}),[R,C,n]),K=c.useMemo(()=>{let a=0;return C&&a++,Object.values(n).forEach(s=>{s&&a++}),a},[C,n]);c.useEffect(()=>{if(p&&p.length>0){const a=[{value:"",label:"All Categories"},...p.map(s=>({value:s.name_en.toLowerCase(),label:s.name_en}))];H.category=a}},[p]);const Ie=async()=>{try{S("Refreshing data..."),E(!0),await Promise.all([F(),t("pending",1),t("approved",1),t("rejected",1)]),S("Data refreshed successfully!"),setTimeout(()=>{E(!1)},3e3)}catch(a){h("Failed to refresh data"),f(!0),console.error("Manual refresh error:",a)}},V=a=>{switch(a){case"total":y(s=>({...s,approvalStatus:""}));break;case"pending":y(s=>({...s,approvalStatus:"pending"}));break;case"approved":y(s=>({...s,approvalStatus:"approved"}));break;case"rejected":y(s=>({...s,approvalStatus:"rejected"}));break;case"clear":g();break}},_=(a,s)=>{switch(a){case"openActions":b(s),L(!0);break;case"view":b(s),d(!0),L(!1);break;case"edit":b(s),P(!0),L(!1);break;case"approve":const o=Re(s);o?(ke(o,"approved"),L(!1)):(h("Error: Could not determine profile ID for approval"),f(!0));break;case"reject":b(s),O(!0),L(!1);break;case"delete":b(s),k(!0),L(!1);break}},Te=async(a,s=null)=>{try{const o=await z(a,s);o.success?(X(!1),S("Job seeker created successfully!"),E(!0)):(h(`Error: ${o.error}`),f(!0))}catch(o){h("Failed to create job seeker"),f(!0),console.error("Create job seeker error:",o)}},Je=async(a,s=null)=>{if(r)try{const o=await pe(r.id,a,s);o.success?(P(!1),b(null),S("Job seeker updated successfully!"),E(!0)):(h(`Error: ${o.error}`),f(!0))}catch(o){h("Failed to update job seeker"),f(!0),console.error("Update job seeker error:",o)}},Ue=async()=>{if(r)try{const a=await ge(r.id);a.success?(k(!1),b(null),S("Job seeker deleted successfully!"),E(!0)):(h(`Error: ${a.error}`),f(!0))}catch(a){h("Failed to delete job seeker"),f(!0),console.error("Delete job seeker error:",a)}},ke=async(a,s,o=null)=>{try{if(!xa(a)){const j=`Invalid profile ID provided: ${a}`;h(j),f(!0),console.error("❌ handleApprovalChange validation error:",j);return}let u;if(s==="approved")u=await fe(a);else if(s==="rejected"){if(!o){h("Rejection reason is required"),f(!0);return}u=await be(a,o)}if(u&&u.success){S(u.message||`Profile ${s} successfully - refreshing data...`),E(!0);try{await F(),await t("pending",1),await t("approved",1),await t("rejected",1),S(u.message||`Profile ${s} successfully - data refreshed!`),b(null)}catch(j){console.error("❌ Error refreshing data after approval change:",j),h("Action completed but failed to refresh data. Please refresh the page manually."),f(!0)}}else u&&(h(u.error||`Failed to ${s} profile`),f(!0))}catch(u){const j=`Failed to ${s} profile: ${u.message}`;h(j),f(!0),console.error("❌ Approval change error:",u)}},Ge=a=>[{key:"openActions",title:"Actions",icon:ea,className:"text-gray-600 hover:bg-gray-50"}];if(we)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ee,{size:"lg",text:"Checking authentication..."})});if(!de)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700",children:"You must be logged in to access this page."})]}),e.jsx(N,{onClick:()=>window.location.href="/login",className:"mt-2",variant:"outline",size:"sm",children:"Go to Login"})]});if(w?.role!=="admin")return e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-yellow-700",children:"You must be an admin to access this page."})]}),e.jsx(N,{onClick:()=>window.location.href="/dashboard/jobseeker",className:"mt-2",variant:"outline",size:"sm",children:"Go to Job Seeker Dashboard"})]});const Ke=[{key:"name",label:"joobseekr details",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.firstName||a.firstName||"Unknown",o=a.profile?.lastName||a.lastName||"",u=a.email||"No email",j=a.profile?.contactNumber||a.contactNumber||"No phone",ve=a.profile?.gender||a.gender||"Not specified",_e=a.profile?.photo||a.photo||null,Ce=(B=>B?/^https?:\/\//i.test(B)?B:`${ce.BASE_URL}/${B.replace(/^\//,"")}`:null)(_e),He=(B,We)=>{const ie=(B||"").trim(),ne=(We||"").trim(),ze=ie?ie.charAt(0).toUpperCase():"",qe=ne?ne.charAt(0).toUpperCase():"";return`${ze}${qe}`||(ie||ne?(ie||ne).charAt(0).toUpperCase():"")};return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:Ce?e.jsx("img",{src:Ce,alt:`${s} ${o}`,className:"w-full h-full object-cover",onError:B=>{B.currentTarget.src=je}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-300 text-sm font-semibold text-white",children:He(s,o)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s," ",o]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[j," ",e.jsxs(e.Fragment,{children:["• ",ve]})]}),e.jsx("div",{className:"text-lg text-gray-400",children:u})]})]})}},{key:"location",label:"Location",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.location||a.location||"Not specified";return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(sa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s})]})}},{key:"skills",label:"Skills",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.skills||a.skills||"",o=Array.isArray(s)?s:s.split(",").map(u=>u.trim()).filter(u=>u);return e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.slice(0,3).map((u,j)=>e.jsx(Ne,{variant:"secondary",size:"sm",children:u},j)),o.length>3&&e.jsxs(Ne,{variant:"outline",size:"sm",children:["+",o.length-3," more"]})]})}},{key:"education",label:"Education",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.educationLevel||"Not specified",o=a.profile?.availability||"Not specified";return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(la,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:s})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Se,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:o})]})]})}},{key:"experience",label:"Experience",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.experienceLevel||"Not specified",o=u=>{switch(u){case"no_experience":return"No Experience";case"beginner":return"Beginner (1-2 years)";case"intermediate":return"Intermediate (3-5 years)";case"experienced":return"Experienced (6-10 years)";case"expert":return"Expert (10+ years)";default:return u}};return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ia,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:o(s)})]})}},{key:"createdAt",label:"Registered",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.createdAt;return e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(na,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:s?new Date(s).toLocaleDateString():"Invalid Date"})]})}},{key:"approvalStatus",label:"Approval Status",render:a=>{if(!a)return e.jsx("div",{className:"text-gray-500",children:"No data"});const s=a.profile?.approvalStatus||a.approvalStatus||"pending";return e.jsx(ha,{status:s,size:"sm"})}}];return x&&R.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ee,{size:"lg",text:"Loading job seekers..."})}):te?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-red-700",children:["Error: ",te]})]}),e.jsx(N,{onClick:F,className:"mt-2",variant:"outline",size:"sm",children:"Retry"})]}):(R.length>0,e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center",children:(function(){const a=r?.profile?.photo||r?.photo||null,s=a&&(/^https?:\/\//i.test(a)?a:`${ce.BASE_URL}/${a.replace(/^\//,"")}`);if(s)return e.jsx("img",{src:s,alt:`${r?.profile?.firstName||""} ${r?.profile?.lastName||""}`,className:"w-full h-full object-cover",onError:u=>{u.currentTarget.src=je}});const o=((r?.profile?.firstName||r?.firstName||"").charAt(0)||"")+((r?.profile?.lastName||r?.lastName||"").charAt(0)||"");return e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-400 text-2xl font-semibold text-white",children:o.toUpperCase()||"U"})})()}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[r?.profile?.firstName||r?.firstName||"Unknown"," ",r?.profile?.lastName||r?.lastName||""]}),e.jsx("p",{className:"text-sm text-gray-500",children:r?.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Job Seekers Management"}),e.jsxs("p",{className:"text-gray-600",children:["Manage all registered job seekers (",xe," total)"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{onClick:Ie,variant:"outline",disabled:x||le,className:"flex items-center gap-2",children:[e.jsx(Qe,{className:`w-4 h-4 ${x||le?"animate-spin":""}`}),"Refresh"]}),e.jsxs(N,{onClick:()=>X(!0),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Add Job Seeker"]})]})]}),U&&e.jsx(Me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-green-700",children:J})]})}),W&&e.jsx(Me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700",children:ue})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs(D,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus?"hover:border-blue-300":"border-blue-400 bg-blue-50 shadow-lg"}`,onClick:()=>V("total"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Job Seekers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:R.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus?`${G.length} currently showing`:"All profiles visible"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ze,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-blue-600 font-medium",children:n.approvalStatus?"Click to show all profiles":"✓ Showing all profiles"})]}),e.jsxs(D,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="pending"?"border-yellow-400 bg-yellow-50":"hover:border-yellow-300"}`,onClick:()=>V("pending"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:se.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="pending"?`${G.length} currently showing`:"Click to filter pending profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-yellow-600 font-medium",children:n.approvalStatus==="pending"?"✓ Active filter":"Click to filter pending"})]}),e.jsxs(D,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="approved"?"border-green-400 bg-green-50":"hover:border-green-300"}`,onClick:()=>V("approved"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="approved"?`${G.length} currently showing`:"Click to filter approved profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ye,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-green-600 font-medium",children:n.approvalStatus==="approved"?"✓ Active filter":"Click to filter approved"})]}),e.jsxs(D,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${n.approvalStatus==="rejected"?"border-red-400 bg-red-50":"hover:border-red-300"}`,onClick:()=>V("rejected"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:he.length}),e.jsx("p",{className:"text-xs text-gray-500",children:n.approvalStatus==="rejected"?`${G.length} currently showing`:"Click to filter rejected profiles"})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Le,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-red-600 font-medium",children:n.approvalStatus==="rejected"?"✓ Active filter":"Click to filter rejected"})]}),e.jsxs(D,{className:`p-6 cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border-2 ${K>0?"border-purple-400 bg-purple-50":"hover:border-purple-300"}`,onClick:()=>V("clear"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Filters"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})})]}),e.jsx("div",{className:"mt-2 text-xs text-purple-600 font-medium",children:K>0?"Click to clear all filters":"No active filters"})]})]}),e.jsx(D,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, skills, or location...",value:C,onChange:a=>i(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),ae&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),e.jsxs(N,{onClick:()=>ee(!I),variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Filters ",K>0&&`(${K})`]}),K>0&&e.jsx(N,{onClick:g,variant:"outline",className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),I&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience Level"}),e.jsx("select",{value:n.experienceLevel,onChange:a=>v("experienceLevel",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:H.experienceLevel.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:n.category,onChange:a=>v("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:M,children:M?e.jsx("option",{children:"Loading categories..."}):H.category.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("select",{value:n.location,onChange:a=>v("location",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:H.location.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),e.jsx("select",{value:n.gender,onChange:a=>v("gender",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:H.gender.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approval Status"}),e.jsx("select",{value:n.approvalStatus,onChange:a=>v("approvalStatus",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:H.approvalStatus.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]})]})}),G.length===0&&(C||Object.values(n).some(a=>a))&&e.jsxs(D,{className:"p-8 text-center",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or filters to find more job seekers."}),e.jsx(N,{onClick:g,variant:"outline",children:"Clear All Filters"})]}),e.jsx(D,{children:e.jsx(fa,{data:G,columns:Ke,loading:x,emptyMessage:"No job seekers found",actionButtons:Ge,onRowAction:_,pagination:!0,itemsPerPage:15,searchTerm:C,onSearchChange:i,showSearch:!1})}),me&&e.jsx(e.Fragment,{children:e.jsx(Fe,{isOpen:me,onClose:()=>X(!1),onSubmit:Te,educationLevels:Be,availabilityOptions:De,skillsData:Oe,languageLevels:$e,jobCategories:p,isEdit:!1})}),l&&r&&e.jsx(e.Fragment,{children:(()=>{const a={firstName:r.profile?.firstName||r.firstName||"",lastName:r.profile?.lastName||r.lastName||"",email:r.email||"",contactNumber:r.profile?.contactNumber||r.contactNumber||"",description:r.profile?.description||r.description||"",skills:r.profile?.skills||r.skills||"",gender:r.profile?.gender||r.gender||"",dateOfBirth:r.profile?.dateOfBirth?new Date(r.profile.dateOfBirth).toISOString().split("T")[0]:"",idNumber:r.profile?.idNumber||"",maritalStatus:r.profile?.maritalStatus||"",location:r.profile?.location||r.location||"",city:r.profile?.city||"",country:r.profile?.country||"Rwanda",references:r.profile?.references||"",experience:r.profile?.experience||r.experience||"",experienceLevel:r.profile?.experienceLevel||"",monthlyRate:r.profile?.monthlyRate?r.profile.monthlyRate.toString():"",jobCategoryId:r.profile?.jobCategoryId?r.profile.jobCategoryId.toString():"",jobCategoryName:r.profile?.jobCategory?.name_en||"",educationLevel:r.profile?.educationLevel||"",availability:r.profile?.availability||"",languages:r.profile?.languages||"",certifications:r.profile?.certifications||"",photo:(()=>{const s=r?.profile?.photo||r?.photo||null;return s?/^https?:\/\//i.test(s)?s:`${ce.BASE_URL}/${s.replace(/^\//,"")}`:null})()};return e.jsx(Fe,{isOpen:l,onClose:()=>P(!1),onSubmit:Je,educationLevels:Be,availabilityOptions:De,skillsData:Oe,languageLevels:$e,jobCategories:p,initialData:a,isEdit:!0})})()}),A&&r&&e.jsx(Y,{isOpen:A,onClose:()=>d(!1),title:"Job Seeker Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsxs("p",{className:"mt-1 text-gray-900",children:[r.profile?.firstName||r.firstName||"Unknown"," "," ",r.profile?.lastName||r.lastName||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.contactNumber||r.contactNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.location||r.location||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.gender||r.gender||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Registered"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"Not available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Photo"}),e.jsx("div",{className:"mt-2",children:(function(){const a=r?.profile?.photo||r?.photo||null,s=a?/^https?:\/\//i.test(a)?a:`${ce.BASE_URL}/${a.replace(/^\//,"")}`:je;return e.jsx(da,{src:s,alt:`${r?.profile?.firstName||""} ${r?.profile?.lastName||""}`,size:"xl",variant:"rounded",isPrivate:!1})})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r.profile?.skills||r.skills||"").split(",").map((a,s)=>a.trim()).filter(a=>a).map((a,s)=>e.jsx(Ne,{variant:"secondary",children:a},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.description||r.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Experience Level"}),e.jsx("p",{className:"mt-1 text-gray-900",children:(()=>{switch(r.profile?.experienceLevel){case"no_experience":return"No Experience (0 years)";case"beginner":return"Beginner (1-2 years)";case"intermediate":return"Intermediate (3-5 years)";case"experienced":return"Experienced (6-10 years)";case"expert":return"Expert (10+ years)";default:return"Not specified"}})()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Experience Details"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.experience||r.experience||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.city||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.country||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Job Category"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.jobCategory?.name_en||r.profile?.jobCategoryId||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Monthly Rate"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.monthlyRate?`${r.profile.monthlyRate} frw`:"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Education Level"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.educationLevel||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Availability"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.availability||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marital Status"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.maritalStatus||"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Languages"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.languages||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Certifications"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile?.certifications||"Not specified"})]})]}),r.profile?.references&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"References"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile.references})]}),r.profile?.idNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ID Number"}),e.jsx("p",{className:"mt-1 text-gray-900",children:r.profile.idNumber})]}),r.profile?.dateOfBirth&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("p",{className:"mt-1 text-gray-900",children:new Date(r.profile.dateOfBirth).toLocaleDateString()})]})]})}),T&&r&&e.jsx(Y,{isOpen:T,onClose:()=>L(!1),title:`Actions for ${r.profile?.firstName||r.firstName||"Unknown"} ${r.profile?.lastName||r.lastName||""}`,maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>_("view",r),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-blue-50 transition-colors duration-200",children:[e.jsx(aa,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-gray-900",children:"View Details"})]}),e.jsxs("button",{onClick:()=>_("edit",r),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-green-50 transition-colors duration-200",children:[e.jsx(ra,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-900",children:"Edit Job Seeker"})]}),r&&ma(r)&&e.jsxs("button",{onClick:()=>_("approve",r),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-green-50 transition-colors duration-200",children:[e.jsx(ye,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-900",children:"Approve Profile"})]}),r&&ua(r)&&e.jsxs("button",{onClick:()=>_("reject",r),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-red-50 transition-colors duration-200",children:[e.jsx(Le,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-gray-500",children:"Reject Profile"})]}),e.jsxs("button",{onClick:()=>_("delete",r),className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg hover:bg-red-50 transition-colors duration-200",children:[e.jsx(ta,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-gray-900",children:"Delete Job Seeker"})]})]})}),Z&&r&&e.jsx(Y,{isOpen:Z,onClose:()=>O(!1),title:`Reject Profile - ${r.profile?.firstName||r.firstName||"Unknown"} ${r.profile?.lastName||r.lastName||""}`,maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Please provide a reason for rejecting this profile. This will help the job seeker understand why their profile was not approved."}),e.jsx("textarea",{placeholder:"Enter rejection reason (minimum 10 characters)...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none",rows:4,minLength:10,maxLength:500,id:"rejectionReason"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(N,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(N,{variant:"danger",onClick:()=>{const a=document.getElementById("rejectionReason").value.trim();if(a.length>=10){const s=Re(r);s?(ke(s,"rejected",a),O(!1)):alert("Error: Could not determine profile ID. Please try again.")}else alert("Please provide a rejection reason (minimum 10 characters)")},children:"Reject Profile"})]})]})}),m&&r&&e.jsx(Y,{isOpen:m,onClose:()=>k(!1),title:"Delete Job Seeker",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to delete"," ",r.profile?.firstName||r.firstName||"Unknown"," "," ",r.profile?.lastName||r.lastName||"","? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(N,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(N,{variant:"danger",onClick:Ue,children:"Delete"})]})]})})]}))};export{Fa as default};
