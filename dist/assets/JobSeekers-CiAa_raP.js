import{r as t,j as e}from"./vendor-react-BG_lTMXN.js";import{L as W,B as g,H as X,C as Y,P as ee,m as V,F as se}from"./index-CrLUAZuT.js";import{u as re}from"./useJobSeekers-BIVK7Etj.js";import{u as le}from"./useCategories-D_XDxjVw.js";import{j as R}from"./jobseekerBackground-BLVGbC9a.js";import{ae,ac as D,aF as k,aG as H,aH as te,aI as B,au as T,av as ie}from"./vendor-common-4_u_l0HW.js";import{a as ne}from"./vendor-router-SHHli2PS.js";import{m as O}from"./vendor-motion-BQP9zw4B.js";import"./vendor-gsap-B4nt0ofr.js";import"./categoryService-Dqg645_X.js";const oe=(a,i=500)=>{const[b,o]=t.useState(a);return t.useEffect(()=>{const c=setTimeout(()=>{o(a)},i);return()=>{clearTimeout(c)}},[a,i]),b},m={experienceLevel:[{value:"",label:"All Experience Levels"},{value:"no_experience",label:"No Experience (0 years)"},{value:"beginner",label:"Beginner (1-2 years)"},{value:"intermediate",label:"Intermediate (3-5 years)"},{value:"experienced",label:"Experienced (6-10 years)"},{value:"expert",label:"Expert (10+ years)"}],category:[{value:"",label:"All Categories"}],location:[{value:"",label:"All Locations"},{value:"kigali",label:"Kigali"},{value:"butare",label:"Butare"},{value:"gisenyi",label:"Gisenyi"},{value:"ruhengeri",label:"Ruhengeri"},{value:"kibuye",label:"Kibuye"},{value:"cyangugu",label:"Cyangugu"},{value:"kibungo",label:"Kibungo"},{value:"rwamagana",label:"Rwamagana"}],gender:[{value:"",label:"All Genders"},{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],sortBy:["Most Recent","Highest Rated","Most Experienced","Name A-Z","Lowest Rate","Highest Rate"]},je=()=>{const{t:a}=ae(),[i,b]=t.useState([]),[o,c]=t.useState([]),[x,M]=t.useState(""),[h,P]=t.useState(""),[p,F]=t.useState(""),[f,z]=t.useState(""),[j,_]=t.useState(""),[v,G]=t.useState("Most Recent"),[L,U]=t.useState("grid"),[$,K]=t.useState(!1),Z=ne(),{categories:C,loading:J,error:S}=le();oe(x,300),t.useEffect(()=>{if(C&&C.length>0){const s=[{value:"",label:"All Categories"},...C.map(r=>({value:r.name_en.toLowerCase(),label:r.name_en}))];m.category=s}else S&&(m.category=[{value:"",label:"All Categories"}],F(""))},[C,S]);const u=()=>{let s=0;return x&&s++,h&&s++,p&&s++,f&&s++,j&&s++,s},{jobSeekers:d,loading:I,error:E}=re({autoFetch:!0,itemsPerPage:50});t.useEffect(()=>{d&&d.length>0?(b(d),c(d)):E?(b([]),c([])):(!d||d.length===0)&&(b([]),c([]))},[d,E]),t.useEffect(()=>{if(!i||i.length===0){c([]);return}let s=i.filter(r=>{if(x){const l=x.toLowerCase(),n=r.firstName||r.profile?.firstName||r.user?.firstName||"",N=r.lastName||r.profile?.lastName||r.user?.lastName||"",y=`${n} ${N}`.toLowerCase(),w=(r.skills||r.profile?.skills||r.user?.skills||"").toLowerCase(),Q=(r.location||r.profile?.location||r.city||"").toLowerCase();if(!y.includes(l)&&!w.includes(l)&&!Q.includes(l))return!1}return!(f&&(r.experienceLevel||r.profile?.experienceLevel||r.user?.experienceLevel)!==f||p&&(r.jobCategory?.name_en||r.profile?.jobCategory?.name_en||r.user?.jobCategory?.name_en||r.category)?.toLowerCase()!==p.toLowerCase()||h&&(r.location||r.profile?.location||r.city||"").toLowerCase()!==h.toLowerCase()||j&&(r.gender||r.profile?.gender||r.user?.gender)!==j)});v==="Most Recent"?s.sort((r,l)=>new Date(l.createdAt||0)-new Date(r.createdAt||0)):v==="Name A-Z"?s.sort((r,l)=>{const n=r.firstName||r.profile?.firstName||r.user?.firstName||"",N=r.lastName||r.profile?.lastName||r.user?.lastName||"",y=l.firstName||l.profile?.firstName||l.user?.firstName||"",w=l.lastName||l.profile?.lastName||l.user?.lastName||"";return(n+" "+N).localeCompare(y+" "+w)}):v==="Most Experienced"&&s.sort((r,l)=>{const n=w=>{switch(w){case"expert":return 5;case"experienced":return 4;case"intermediate":return 3;case"beginner":return 2;case"no_experience":return 1;default:return 0}},N=r.experienceLevel||r.profile?.experienceLevel||r.user?.experienceLevel,y=l.experienceLevel||l.profile?.experienceLevel||l.user?.experienceLevel;return n(y)-n(N)}),c(s)},[i,x,f,p,h,j,v]);const A=()=>{M(""),P(""),F(""),z(""),_(""),G("Most Recent")},q=s=>{Z(`/view-profile/${s.id}`)};return I?e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${R})`}}),e.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{}),e.jsx("p",{className:"text-white/80",children:"Loading job seekers..."})]})})]}):E?e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${R})`}}),e.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(D,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:"Error Loading Job Seekers"})]}),e.jsx("p",{className:"text-red-600 mb-4",children:E}),e.jsx(g,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]})})})]}):e.jsxs("div",{className:"min-h-screen relative",children:[e.jsx("div",{className:"fixed inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${R})`}}),e.jsx(X,{}),e.jsx("div",{className:"relative z-10 mt-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:a("jobSeekers.pageTitle","All Job Seekers")}),e.jsx("p",{className:"text-xl text-white/70 max-w-3xl mx-auto",children:a("jobSeekers.pageSubtitle","Discover reliable workers for domestic, care, maintenance, and other essential services")})]})})}),e.jsxs("main",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:a("jobSeekers.searchPlaceholder","Search by name, title, or skills..."),value:x,onChange:s=>M(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200 text-gray-900 placeholder-gray-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>K(!$),className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Filters ",u()>0&&`(${u()})`]}),e.jsxs(g,{variant:"outline",onClick:()=>U(L==="grid"?"list":"grid"),className:"flex items-center gap-2",children:[L==="grid"?e.jsx(te,{className:"w-4 h-4"}):e.jsx(B,{className:"w-4 h-4"}),L==="grid"?"List":"Grid"]}),u()>0&&e.jsxs(g,{variant:"outline",onClick:A,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(T,{className:"w-4 h-4"}),"Clear All"]})]})]}),$&&e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("jobSeekers.filters.experienceLevel","Experience Level")}),e.jsx("select",{value:f,onChange:s=>z(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900",children:m.experienceLevel.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("jobSeekers.filters.category","Category")}),e.jsx("select",{value:p,onChange:s=>F(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900",disabled:J,children:J?e.jsx("option",{children:"Loading categories..."}):S?e.jsx("option",{children:"Error loading categories"}):m.category.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("jobSeekers.filters.location","Location")}),e.jsx("select",{value:h,onChange:s=>P(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900",children:m.location.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("jobSeekers.filters.gender","Gender")}),e.jsx("select",{value:j,onChange:s=>_(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900",children:m.gender.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:a("jobSeekers.filters.sortBy","Sort By")}),e.jsx("select",{value:v,onChange:s=>G(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900",children:m.sortBy.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})})]}),S&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700 font-medium",children:"Unable to load job categories"})]}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"There was an error loading job categories. Category filtering is temporarily unavailable."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(B,{className:"w-6 h-6 text-blue-600"})}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Job Seekers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{className:"w-6 h-6 text-green-600"})}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Search Results"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-3",children:e.jsx(H,{className:"w-6 h-6 text-purple-600"})}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Filters"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u()})]})]}),o.length===0&&u()>0&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-8 mb-8 text-center",children:[e.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or filters to find more job seekers."}),e.jsx(g,{onClick:A,variant:"outline",children:"Clear All Filters"})]}),o.length===0&&u()===0&&i.length===0&&!I&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border border-white/20 p-8 mb-8 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No job seekers available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"There are currently no job seekers registered in the system."})]}),o.length>0?e.jsx("div",{className:L==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",children:o.map((s,r)=>e.jsx("div",{children:e.jsx(Y,{className:"h-[380px] bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-gray-200 overflow-hidden group",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-4",children:e.jsx(ee,{size:"lg",variant:"rounded",showBorder:!0,borderColor:"border-blue-200",showShadow:!0})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-1 group-hover:text-blue-600 transition-colors",children:[V(s.firstName||s.profile?.firstName||s.user?.firstName||"Unknown")," ",V(s.lastName||s.profile?.lastName||s.user?.lastName||"")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-xs font-semibold rounded-full",children:s.jobCategory?.name_en||s.profile?.jobCategory?.name_en||s.user?.jobCategory?.name_en||s.category||"No Category"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})]})]}),e.jsxs("button",{onClick:()=>q(s),className:"px-3 py-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium",children:[e.jsx(T,{className:"w-4 h-4"}),"View Profile"]})]})}),e.jsxs("div",{className:"px-6 flex-1 space-y-4",children:[(s.location||s.profile?.location||s.city)&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-lg",children:[e.jsx(ie,{className:"w-4 h-4 mr-2 text-blue-500"}),e.jsxs("span",{className:"font-medium",children:[s.location||s.profile?.location||s.city,s.city&&s.city!==(s.location||s.profile?.location)&&`, ${s.city}`]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-100",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wide mb-1 block",children:"Experience Level *"}),e.jsx("p",{className:"text-sm text-gray-700 font-medium",children:(console.log("Seeker data:",s),console.log("Experience Level:",s.experienceLevel),console.log("Profile Experience Level:",s.profile?.experienceLevel),console.log("User Experience Level:",s.user?.experienceLevel),s.experienceLevel||s.profile?.experienceLevel||s.user?.experienceLevel||"Not specified")})]}),(s.skills||s.profile?.skills||s.user?.skills)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(s.skills||s.profile?.skills||s.user?.skills||"").split(",").slice(0,4).map((l,n)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-md",children:l.trim()},n)),(s.skills||s.profile?.skills||s.user?.skills||"").split(",").length>4&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-md",children:["+",(s.skills||s.profile?.skills||s.user?.skills||"").split(",").length-4," more"]})]})]})]})]})})},s.id))}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"w-8 h-8 text-white/60"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:a("jobSeekers.noResults.title","No job seekers found")}),e.jsx("p",{className:"text-white/70 mb-4",children:a("jobSeekers.noResults.message","Try adjusting your search criteria or filters")}),e.jsxs(g,{variant:"outline",onClick:A,className:"flex items-center gap-2 mx-auto",children:[e.jsx(T,{className:"w-4 h-4"}),a("jobSeekers.noResults.clearFilters","Clear All Filters")]})]})})]}),e.jsx("div",{className:"relative z-10",children:e.jsx(se,{})})]})};export{je as default};
