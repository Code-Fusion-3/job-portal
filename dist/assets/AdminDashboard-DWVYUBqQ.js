import{j as e,g as Me,P as Ge,e as ye,a as De,C as ke,_ as Le,S as ds,r as i,f as We,$ as bs,J as ms,O as xs,x as Se,a5 as ys,a6 as js,a7 as Ns,s as Re,V as we,U as Ie,a8 as ts,d as vs,a9 as ws,X as de,M as Cs,aa as L,ab as as,ac as ks,ad as Ss,I as Ps,a0 as $e,ae as As,H as Q,af as Es,ag as Ms,ah as Ds,ai as he,aj as pe,c as Ve,ak as Ls,al as Rs,am as Ye,a2 as $s,q as Fs,an as Oe,ao as ie,ap as Ts,Z as zs,v as Us,aq as us,E as Ue,p as Is,ar as fe,as as He,at as _s,a3 as be,au as qs,av as Bs,aw as Ee,ax as Js,F as Os,h as Hs,T as Gs,k as Ws,D as rs,y as Vs,z as Ys,b as Xs}from"./vendor-react-HyG-4ult.js";import{B as C,d as ls,L as oe,C as V,u as gs,A as ne,e as Qs}from"./index-wG_3VDbk.js";import{a as je,R as Zs}from"./ReportsPage-Cl73hdh_.js";import{a as hs}from"./useJobSeekers-DzwAbDHb.js";import{g as ns,N as Te,u as ps,E as Ks,S as ze,a as et,b as st,c as tt,h as at}from"./EmployerRequestsPage-t8uTha4w.js";import{a as rt,b as lt}from"./useCategories-CEMBLaj6.js";import{m as Ne}from"./vendor-motion-t1viSSsG.js";import{B as z}from"./Badge-CcjDYO0u.js";import{A as is}from"./Avatar-Q1Avxq2U.js";import{M as Ce}from"./Modal-DWzFJ5g3.js";import nt from"./JobSeekersPage-DKXT8i_Z.js";import{D as fs}from"./DataTable-BqJsQkYC.js";import{c as ve}from"./contactService-VGGcI9kV.js";import it from"./JobCategoriesPage-4Sxs71Qw.js";import{a as os}from"./adminProfileService-ZVn5UEvr.js";import"./vendor-common-BZD0eUgH.js";import"./vendor-gsap-lnFyu4_T.js";import"./messagingService-CJG5b0WI.js";import"./endpoints-CXiMw_A_.js";import"./categoryService-DyeA3ynf.js";import"./useApprovalManagement-DEwuodQl.js";import"./StatusBadge-EQAW-FG_.js";const ot=({isConnected:s,lastUpdate:o,onRefresh:p,showLastUpdate:n=!0,className:h=""})=>e.jsx("div",{className:`flex items-center space-x-2 text-sm ${h}`,children:e.jsx("div",{className:"flex items-center space-x-1",children:e.jsx(Ne.div,{animate:{scale:s?[1,1.2,1]:1,opacity:s?1:.5},transition:{duration:2,repeat:s?1/0:0,ease:"easeInOut"}})})}),ct=({request:s,onContactEmployer:o,onViewDetails:p,getStatusColor:n,getPriorityColor:h,compact:N=!1})=>{if(!s)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No request data available"});const S=s.name||s.employerName||"Unknown Employer",g=s.companyName||"Unknown Company",x=s.status||"pending",y=s.priority||"normal",A=s.message||"No message provided",E=s.email||"",v=s.phoneNumber||"",M=s.createdAt||new Date().toISOString(),c=s.selectedUser||s.hasSelectedCandidate,P=s.requestedCandidate,m=s.selectedUser;let k="No candidate selected",$=null;return c&&m?.profile?(k=`${m.profile.firstName} ${m.profile.lastName}`,$=m):P?.profile&&(k=`${P.profile.firstName} ${P.profile.lastName}`,$=P),N?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:S}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:g})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{variant:"outline",size:"xs",className:n?n(x):"bg-gray-100 text-gray-800",children:ns(x)}),e.jsx(z,{variant:"outline",size:"xs",className:h?h(y):"bg-gray-100 text-gray-800",children:y})]})]}),e.jsxs("div",{className:"mt-2",children:[c?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"✓ Selected:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:k})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 text-xs font-medium",children:"⏳ Requesting:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:k})]}),$?.profile?.skills&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Skills: "}),e.jsx("span",{className:"text-xs text-gray-700",children:$.profile.skills})]})]})]}):e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:S}),e.jsx("p",{className:"text-sm text-gray-600",children:g})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{variant:"outline",size:"sm",className:n?n(x):"bg-gray-100 text-gray-800",children:ns(x)}),e.jsx(z,{variant:"outline",size:"sm",className:h?h(y):"bg-gray-100 text-gray-800",children:y})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[E&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:E})]}),v&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{children:v})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Candidate Information"}),c?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 text-sm font-medium",children:"✓ Selected Candidate:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:k})]}),$?.profile?.skills&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Skills: "}),e.jsx("span",{className:"text-sm text-gray-700",children:$.profile.skills})]}),$?.profile?.experience&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Experience: "}),e.jsx("span",{className:"text-sm text-gray-700",children:$.profile.experience})]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No candidate selected yet"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(M).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[o&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>o(s),children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Contact"]}),p&&e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>p(s),children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]})},dt=({jobSeeker:s,onViewDetails:o,getCategoryColor:p,compact:n=!1})=>{if(!s)return e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No job seeker data available"});const N=(p||(S=>{const g={JavaScript:"bg-yellow-100 text-yellow-800",React:"bg-blue-100 text-blue-800","Node.js":"bg-green-100 text-green-800",Python:"bg-blue-100 text-blue-800",Django:"bg-green-100 text-green-800",PostgreSQL:"bg-blue-100 text-blue-800",AWS:"bg-orange-100 text-orange-800",Docker:"bg-blue-100 text-blue-800",Git:"bg-red-100 text-red-800",Java:"bg-orange-100 text-orange-800",Cooking:"bg-red-100 text-red-800",Housekeeping:"bg-purple-100 text-purple-800",Childcare:"bg-pink-100 text-pink-800",Gardening:"bg-emerald-100 text-emerald-800",Cleaning:"bg-gray-100 text-gray-800",Driving:"bg-indigo-100 text-indigo-800",Teaching:"bg-yellow-100 text-yellow-800",Nursing:"bg-rose-100 text-rose-800",Construction:"bg-amber-100 text-amber-800",Agriculture:"bg-lime-100 text-lime-800",Technology:"bg-blue-100 text-blue-800",Healthcare:"bg-green-100 text-green-800",Education:"bg-purple-100 text-purple-800",Manufacturing:"bg-red-100 text-red-800",Services:"bg-gray-100 text-gray-800",General:"bg-gray-100 text-gray-800","Job Seeker":"bg-gray-100 text-gray-800",default:"bg-gray-100 text-gray-800"};return g[S]||g.default}))(s?.category||"General");return n?e.jsxs("div",{className:"flex items-center space-x-3 p-2 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(is,{src:s?.avatar,alt:s?.name||"Job Seeker",size:"sm",fallback:s?.name||"JS",fallbackSrc:ls}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm truncate",children:s?.name||"Unknown"}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:s?.title||"Job Seeker"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(z,{variant:"outline",size:"xs",className:N,children:s?.category||"General"}),e.jsx("span",{className:"text-xs text-gray-500",children:s?.location||"Unknown"})]}),s?.approvalStatus&&e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${s.approvalStatus==="approved"?"bg-green-100 text-green-700 border border-green-200":s.approvalStatus==="rejected"?"bg-red-100 text-red-700 border border-red-200":"bg-yellow-100 text-yellow-700 border border-yellow-200"}`,children:[s.approvalStatus==="approved"?e.jsx(De,{className:"w-3 h-3"}):s.approvalStatus==="rejected"?e.jsx(ke,{className:"w-3 h-3"}):e.jsx(Le,{className:"w-3 h-3"}),s.approvalStatus==="approved"?"Verified":s.approvalStatus==="rejected"?"Rejected":"Pending"]})}),s?.category&&s.category.includes(",")&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.category.split(",").slice(0,3).map((S,g)=>e.jsx("span",{className:"inline-block px-1 py-0.5 text-xs bg-blue-100 text-blue-800 rounded",children:S.trim()},g)),s.category.split(",").length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.category.split(",").length-3," more"]})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(is,{src:s?.avatar,alt:s?.name||"Job Seeker",size:"md",fallback:s?.name||"JS",fallbackSrc:ls}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:s?.name||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:s?.title||"Job Seeker"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s?.location||"Unknown"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s?.experience||"0"," years"]}),e.jsx(z,{variant:"outline",size:"sm",className:N,children:s?.category||"General"})]}),s?.approvalStatus&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${s.approvalStatus==="approved"?"bg-green-100 text-green-700 border border-green-200":s.approvalStatus==="rejected"?"bg-red-100 text-red-700 border border-red-200":"bg-yellow-100 text-yellow-700 border border-yellow-200"}`,children:[s.approvalStatus==="approved"?e.jsx(De,{className:"w-3.5 h-3.5"}):s.approvalStatus==="rejected"?e.jsx(ke,{className:"w-3.5 h-3.5"}):e.jsx(Le,{className:"w-3.5 h-3.5"}),s.approvalStatus==="approved"?"Verified Profile":s.approvalStatus==="rejected"?"Profile Rejected":"Under Review"]})}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:["Daily: ",s?.dailyRate?.toLocaleString()||"0"," frw"]}),e.jsxs("span",{children:["Monthly: ",s?.monthlyRate?.toLocaleString()||"0"," frw"]})]})]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>o?.(s),title:"View Details",children:e.jsx(ye,{className:"w-4 h-4"})})]})},mt=({logo:s="J",title:o="Admin Panel",subtitle:p="Job Portal Management"})=>e.jsx("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 bg-slate-50/60",children:e.jsxs("div",{className:"flex items-center space-x-2.5",children:[e.jsx("div",{className:"w-9 h-9 bg-red-600 rounded-lg flex items-center justify-center shadow-sm",children:e.jsx("span",{className:"text-white font-bold text-base",children:s})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-slate-800 text-base",children:o}),e.jsx("span",{className:"text-xs text-slate-500",children:p})]})]})}),xt=({searchValue:s="",onSearchChange:o,placeholder:p="Search..."})=>e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:p,value:s,onChange:n=>o?.(n.target.value),className:"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-md text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200"})]})}),ut=({item:s,isActive:o,onClick:p})=>{const[n,h]=i.useState(!1),S={Home:ts,Users:Ie,MessageSquare:we,Briefcase:Re,BarChart3:Ns,Settings:js,TestTube:ys,User:Se,FileText:xs,Calendar:ms,Star:bs,MapPin:We,Mail:Me,Phone:Ge}[s.icon]||ts,g=()=>{s.subItems?h(!n):p(s.id)},x=y=>{p(y)};return e.jsxs("li",{children:[e.jsxs("button",{onClick:g,className:`
          relative w-full flex items-center space-x-2.5 px-3 py-2.5 rounded-md text-left transition-all duration-200 group
          ${o?"bg-red-50 text-red-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}
        `,children:[e.jsx("div",{className:"flex items-center justify-center min-w-[24px]",children:e.jsx(S,{className:`
              h-4.5 w-4.5 flex-shrink-0
              ${o?"text-red-600":"text-slate-500 group-hover:text-slate-700"}
            `})}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:`text-sm ${o?"font-medium":"font-normal"}`,children:s.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s.badge&&e.jsx("span",{className:`
                px-1.5 py-0.5 text-xs font-medium rounded-full
                ${o?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}
              `,children:s.badge}),s.subItems&&e.jsx("div",{className:"flex items-center",children:n?e.jsx(vs,{className:"w-4 h-4 text-slate-500"}):e.jsx(ws,{className:"w-4 h-4 text-slate-500"})})]})]})]}),s.subItems&&n&&e.jsx("ul",{className:"ml-6 mt-1 space-y-0.5",children:s.subItems.map(y=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>x(y.id),className:`
                  relative w-full flex items-center space-x-2.5 px-3 py-2 rounded-md text-left transition-all duration-200 group
                  ${o===y.id?"bg-red-50 text-red-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}
                `,children:[e.jsx("div",{className:"flex items-center justify-center min-w-[24px]",children:e.jsx("div",{className:`
                    w-1.5 h-1.5 rounded-full
                    ${o===y.id?"bg-red-600":"bg-slate-400 group-hover:bg-slate-600"}
                  `})}),e.jsx("span",{className:`text-sm ${o===y.id?"font-medium":"font-normal"}`,children:y.label})]})},y.id))})]})},gt=({navigationItems:s,activeItem:o,onItemClick:p})=>e.jsx("nav",{className:"flex-1 px-3 py-2 overflow-y-auto",children:e.jsx("ul",{className:"space-y-0.5",children:s.map(n=>e.jsx(ut,{item:n,isActive:o===n.id,onClick:p},n.id))})}),ht=({sidebarOpen:s,setSidebarOpen:o,navigationItems:p,activeTab:n,setActiveTab:h,user:N,onLogout:S,className:g=""})=>{const[x,y]=i.useState("");i.useEffect(()=>{const M=()=>{window.innerWidth>=768?o(!0):o(!1)};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[o]);const A=()=>{o(!s)},E=M=>{h(M),window.innerWidth<768&&o(!1)},v=M=>{y(M)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:A,className:"fixed top-6 left-6 z-50 p-3 rounded-lg bg-white shadow-md border border-slate-100 md:hidden hover:bg-slate-50 transition-all duration-200","aria-label":"Toggle sidebar",children:s?e.jsx(de,{className:"h-5 w-5 text-slate-600"}):e.jsx(Cs,{className:"h-5 w-5 text-slate-600"})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-30 md:hidden transition-opacity duration-300",onClick:A}),e.jsxs("div",{className:`
          fixed top-0 left-0 h-full bg-white border-r border-slate-200 z-40 transition-all duration-300 ease-in-out flex flex-col w-64 md:w-80 md:sticky md:top-0 md:h-screen md:left-0 md:static
          ${s?"translate-x-0":"-translate-x-full"}
          md:translate-x-0 md:static md:z-auto
          ${g}
        `,children:[e.jsx(mt,{logo:"J",title:"Admin Panel",subtitle:"Job Portal Management"}),e.jsx(xt,{searchValue:x,onSearchChange:v,placeholder:"Search..."}),e.jsx(gt,{navigationItems:p,activeItem:n,onItemClick:E})]})]})},pt=()=>{const[s,o]=i.useState([]),[p,n]=i.useState({total:0,unread:0,read:0}),[h,N]=i.useState(!1),[S,g]=i.useState(!1);i.useEffect(()=>{x(),y()},[]);const x=async()=>{try{g(!0);const c=await Te.getUserNotifications();o(c.notifications||[])}catch(c){console.error("Error fetching notifications:",c),L.error("Failed to load notifications")}finally{g(!1)}},y=async()=>{try{const c=await Te.getNotificationStats();n(c.stats||{total:0,unread:0,read:0})}catch(c){console.error("Error fetching notification stats:",c)}},A=async c=>{try{await Te.markAsRead(c),o(P=>P.map(m=>m.id===c?{...m,isRead:!0,readAt:new Date().toISOString()}:m)),n(P=>({...P,unread:P.unread-1,read:P.read+1}))}catch(P){console.error("Error marking notification as read:",P),L.error("Failed to mark notification as read")}},E=async()=>{try{await Te.markAllAsRead(),o(c=>c.map(P=>({...P,isRead:!0,readAt:new Date().toISOString()}))),n(c=>({...c,unread:0,read:c.total})),L.success("All notifications marked as read")}catch(c){console.error("Error marking all notifications as read:",c),L.error("Failed to mark all notifications as read")}},v=c=>{switch(c){case"request_approved":case"payment_confirmed":case"photo_access_granted":case"full_access_granted":case"matched_with_employer":return e.jsx(De,{className:"w-5 h-5 text-green-500"});case"request_rejected":case"payment_rejected":case"full_details_rejected":return e.jsx(ke,{className:"w-5 h-5 text-red-500"});case"payment_request":case"full_details_requested":return e.jsx(Ps,{className:"w-5 h-5 text-blue-500"});default:return e.jsx(as,{className:"w-5 h-5 text-gray-500"})}},M=c=>{const P=new Date(c),k=Math.floor((new Date-P)/1e3);return k<60?"Just now":k<3600?`${Math.floor(k/60)}m ago`:k<86400?`${Math.floor(k/3600)}h ago`:`${Math.floor(k/86400)}d ago`};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!h),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(as,{className:"w-6 h-6"}),p.unread>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:p.unread>9?"9+":p.unread})]}),h&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[p.unread>0&&e.jsxs("button",{onClick:E,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(ks,{className:"w-4 h-4"}),"Mark all read"]}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(de,{className:"w-5 h-5"})})]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[p.unread," unread of ",p.total," total"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:S?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):s.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications yet"}):s.map(c=>e.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors ${c.isRead?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[v(c.type),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:M(c.createdAt)})]}),!c.isRead&&e.jsx("button",{onClick:()=>A(c.id),className:"ml-2 p-1 text-gray-400 hover:text-gray-600",title:"Mark as read",children:e.jsx(Ss,{className:"w-4 h-4"})})]})})]})},c.id))}),s.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:x,className:"text-sm text-blue-600 hover:text-blue-800 w-full text-center",children:"Refresh notifications"})})]})]})},ft=({user:s,onLogout:o,onSearch:p,onFilter:n,searchTerm:h="",onRefresh:N})=>e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-4 md:px-6 py-4 sticky top-0 z-20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome back, ",s?.firstName||s?.email||"Admin"]})]})}),e.jsx("div",{className:"flex-1 max-w-md mx-4 hidden md:block",children:e.jsxs("div",{className:"relative",children:[e.jsx(ds,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search...",value:h,onChange:S=>p?.(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[N&&e.jsx(C,{variant:"ghost",size:"sm",onClick:N,title:"Refresh data",children:e.jsx($e,{className:"w-5 h-5"})}),e.jsx(pt,{}),e.jsx("div",{className:"relative",children:e.jsxs(C,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Se,{className:"w-4 h-4 text-red-600"})}),e.jsx("span",{className:"hidden md:block text-sm font-medium",children:s?.firstName||s?.email||"Admin"})]})}),e.jsx(C,{variant:"outline",size:"sm",onClick:o,className:"hidden md:block",children:"Logout"})]})]})}),bt=()=>Ds.create({page:{flexDirection:"column",backgroundColor:"#ffffff",padding:15,fontSize:9},header:{marginBottom:10,borderBottom:"2 solid #3b82f6",paddingBottom:5},title:{fontSize:24,fontWeight:"bold",color:"#1f2937",marginBottom:2},subtitle:{fontSize:16,color:"#6b7280",marginBottom:2},dateRange:{fontSize:12,color:"#9ca3af",marginBottom:6},table:{display:"table",width:"auto",borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0,borderColor:"#e5e7eb"},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"auto",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderColor:"#3b82f6",backgroundColor:"#3b82f6",padding:1,minHeight:18,justifyContent:"center",alignItems:"center"},tableCol:{width:"1",borderStyle:"solid",borderWidth:1,borderLeftWidth:0,borderTopWidth:0,borderColor:"#e5e7eb",padding:1,minHeight:5,justifyContent:"center",alignItems:"center"},tableCellHeader:{margin:"2",fontSize:11,fontWeight:"bold",color:"#ffffff",textAlign:"center"},tableCell:{margin:"2",fontSize:9,color:"#1f2937",textAlign:"center"},tableCellLeft:{margin:"2",fontSize:9,color:"#1f2937",textAlign:"left"},footer:{position:"absolute",bottom:15,left:15,right:15,textAlign:"center",color:"#6b7280",fontSize:8,borderTop:"1 solid #e5e7eb",paddingTop:5},pageNumber:{position:"absolute",bottom:15,right:15,color:"#6b7280",fontSize:8},alternateRow:{backgroundColor:"#f9fafb"}}),yt=(s,o,p,n)=>{const h=bt(),N=n.title||Ct(s);n.subtitle||`${N.toLowerCase()}`;const S=n.dateRange||`Export Date: ${new Date().toLocaleDateString()}`,g=kt(s,p);return Q.createElement(Es,{},Q.createElement(Ms,{size:"A4",orientation:"landscape",style:h.page},[Q.createElement(he,{key:"header",style:h.header},[Q.createElement(pe,{key:"title",style:h.title},"Job Portal System"),Q.createElement(pe,{key:"subtitle",style:h.subtitle},N),Q.createElement(pe,{key:"dateRange",style:h.dateRange},S)]),Q.createElement(he,{key:"table",style:h.table},[Q.createElement(he,{key:"header-row",style:h.tableRow},g.map((x,y)=>Q.createElement(he,{key:`header-${y}`,style:[h.tableColHeader,{width:cs(x.key)}]},Q.createElement(pe,{style:h.tableCellHeader},x.label)))),...o.map((x,y)=>Q.createElement(he,{key:`row-${y}`,style:[h.tableRow,y%2===1?h.alternateRow:{}]},g.map((A,E)=>Q.createElement(he,{key:`cell-${y}-${E}`,style:[h.tableCol,{width:cs(A.key)}]},Q.createElement(pe,{style:Nt(A.key)},St(x,A,s))))))]),Q.createElement(he,{key:"footer",style:h.footer},Q.createElement(pe,{},`Generated by Job Portal System • Total records: ${o.length}`)),Q.createElement(pe,{key:"pageNumber",style:h.pageNumber,render:({pageNumber:x,totalPages:y})=>`Page ${x} of ${y}`})]))},jt=async(s,o,p,n={})=>{try{if(!o||!Array.isArray(o)||o.length===0)throw new Error("No table data provided");if(!p||!Array.isArray(p)||p.length===0)throw new Error("No columns provided");const h=yt(s,o,p,n);return await As(h).toBlob()}catch(h){throw console.error("Error generating react-pdf:",h),new Error(`Failed to generate PDF report: ${h.message}`)}},cs=(s,o)=>s==="jobseeker_info"?"40%":s==="employer_info"||s==="candidate_info"||s==="job_details"?"30%":{name:"20%",email:"25%",phone:"15%",location:"20%",category:"20%",experience:"15%",status:"12%",priority:"12%",demand:"12%",count:"10%",percentage:"10%",createdAt:"15%",registeredAt:"15%",employerName:"20%",companyName:"20%",candidateName:"20%",candidateEmail:"20%",candidateContact:"15%",position:"20%",monthlyRate:"15%",contactEmail:"20%"}[s]||"15%",Nt=s=>["jobseeker_info","employer_info","candidate_info","job_details","name","email","location","category","position","companyName","employerName","candidateName","candidateEmail"].includes(s)?{textAlign:"left"}:{textAlign:"center"},vt=(s,o)=>!s&&s!==0?"N/A":o==="status"||o==="priority"||o==="demand"?wt(s):o==="percentage"?`${s}%`:o==="monthlyRate"&&s!=="Not specified"?s:typeof s=="string"&&s.length>30?s.substring(0,27)+"...":s,wt=s=>s?{Active:"Active",Inactive:"Inactive",pending:"Pending",in_progress:"In Progress",completed:"Completed",urgent:"Urgent",high:"High",normal:"Normal",low:"Low",High:"High",Medium:"Medium",Low:"Low"}[s]||s:"N/A",Ct=s=>({"job-seekers":"Job Seekers Report","employer-requests":"Employer Requests Report",categories:"Job Categories Report",locations:"Location Distribution Report",skills:"Skills Analysis Report"})[s]||"Table Report",kt=(s,o)=>s==="job-seekers"?[{key:"jobseeker_info",label:"Job Seeker Info",subColumns:["name","email","phone","location"]},{key:"job_details",label:"Job Details",subColumns:["category","experience"]},{key:"registeredAt",label:"Registration Date",subColumns:["registeredAt"]},{key:"status",label:"Status",subColumns:["status"]}]:s==="employer-requests"?[{key:"employer_info",label:"Employer Info",subColumns:["employerName","companyName","employerEmail"]},{key:"candidate_info",label:"Candidate Info",subColumns:["candidateName","candidateEmail","candidateContact"]},{key:"job_details",label:"Job Details",subColumns:["category","monthlyRate","status","priority"]},{key:"createdAt",label:"Request Date",subColumns:["createdAt"]}]:s==="categories"?[{key:"category",label:"Category",subColumns:["category"]},{key:"count",label:"Count",subColumns:["count"]},{key:"percentage",label:"Percentage",subColumns:["percentage"]}]:s==="locations"?[{key:"location",label:"Location",subColumns:["location"]},{key:"count",label:"Count",subColumns:["count"]},{key:"percentage",label:"Percentage",subColumns:["percentage"]}]:s==="skills"?[{key:"skill",label:"Skill",subColumns:["skill"]},{key:"count",label:"Count",subColumns:["count"]},{key:"percentage",label:"Percentage",subColumns:["percentage"]}]:o.map(p=>({key:p.key,label:p.label,subColumns:[p.key]})),St=(s,o,p)=>{if(!o.subColumns||o.subColumns.length===1){const h=o.subColumns?o.subColumns[0]:o.key;return vt(s[h],h)}const n=o.subColumns.map(h=>{const N=s[h];return!N||N==="Not provided"||N==="Not specified"||N==="Unknown"?null:N}).filter(Boolean);return n.length===0?"N/A":n.length===1?n[0]:o.key==="jobseeker_info"?`${n[0]}
${n[1]}
${n[2]}
${n[3]}`:o.key==="employer_info"?`${n[0]}
${n[1]}
${n[2]||"N/A"}`:o.key==="candidate_info"?`${n[0]}
${n[1]}
${n[2]||"N/A"}`:o.key==="job_details"?p==="job-seekers"?`${n[0]}
${n[1]}`:p==="employer-requests"?`${n[0]}
${n[1]}
${n[2]}
${n[3]}`:n.join(`
`):n.join(`
`)},Pt=async(s,o)=>{try{const p=URL.createObjectURL(s),n=document.createElement("a");return n.href=p,n.download=o,n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(p),!0}catch(p){return console.error("Error saving PDF:",p),!1}},At=(s,o,p)=>{try{const n=o.map(y=>y.label).join(","),h=s.map(y=>o.map(A=>{const E=y[A.key];return typeof E=="string"&&(E.includes(",")||E.includes('"'))?`"${E.replace(/"/g,'""')}"`:E||""}).join(",")),N=[n,...h].join(`
`),S=new Blob([N],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a"),x=URL.createObjectURL(S);return g.setAttribute("href",x),g.setAttribute("download",p),g.style.visibility="hidden",document.body.appendChild(g),g.click(),document.body.removeChild(g),!0}catch(n){return console.error("Error exporting CSV:",n),!1}},Et=(s,o,p)=>{try{let n='<table border="1">';n+="<tr>",o.forEach(g=>{n+=`<th style="background-color: #3b82f6; color: white; padding: 8px; text-align: center; font-weight: bold;">${g.label}</th>`}),n+="</tr>",s.forEach(g=>{n+="<tr>",o.forEach(x=>{const y=g[x.key]||"";n+=`<td style="padding: 6px; border: 1px solid #e5e7eb;">${y}</td>`}),n+="</tr>"}),n+="</table>";const h=new Blob([n],{type:"application/vnd.ms-excel"}),N=document.createElement("a"),S=URL.createObjectURL(h);return N.setAttribute("href",S),N.setAttribute("download",p.replace(".xlsx",".html")),N.style.visibility="hidden",document.body.appendChild(N),N.click(),document.body.removeChild(N),!0}catch(n){return console.error("Error exporting Excel:",n),!1}},Mt=()=>{const{t:s}=Ve(),[o,p]=i.useState("30"),[n,h]=i.useState(!1),[N,S]=i.useState(null),[g,x]=i.useState(!0),[y,A]=i.useState(""),[E,v]=i.useState(null),[M,c]=i.useState("job-seekers"),[P,m]=i.useState(""),[k,$]=i.useState("pdf"),{jobSeekers:F,loading:q,error:Z,fetchJobSeekers:B}=hs({autoFetch:!0,itemsPerPage:1e3}),{requests:t,loading:a,error:l,fetchRequests:f}=ps({autoFetch:!0,itemsPerPage:1e3}),{categories:D,loading:R,error:G,fetchCategories:se}=rt({includeAdmin:!0,autoFetch:!0});i.useEffect(()=>{b()},[o]);const b=async()=>{try{x(!0),A("");const[u,r]=await Promise.all([je.getAnalytics({period:o}),je.getDashboardStats()]);u.success?S(u.data):A(u.error||"Failed to load analytics data"),r.success&&v(r.data)}catch(u){console.error("Error loading report data:",u),A("Network error. Please try again.")}finally{x(!1)}},I=[{value:"7",label:"Last 7 Days"},{value:"30",label:"Last 30 Days"},{value:"90",label:"Last 90 Days"},{value:"365",label:"Last Year"}],w=[{value:"job-seekers",label:"Job Seekers",icon:Ie},{value:"employer-requests",label:"Employer Requests",icon:we},{value:"categories",label:"Categories",icon:Re},{value:"locations",label:"Locations",icon:We},{value:"skills",label:"Skills",icon:Ls}],j=async u=>{h(!0);try{const r=ge(u),d=ue(u);if(!r||r.length===0)return L.error("No data available for export"),!1;const O=new Date().toISOString().split("T")[0],J=`table-report-${u}-${O}`;let te=!1;switch(k){case"pdf":const _e={title:ae(u),subtitle:`Comprehensive data table for ${ae(u).toLowerCase()}`,dateRange:`Last ${o} days (${new Date(Date.now()-parseInt(o)*24*60*60*1e3).toLocaleDateString()} - ${new Date().toLocaleDateString()})`};try{const _=await jt(u,r,d,_e),H=`${J}.pdf`;te=await Pt(_,H)}catch(_){return console.error("PDF generation error:",_),L.error(`PDF generation failed: ${_.message}`),!1}te?L.success(`${ae(u)} exported successfully as PDF!`):L.error("Failed to save PDF file");break;case"csv":const Fe=`${J}.csv`;te=At(r,d,Fe),te?L.success(`${ae(u)} exported successfully as CSV!`):L.error("Failed to save CSV file");break;case"excel":const qe=`${J}.xlsx`;te=Et(r,d,qe),te?L.success(`${ae(u)} exported successfully as Excel!`):L.error("Failed to save Excel file");break;default:return L.error("Unsupported export format"),!1}return te}catch(r){return console.error("Error exporting report:",r),L.error("Error generating export report. Please try again."),!1}finally{h(!1)}},W=async()=>{h(!0);try{await Promise.all([b(),B(),f(),se()])}catch(u){console.error("Error refreshing data:",u),A("Failed to refresh data. Please try again.")}finally{h(!1)}},Y=()=>!F||F.length===0?[]:F.map(u=>({id:u.id,name:`${u.profile?.firstName||u.firstName||u.name||"Unknown"} ${u.profile?.lastName||u.lastName||""}`,email:u.email||u.profile?.email||"Not provided",phone:u.profile?.contactNumber||u.contactNumber||u.phone||"Not provided",location:u.profile?.location||u.location||u.city||"Not specified",category:u.profile?.jobCategory?.name_en||u.jobCategory?.name_en||u.category||"Not specified",experience:u.profile?.experienceLevel||u.experienceLevel||u.experience||"Not specified",registeredAt:u.registeredAt||u.createdAt?new Date(u.registeredAt||u.createdAt).toLocaleDateString():"Unknown",status:u.status||"Active"})),le=()=>{if(!t||t.length===0)return[];const u=r=>{if(!r||r==="Not specified")return"Not specified";if(typeof r=="number")return new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(r);if(typeof r=="string"){const d=parseFloat(r);return isNaN(d)?r:new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(d)}return"Not specified"};return t.map(r=>({id:r.id,employerName:r.name||r.employerName||r.employer?.name||"Unknown",companyName:r.companyName||r.employer?.company||"Private",candidateName:r.requestedCandidate&&`${r.requestedCandidate.profile?.firstName||""} ${r.requestedCandidate.profile?.lastName||""}`.trim()||"Not specified",position:r.requestedCandidate?.profile?.skills||r.position||r.jobTitle||"General",status:r.status||"pending",priority:r.priority||"normal",monthlyRate:u(r.requestedCandidate?.profile?.monthlyRate),createdAt:r.createdAt?new Date(r.createdAt).toLocaleDateString():"Unknown",contactEmail:r.email||r.employerContact?.email||r.employer?.email||"Not provided",lastContactDate:r.updatedAt,isCompleted:r.status==="completed",category:r.requestedCandidate?.profile?.jobCategory?.name_en||"General",candidateExperience:r.requestedCandidate?.profile?.experience||"Not specified",candidateExperienceLevel:r.requestedCandidate?.profile?.experienceLevel||"Not specified",candidateEducation:r.requestedCandidate?.profile?.educationLevel||"Not specified",candidateLocation:r.requestedCandidate?.profile?.location||"Not specified",candidateCity:r.requestedCandidate?.profile?.city||"Not specified",candidateCountry:r.requestedCandidate?.profile?.country||"Not specified",candidateContact:r.requestedCandidate?.profile?.contactNumber||"Not specified",candidateEmail:r.requestedCandidate?.email||"Not specified",candidateLanguages:r.requestedCandidate?.profile?.languages||"Not specified",candidateCertifications:r.requestedCandidate?.profile?.certifications||"Not specified",candidateAvailability:r.requestedCandidate?.profile?.availability||"Not specified",candidateDescription:r.requestedCandidate?.profile?.description||"Not specified",candidateGender:r.requestedCandidate?.profile?.gender||"Not specified",candidateMaritalStatus:r.requestedCandidate?.profile?.maritalStatus||"Not specified",candidateIdNumber:r.requestedCandidate?.profile?.idNumber||"Not specified",candidateReferences:r.requestedCandidate?.profile?.references||"Not specified",message:r.message||"",_backendData:r}))},Pe=()=>{if(!D||D.length===0)return[];const u={};return F?.forEach(r=>{const d=r.profile?.jobCategory?.name_en||r.jobCategory?.name_en||r.category||"Uncategorized";u[d]=(u[d]||0)+1}),D.map(r=>{const d=u[r.name_en]||0,O=F?.length||1,J=Math.round(d/O*100);return{id:r.id,name:r.name_en||r.name,count:d,percentage:J,status:"Active"}})},Ae=()=>{if(!F||F.length===0)return[];const u={};return F.forEach(r=>{const d=r.profile?.location||r.location||r.city||"Unknown";u[d]=(u[d]||0)+1}),Object.entries(u).map(([r,d])=>{const O=F.length,J=Math.round(d/O*100);return{id:r,name:r,count:d,percentage:J,status:"Active"}}).sort((r,d)=>d.count-r.count)},ce=()=>{if(!F||F.length===0)return[];const u={};return F.forEach(r=>{const d=r.profile?.skills||r.skills||"";d&&d.split(",").map(J=>J.trim()).filter(J=>J).forEach(J=>{u[J]=(u[J]||0)+1})}),Object.entries(u).map(([r,d])=>{const O=F.length,J=Math.round(d/O*100),te=d>O*.3?"High":d>O*.1?"Medium":"Low";return{id:r,name:r,count:d,percentage:J,demand:te}}).sort((r,d)=>d.count-r.count)},ue=u=>{switch(u){case"job-seekers":return[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"location",label:"Location",sortable:!0},{key:"category",label:"Category",sortable:!0},{key:"experience",label:"Experience",sortable:!0},{key:"registeredAt",label:"Registered",sortable:!0},{key:"status",label:"Status",sortable:!0,render:r=>e.jsx(z,{variant:r.status==="Active"?"success":"warning",children:r.status})}];case"employer-requests":return[{key:"employerName",label:"Employer Name",sortable:!0},{key:"companyName",label:"Company",sortable:!0},{key:"contactEmail",label:"Employer Email",sortable:!0},{key:"candidateName",label:"Candidate Name",sortable:!0},{key:"candidateEmail",label:"Candidate Email",sortable:!0},{key:"candidateContact",label:"Candidate Phone",sortable:!0},{key:"position",label:"Position/Skills",sortable:!0},{key:"category",label:"Category",sortable:!0},{key:"monthlyRate",label:"Monthly Rate",sortable:!0},{key:"status",label:"Status",sortable:!0,render:r=>e.jsx(z,{variant:r.status==="completed"?"success":r.status==="in_progress"?"warning":r.status==="pending"?"info":"danger",children:r.status.replace("_"," ")})},{key:"priority",label:"Priority",sortable:!0,render:r=>e.jsx(z,{variant:r.priority==="urgent"?"danger":r.priority==="high"?"warning":r.priority==="normal"?"info":"secondary",children:r.priority})},{key:"createdAt",label:"Created",sortable:!0}];case"categories":return[{key:"name",label:"Category Name",sortable:!0},{key:"count",label:"Job Seekers",sortable:!0},{key:"percentage",label:"Percentage",sortable:!0,render:r=>e.jsxs("span",{children:[r.percentage,"%"]})},{key:"status",label:"Status",sortable:!0,render:r=>e.jsx(z,{variant:"success",children:r.status})}];case"locations":return[{key:"name",label:"Location",sortable:!0},{key:"count",label:"Job Seekers",sortable:!0},{key:"percentage",label:"Percentage",sortable:!0,render:r=>e.jsxs("span",{children:[r.percentage,"%"]})},{key:"status",label:"Status",sortable:!0,render:r=>e.jsx(z,{variant:"success",children:r.status})}];case"skills":return[{key:"name",label:"Skill Name",sortable:!0},{key:"count",label:"Count",sortable:!0},{key:"percentage",label:"Percentage",sortable:!0,render:r=>e.jsxs("span",{children:[r.percentage,"%"]})},{key:"demand",label:"Demand Level",sortable:!0,render:r=>e.jsx(z,{variant:r.demand==="High"?"success":r.demand==="Medium"?"warning":"info",children:r.demand})}];default:return[]}},ge=u=>{switch(u){case"job-seekers":return Y();case"employer-requests":return le();case"categories":return Pe();case"locations":return Ae();case"skills":return ce();default:return[]}},ae=u=>{const r=w.find(d=>d.value===u);return r?r.label:"Report"};return g||q||a||R?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(oe,{size:"lg",text:"Loading table reports..."})}):y||Z||l||G?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(xs,{className:"w-6 h-6 text-red-600"})})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Table Reports"}),e.jsx("p",{className:"text-red-600 mb-4",children:y||Z||l||G}),e.jsxs(C,{onClick:W,variant:"outline",children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Table Reports"})})}),e.jsx(V,{className:"",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsx("select",{value:o,onChange:u=>p(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})}),w.map(u=>{const r=u.icon,d=M===u.value;return e.jsx("button",{onClick:()=>c(u.value),className:`p-4 rounded-lg border-2 transition-all duration-200 hover:shadow-md ${d?"border-blue-500 bg-blue-50 text-blue-700 shadow-md":"border-gray-200 hover:border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(r,{className:`w-6 h-6 ${d?"text-blue-600":"text-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium text-center",children:u.label})]})},u.value)})]})}),M&&e.jsxs(V,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:ae(M)}),e.jsxs("p",{className:"text-gray-600",children:["Comprehensive data table for ",ae(M).toLowerCase()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:k,onChange:u=>$(u.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"csv",children:"CSV"}),e.jsx("option",{value:"excel",children:"Excel"})]}),e.jsxs(C,{onClick:()=>j(M),disabled:n,className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"w-3 h-3"}),n?"Exporting...":`Export ${k.toUpperCase()}`]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(C,{onClick:W,variant:"outline",disabled:n,className:"flex items-center gap-2",children:[e.jsx($e,{className:`w-3 h-3 ${n?"animate-spin":""}`}),n?"Refreshing...":"Refresh"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx(fs,{columns:ue(M),data:ge(M),pagination:!0,itemsPerPage:15,searchTerm:P,onSearchChange:m,className:"w-full"})})]}),e.jsx(Ye,{position:"top-right"})]})},Dt=(s={})=>{const{autoFetch:o=!1,itemsPerPage:p=10,page:n=1,searchTerm:h="",status:N="",category:S=""}=s,[g,x]=i.useState([]),[y,A]=i.useState(!1),[E,v]=i.useState(""),[M,c]=i.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[P,m]=i.useState(null),k=i.useCallback(async(a={})=>{A(!0),v("");try{const l={page:a.page||n,limit:a.itemsPerPage||p,search:a.searchTerm||h,status:a.status||N,category:a.category||S,...a},f=await ve.getAllContacts(l);f.success?(x(Array.isArray(f.data.contacts)?f.data.contacts:[]),f.data.pagination&&c(f.data.pagination),f.data.statistics&&m(f.data.statistics)):v(f.error)}catch(l){v("Failed to fetch contact messages"),console.error("Error fetching contact messages:",l)}finally{A(!1)}},[n,p,h,N,S]),$=i.useCallback(async a=>{A(!0),v("");try{const l=await ve.getMessageById(a);return l.success?l.data:(v(l.error),null)}catch(l){return v("Failed to fetch contact message"),console.error("Error fetching contact message:",l),null}finally{A(!1)}},[]),F=i.useCallback(async(a,l)=>{A(!0),v("");try{const f=await ve.respondToMessage(a,l);return f.success?(await k(),f):(v(f.error),f)}catch{return v("Failed to respond to message"),{success:!1,error:"Failed to respond to message"}}finally{A(!1)}},[k]),q=i.useCallback(async a=>{try{const l=await ve.markAsRead(a);return l.success?(x(f=>f.map(D=>D.id===a?{...D,isRead:!0}:D)),l):(v(l.error),l)}catch(l){return v("Failed to mark message as read"),console.error("Error marking message as read:",l),{success:!1,error:"Failed to mark message as read"}}},[]),Z=i.useCallback(async a=>{try{const l=await ve.deleteMessage(a);return l.success?(x(f=>f.filter(D=>D.id!==a)),l):(v(l.error),l)}catch(l){return v("Failed to delete message"),console.error("Error deleting message:",l),{success:!1,error:"Failed to delete message"}}},[]),B=i.useCallback(async()=>{try{const a=await ve.getStatistics();return a.success?(m(a.data),a.data):(v(a.error),null)}catch(a){return v("Failed to fetch statistics"),console.error("Error fetching statistics:",a),null}},[]),t=i.useCallback(()=>k(),[k]);return i.useEffect(()=>{o&&(k(),B())},[o,k,B]),{messages:g,loading:y,error:E,pagination:M,statistics:P,fetchMessages:k,fetchMessageById:$,respondToMessage:F,markAsRead:q,deleteMessage:Z,fetchStatistics:B,refreshMessages:t}},Lt=()=>{const{t:s}=Ve(),[o,p]=i.useState(""),[n,h]=i.useState(""),[N,S]=i.useState(""),[g,x]=i.useState(null),[y,A]=i.useState(!1),[E,v]=i.useState(!1),[M,c]=i.useState(!1),[P,m]=i.useState({subject:"",message:""}),[k,$]=i.useState(!1),{messages:F,loading:q,error:Z,statistics:B,fetchMessages:t,respondToMessage:a,markAsRead:l,deleteMessage:f,refreshMessages:D}=Dt({autoFetch:!0,itemsPerPage:15}),[R,G]=i.useState(1),se=15,I=(Array.isArray(F)?F.map(d=>({...d,createdAt:d.createdAt||""})):[]).filter(d=>{const O=!o||d.status===o,J=!n||d.category===n,te=!N||d.priority===N;return O&&J&&te}),w=Math.ceil(I.length/se),j=I.slice((R-1)*se,R*se),W=(d,O)=>{x(O),A(!0)};i.useEffect(()=>{t({status:o,category:n,priority:N})},[o,n,N]);const Y=async d=>{x(d),A(!0),d.isRead||await l(d.id)},le=d=>{x(d),m({subject:`Re: ${d.subject}`,message:""}),v(!0)},Pe=d=>{x(d),c(!0)},Ae=async d=>{if(d.preventDefault(),!localStorage.getItem("job_portal_token")){L.error("You are not logged in. Please log in again."),window.location.href="/login";return}if(!P.subject.trim()||!P.message.trim()){L.error("Please fill in both subject and message");return}if(g&&g.status==="responded"){L.error("This message has already been responded to. You cannot reply again."),v(!1);return}$(!0);try{const J=await a(g.id,P);J.success?(L.success("Response sent successfully!"),v(!1),m({subject:"",message:""}),x(null)):L.error(J.error||"Failed to send response")}catch{L.error("Failed to send response. Please try again.")}finally{$(!1)}},ce=async()=>{(await f(g.id)).success?(L.success("Message deleted successfully!"),c(!1),x(null)):L.error("Failed to delete message")},ue=d=>{switch(d){case"unread":return e.jsx(z,{variant:"warning",children:"Unread"});case"read":return e.jsx(z,{variant:"info",children:"Read"});case"responded":return e.jsx(z,{variant:"success",children:"Responded"});case"archived":return e.jsx(z,{variant:"secondary",children:"Archived"});default:return e.jsx(z,{variant:"outline",children:d})}},ge=d=>{switch(d){case"low":return e.jsx(z,{variant:"secondary",children:"Low"});case"normal":return e.jsx(z,{variant:"info",children:"Normal"});case"high":return e.jsx(z,{variant:"warning",children:"High"});case"urgent":return e.jsx(z,{variant:"danger",children:"Urgent"});default:return e.jsx(z,{variant:"outline",children:d})}},ae=d=>{switch(d){case"general":return e.jsx(z,{variant:"info",children:"General"});case"support":return e.jsx(z,{variant:"warning",children:"Support"});case"feedback":return e.jsx(z,{variant:"success",children:"Feedback"});case"complaint":return e.jsx(z,{variant:"danger",children:"Complaint"});default:return e.jsx(z,{variant:"outline",children:d})}},u=[{key:"name",label:"Name",sortable:!0,render:d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:d.name})]})},{key:"email",label:"Email",sortable:!0,render:d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:d.email})]})},{key:"subject",label:"Subject",sortable:!0,render:d=>e.jsx("div",{className:"max-w-xs truncate",title:d.subject,children:d.subject})},{key:"category",label:"Category",sortable:!0,render:d=>ae(d.category)},{key:"priority",label:"Priority",sortable:!0,render:d=>ge(d.priority)},{key:"status",label:"Status",sortable:!0,render:d=>ue(d.status)},{key:"submittedAt",label:"Date",sortable:!0,render:d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:new Date(d.createdAt).toLocaleDateString()})]})}],r=d=>[{key:"view",label:"View",icon:ye,onClick:()=>Y(d),variant:"outline"},{key:"reply",label:"Reply",icon:Oe,onClick:()=>{d.status==="responded"?L.error("This message has already been responded to."):le(d)},variant:"primary",disabled:d.status==="responded"},{key:"delete",label:"Delete",icon:ie,onClick:()=>Pe(d),variant:"danger"}];return q&&F.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(oe,{size:"lg",text:"Loading contact messages..."})}):Z&&F.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ke,{className:"w-6 h-6 text-red-600"})})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Contact Messages"}),e.jsx("p",{className:"text-red-600 mb-4",children:Z}),e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Authentication Issue:"})," This error usually means you need to log in again or your session has expired."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[e.jsxs(C,{onClick:D,variant:"outline",children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsx(C,{onClick:()=>window.location.href="/login",variant:"primary",children:"Go to Login"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contact Messages"}),e.jsx("p",{className:"text-gray-600",children:"Manage and respond to contact form submissions"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(C,{onClick:D,variant:"outline",disabled:q,className:"flex items-center gap-2",children:[e.jsx($e,{className:`w-4 h-4 ${q?"animate-spin":""}`}),q?"Refreshing...":"Refresh"]})})]}),B&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.total||0})]})]})}),e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Unread Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.unread||0})]})]})}),e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-6 h-6 text-green-600"})}),e.jsx("div",{className:"ml-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.responded||0})})]})}),e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx($s,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Archived"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.archived||0})]})]})})]}),e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:o,onChange:d=>p(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"}),e.jsx("option",{value:"responded",children:"Responded"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:n,onChange:d=>h(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"support",children:"Support"}),e.jsx("option",{value:"feedback",children:"Feedback"}),e.jsx("option",{value:"complaint",children:"Complaint"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:N,onChange:d=>S(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(C,{onClick:()=>{p(""),h(""),S("")},variant:"outline",className:"w-full",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})}),e.jsx(fs,{columns:u,data:j,pagination:!0,itemsPerPage:se,actionButtons:r,onRowAction:W,className:"w-full"}),w>1&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>G(R-1),disabled:R===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",R," of ",w]}),e.jsx(C,{variant:"outline",size:"sm",onClick:()=>G(R+1),disabled:R===w,children:"Next"})]}),e.jsx(Ce,{isOpen:y,onClose:()=>A(!1),title:"View Message",maxWidth:"max-w-2xl",children:g&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:g.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:g.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsx("p",{className:"text-gray-900",children:g.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("div",{children:ae(g.category)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("div",{children:ue(g.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(g.createdAt).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:g.message})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(C,{onClick:()=>{A(!1),le(g)},variant:"primary",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Reply"]}),e.jsx(C,{onClick:()=>A(!1),variant:"outline",children:"Close"})]})]})}),e.jsx(Ce,{isOpen:E,onClose:()=>v(!1),title:"Reply to Message",maxWidth:"max-w-2xl",children:e.jsxs("form",{onSubmit:Ae,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",value:P.subject,onChange:d=>m(O=>({...O,subject:d.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:P.message,onChange:d=>m(O=>({...O,message:d.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Type your response...",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(C,{type:"button",onClick:()=>v(!1),variant:"outline",disabled:k,children:"Cancel"}),e.jsx(C,{type:"submit",variant:"primary",disabled:k,children:k?e.jsxs("span",{className:"flex items-center",children:[e.jsx(oe,{size:"sm",className:"mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Send Reply"]})})]})]})}),e.jsx(Ye,{position:"top-right"}),e.jsx(Ce,{isOpen:M,onClose:()=>c(!1),title:"Delete Message",maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Message"}),e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this message? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(C,{onClick:()=>c(!1),variant:"outline",children:"Cancel"}),e.jsxs(C,{onClick:ce,variant:"danger",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]})},Rt=({loadingTime:s,apiCalls:o,cacheHits:p,errors:n,showDetails:h=!1})=>{const[N,S]=i.useState(!1);if(i.useEffect(()=>{const y=setTimeout(()=>{(s>2e3||n.length>0)&&S(!0)},2e3);return()=>clearTimeout(y)},[s,n.length]),!N)return null;const x=s<1e3?{status:"excellent",color:"text-green-600",bg:"bg-green-50"}:s<2e3?{status:"good",color:"text-blue-600",bg:"bg-blue-50"}:s<5e3?{status:"fair",color:"text-yellow-600",bg:"bg-yellow-50"}:{status:"poor",color:"text-red-600",bg:"bg-red-50"};return e.jsxs("div",{className:`fixed bottom-4 right-4 z-50 ${x.bg} border rounded-lg shadow-lg p-4 max-w-sm transition-all duration-300`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:`font-semibold ${x.color}`,children:"Performance Monitor"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{children:["Load Time: ",e.jsxs("span",{className:x.color,children:[s,"ms"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ts,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{children:["API Calls: ",o]})]}),p>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(zs,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{children:["Cache Hits: ",p]})]}),n.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{children:["Errors: ",n.length]})]})]}),h&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{children:["Status: ",e.jsx("span",{className:x.color,children:x.status})]}),e.jsxs("div",{children:["Performance: ",s<1e3?"🚀":s<2e3?"⚡":s<5e3?"🐌":"🐌🐌"]})]})})]})},$t=()=>{const{user:s,updateUser:o}=gs(),[p,n]=i.useState("profile"),[h,N]=i.useState(!1),[S,g]=i.useState(!0),[x,y]=i.useState({type:"",text:""}),[A,E]=i.useState({startTime:Date.now(),loadingTime:0,apiCalls:0,cacheHits:0,errors:[]}),[v,M]=i.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:""}),[c,P]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,k]=i.useState({}),[$,F]=i.useState(!1),[q,Z]=i.useState(!1),[B,t]=i.useState(!1),a=i.useMemo(()=>[{id:"profile",label:"Profile",icon:Se},{id:"security",label:"Security",icon:Us}],[]),l=i.useCallback(async()=>{try{g(!0),E(j=>({...j,apiCalls:j.apiCalls+1})),console.log("🔄 Loading admin profile...");const w=await je.getAdminProfile();if(console.log("📊 Admin profile result:",w),w.success){const j=w.data;console.log("👤 Admin data received:",j),M({firstName:j.firstName||j.profile?.firstName||"",lastName:j.lastName||j.profile?.lastName||"",email:j.email||"",phone:j.phone||j.phoneNumber||j.profile?.phoneNumber||"",location:j.location||j.city||j.profile?.city||"",bio:j.bio||j.profile?.bio||""}),w.fromCache&&E(W=>({...W,cacheHits:W.cacheHits+1}))}else console.warn("⚠️ Failed to load admin profile from API, using user context data"),console.warn("❌ API Error:",w.error),s&&(console.log("👤 Falling back to user context data:",s),M({firstName:s.profile?.firstName||s.firstName||"",lastName:s.profile?.lastName||s.lastName||"",email:s.email||"",phone:s.profile?.phoneNumber||s.phoneNumber||"",location:s.profile?.city||s.city||"",bio:s.profile?.bio||s.bio||""})),E(j=>({...j,errors:[...j.errors,w.error||"Failed to load admin profile"]}))}catch(w){console.error("💥 Error loading admin profile:",w),s&&(console.log("👤 Falling back to user context data on error:",s),M({firstName:s.profile?.firstName||s.firstName||"",lastName:s.profile?.lastName||s.lastName||"",email:s.email||"",phone:s.profile?.phoneNumber||s.phoneNumber||"",location:s.profile?.city||s.city||"",bio:s.profile?.bio||s.bio||""})),E(j=>({...j,errors:[...j.errors,"Network error loading admin profile"]}))}finally{g(!1)}},[s]);i.useEffect(()=>{const j=Date.now()-A.startTime;E(W=>({...W,loadingTime:j}))},[S]),i.useEffect(()=>{l()},[l]);const f=i.useCallback(w=>{const{name:j,value:W}=w.target;M(Y=>({...Y,[j]:W})),m[j]&&k(Y=>({...Y,[j]:""}))},[m]),D=i.useCallback(w=>{const{name:j,value:W}=w.target;P(Y=>({...Y,[j]:W})),m[j]&&k(Y=>({...Y,[j]:""}))},[m]),R=i.useCallback(()=>{const w={};return v.firstName.trim()||(w.firstName="First name is required"),v.lastName.trim()||(w.lastName="Last name is required"),v.email.trim()?/\S+@\S+\.\S+/.test(v.email)||(w.email="Email is invalid"):w.email="Email is required",v.phone&&v.phone.replace(/\D/g,"").length<9&&(w.phone="Phone number must be at least 9 digits"),k(w),Object.keys(w).length===0},[v]),G=i.useCallback(()=>{const w={};return c.currentPassword||(w.currentPassword="Current password is required"),c.newPassword?c.newPassword.length<8&&(w.newPassword="Password must be at least 8 characters"):w.newPassword="New password is required",c.newPassword!==c.confirmPassword&&(w.confirmPassword="Passwords do not match"),k(w),Object.keys(w).length===0},[c]),se=i.useCallback(async()=>{if(R())try{N(!0),E(j=>({...j,apiCalls:j.apiCalls+1}));const w=await je.updateAdminProfile(v);w.success?(y({type:"success",text:"Profile updated successfully!"}),o&&o({...s,...v}),setTimeout(()=>y({type:"",text:""}),3e3)):(y({type:"error",text:w.error||"Failed to update profile"}),E(j=>({...j,errors:[...j.errors,w.error||"Profile update failed"]})))}catch{y({type:"error",text:"Network error. Please try again."}),E(j=>({...j,errors:[...j.errors,"Network error during profile update"]}))}finally{N(!1)}},[v,R,o,s]),b=i.useCallback(async()=>{if(G())try{N(!0),E(j=>({...j,apiCalls:j.apiCalls+1}));const w=await je.changeAdminPassword({currentPassword:c.currentPassword,newPassword:c.newPassword});w.success?(y({type:"success",text:"Password changed successfully!"}),P({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>y({type:"",text:""}),3e3)):(y({type:"error",text:w.error||"Failed to change password"}),E(j=>({...j,errors:[...j.errors,w.error||"Password change failed"]})))}catch{y({type:"error",text:"Network error. Please try again."}),E(j=>({...j,errors:[...j.errors,"Network error during password change"]}))}finally{N(!1)}},[c,G]),I=i.useMemo(()=>x.text?e.jsxs(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 rounded-lg flex items-center space-x-2 ${x.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[x.type==="success"?e.jsx(De,{className:"w-5 h-5"}):e.jsx(ke,{className:"w-5 h-5"}),e.jsx("span",{children:x.text}),e.jsx("button",{onClick:()=>y({type:"",text:""}),className:"ml-auto hover:opacity-70 transition-opacity",children:e.jsx(de,{className:"w-4 h-4"})})]}):null,[x]);return S?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(oe,{})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your profile and system settings"})]})}),I,e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:a.map(w=>{const j=w.icon;return e.jsxs("button",{onClick:()=>n(w.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p===w.id?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:w.label})]},w.id)})})}),e.jsxs("div",{className:"mt-6",children:[p==="profile"&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:v.firstName,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.firstName?"border-red-300":"border-gray-300"}`}),m.firstName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:v.lastName,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.lastName?"border-red-300":"border-gray-300"}`}),m.lastName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:v.email,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.email?"border-red-300":"border-gray-300"}`}),m.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:v.phone,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.phone?"border-red-300":"border-gray-300"}`}),m.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:v.location,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{name:"bio",value:v.bio,onChange:f,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors",placeholder:"Tell us about yourself..."})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(C,{variant:"primary",onClick:se,disabled:h,children:[h?e.jsx(oe,{size:"sm"}):e.jsx(us,{className:"w-4 h-4 mr-2"}),"Save Profile"]})})]})})}),p==="security"&&e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(V,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:$?"text":"password",name:"currentPassword",value:c.currentPassword,onChange:D,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.currentPassword?"border-red-300":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>F(!$),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:opacity-70 transition-opacity",children:$?e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}):e.jsx(ye,{className:"w-4 h-4 text-gray-400"})})]}),m.currentPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.currentPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:q?"text":"password",name:"newPassword",value:c.newPassword,onChange:D,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.newPassword?"border-red-300":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>Z(!q),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:opacity-70 transition-opacity",children:q?e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}):e.jsx(ye,{className:"w-4 h-4 text-gray-400"})})]}),m.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:B?"text":"password",name:"confirmPassword",value:c.confirmPassword,onChange:D,className:`w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors ${m.confirmPassword?"border-red-300":"border-gray-300"}`}),e.jsx("button",{type:"button",onClick:()=>t(!B),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:opacity-70 transition-opacity",children:B?e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}):e.jsx(ye,{className:"w-4 h-4 text-gray-400"})})]}),m.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.confirmPassword})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(C,{variant:"primary",onClick:b,disabled:h,children:[h?e.jsx(oe,{size:"sm"}):e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Change Password"]})})]})]})})]})]}),e.jsx(Rt,{loadingTime:A.loadingTime,apiCalls:A.apiCalls,cacheHits:A.cacheHits,errors:A.errors,showDetails:!0})]})},Ft=()=>{const[s,o]=i.useState([]),[p,n]=i.useState(!0),[h,N]=i.useState(""),[S,g]=i.useState(!1),[x,y]=i.useState(!1),[A,E]=i.useState(!1),[v,M]=i.useState(null),[c,P]=i.useState({name:"",type:"mobile_money",accountName:"",accountNumber:"",bankName:"",sortOrder:0,isActive:!0}),[m,k]=i.useState(!1),[$,F]=i.useState(!1),q=i.useCallback(async()=>{try{n(!0),N("");const b=await fetch(`${ne.BASE_URL}/payment-methods/admin/all`,{headers:{Authorization:`Bearer ${localStorage.getItem(ne.AUTH_CONFIG.tokenKey)}`}});if(b.ok){const I=await b.json();o(I.paymentMethods||[])}else{const I=await b.json();N(I.error||"Failed to fetch payment methods")}}catch(b){console.error("Error fetching payment methods:",b),N("Network error. Please try again.")}finally{n(!1)}},[]);i.useEffect(()=>{q()},[q]);const Z=()=>{P({name:"",type:"mobile_money",accountName:"",accountNumber:"",bankName:"",sortOrder:0,isActive:!0})},B=()=>{Z(),g(!0)},t=b=>{M(b),P({name:b.name,type:b.type,accountName:b.accountName,accountNumber:b.accountNumber,bankName:b.bankName||"",sortOrder:b.sortOrder,isActive:b.isActive}),y(!0)},a=b=>{M(b),E(!0)},l=()=>{g(!1),y(!1),E(!1),M(null),Z()},f=async b=>{if(b.preventDefault(),!c.name||!c.type||!c.accountName||!c.accountNumber){L.error("Please fill in all required fields");return}try{k(!0);const I=x?`${ne.BASE_URL}/payment-methods/${v.id}`:`${ne.BASE_URL}/payment-methods`,j=await fetch(I,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(ne.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify(c)}),W=await j.json();if(j.ok){const Y=x?"updated":"created";L.success(`Payment method ${Y} successfully!`),l(),q()}else L.error(W.error||`Failed to ${x?"update":"create"} payment method`)}catch(I){console.error("Error submitting payment method:",I),L.error("Network error. Please try again.")}finally{k(!1)}},D=async()=>{if(v)try{k(!0);const b=await fetch(`${ne.BASE_URL}/payment-methods/${v.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem(ne.AUTH_CONFIG.tokenKey)}`}});if(b.ok)L.success("Payment method deleted successfully!"),l(),q();else{const I=await b.json();L.error(I.error||"Failed to delete payment method")}}catch(b){console.error("Error deleting payment method:",b),L.error("Network error. Please try again.")}finally{k(!1)}},R=async b=>{try{const I=await fetch(`${ne.BASE_URL}/payment-methods/${b.id}/toggle`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem(ne.AUTH_CONFIG.tokenKey)}`}});if(I.ok)L.success(`Payment method ${b.isActive?"deactivated":"activated"} successfully!`),q();else{const w=await I.json();L.error(w.error||"Failed to toggle payment method status")}}catch(I){console.error("Error toggling payment method status:",I),L.error("Network error. Please try again.")}},G=b=>{switch(b){case"mobile_money":return e.jsx(Bs,{className:"h-4 w-4"});case"bank_transfer":return e.jsx(qs,{className:"h-4 w-4"});case"cash":return e.jsx(He,{className:"h-4 w-4"});default:return e.jsx(He,{className:"h-4 w-4"})}},se=b=>{switch(b){case"mobile_money":return"Mobile Money";case"bank_transfer":return"Bank Transfer";case"cash":return"Cash";default:return b}};return p?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(oe,{size:"lg"})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Methods"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage payment methods for employer requests"})]}),e.jsxs(C,{onClick:B,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(fe,{className:"h-5 w-5 mr-2"}),"Add Payment Method"]})]})}),h&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-800",children:h})}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Payment Methods (",s.length,")"]})}),s.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No payment methods found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create your first payment method to get started"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map((b,I)=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-600 cursor-move",disabled:$,children:e.jsx(_s,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-gray-500",children:G(b.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:b.name}),e.jsx(z,{variant:b.isActive?"success":"secondary",className:"ml-2",children:b.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",se(b.type),b.bankName&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-medium",children:"Bank:"})," ",b.bankName]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Account:"})," ",b.accountName,e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-medium",children:"Number:"})," ",b.accountNumber]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{variant:"outline",size:"sm",onClick:()=>R(b),className:b.isActive?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700",children:b.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-1"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),"Activate"]})}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>t(b),children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(C,{variant:"outline",size:"sm",onClick:()=>a(b),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})},b.id))})]})]}),(S||x)&&e.jsx(Ce,{isOpen:S||x,onClose:l,title:x?"Edit Payment Method":"Add Payment Method",maxWidth:"max-w-2xl",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Method Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.name,onChange:b=>P({...c,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., MTN MOMO, Airtel Money, Bank of Rwanda",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c.type,onChange:b=>P({...c,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"mobile_money",children:"Mobile Money"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Holder Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.accountName,onChange:b=>P({...c,accountName:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Job Portal, Company Name",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Number/Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.accountNumber,onChange:b=>P({...c,accountNumber:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 0788123456, 1234567890",required:!0})]}),c.type==="bank_transfer"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),e.jsx("input",{type:"text",value:c.bankName,onChange:b=>P({...c,bankName:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Bank of Rwanda, Equity Bank"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),e.jsx("input",{type:"number",value:c.sortOrder,onChange:b=>P({...c,sortOrder:parseInt(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0",min:"0"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first in the list"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:b=>P({...c,isActive:b.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Active (available for payments)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(C,{type:"button",variant:"outline",onClick:l,disabled:m,children:"Cancel"}),e.jsx(C,{type:"submit",variant:"primary",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),x?"Updating...":"Creating..."]}):x?"Update Method":"Create Method"})]})]})}),A&&v&&e.jsx(Ce,{isOpen:A,onClose:l,title:"Delete Payment Method",maxWidth:"max-w-md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Are you sure you want to delete the payment method ",e.jsxs("strong",{children:['"',v.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. If this method is being used by existing payments, it cannot be deleted."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(C,{variant:"outline",onClick:l,disabled:m,children:"Cancel"}),e.jsx(C,{variant:"danger",onClick:D,disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Delete Method"})]})]})}),e.jsx(Ye,{})]})},Tt=()=>{const[s,o]=i.useState(!1),[p,n]=i.useState(!1),[h,N]=i.useState(null),[S,g]=i.useState({personal:{name:"",title:"",location:"",email:"",phone:"",aboutMe:"",github:"",facebook:"",linkedin:"",twitter:"",instagram:""},skills:{frontend:[],backend:[],database:[],devops:[],design:[],management:[]},experience:[],education:[],certifications:[],projects:[]}),[x,y]=i.useState(null);i.useEffect(()=>{E()},[]);const A=t=>t?(t.projects&&Array.isArray(t.projects)?t.projects=t.projects.map(a=>({...a,tech:Array.isArray(a.tech)?a.tech:typeof a.tech=="string"?a.tech.split(",").map(l=>l.trim()).filter(l=>l):[]})):t.projects||(t.projects=[]),t.experience&&Array.isArray(t.experience)?t.experience=t.experience.map(a=>({...a,achievements:Array.isArray(a.achievements)?a.achievements:[]})):t.experience||(t.experience=[]),t.skills&&typeof t.skills=="object"?Object.keys(t.skills).forEach(a=>{Array.isArray(t.skills[a])||(t.skills[a]=[])}):t.skills||(t.skills={frontend:[],backend:[],database:[],devops:[],design:[],management:[]}),t.education||(t.education=[]),t.certifications||(t.certifications=[]),t.personal||(t.personal={}),console.log("✅ AdminProfileManagement: Data normalized successfully:",t),t):(console.warn("⚠️ AdminProfileManagement: No data received, using defaults"),{personal:{},skills:{frontend:[],backend:[],database:[],devops:[],design:[],management:[]},experience:[],education:[],certifications:[],projects:[]}),E=async(t=0)=>{try{o(!0),N(null),console.log("🔍 AdminProfileManagement: Loading profile data...");const l=await os.getPublicProfile();console.log("✅ AdminProfileManagement: Profile data loaded:",l);const f=A(l);console.log("🔍 AdminProfileManagement: Setting normalized profile data:",f),g(f)}catch(l){if(console.error("❌ AdminProfileManagement: Error loading profile data:",l),t<2){console.log(`🔄 Retrying profile load... (${t+1}/2)`),setTimeout(()=>{E(t+1)},2e3*(t+1));return}N("Failed to load profile data after multiple attempts. Please try again."),Ee.error("Failed to load profile data")}finally{o(!1)}},v=async()=>{try{n(!0),console.log("🔍 AdminProfileManagement: Saving profile data...");try{await os.updateProfile(S),Ee.success("Profile updated successfully!"),y(null),console.log("✅ AdminProfileManagement: Profile saved successfully")}catch(t){if(console.error("❌ AdminProfileManagement: Update failed, trying to create new profile..."),t.response?.status===404)Ee.info("Creating new profile..."),await E(),Ee.success("Profile created successfully!");else throw t}}catch(t){console.error("❌ AdminProfileManagement: Error saving profile data:",t),Ee.error("Failed to save profile data. Please check your authentication.")}finally{n(!1)}},M=(t,a)=>{g(l=>({...l,[t]:[...l[t]||[],a]}))},c=(t,a,l)=>{g(f=>({...f,[t]:f[t].map((D,R)=>R===a?l:D)}))},P=(t,a)=>{g(l=>({...l,[t]:l[t].filter((f,D)=>D!==a)}))};if(s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile data..."})]})});if(!S)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Profile Data Not Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load profile data. Please try refreshing the page."}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]})});const m=S.personal||{},k=S.skills||{},$=S.experience||[],F=S.education||[],q=S.certifications||[],B=(S.projects||[]||[]).map(t=>{try{return{...t,tech:Array.isArray(t.tech)?t.tech:typeof t.tech=="string"?t.tech.split(",").map(a=>a.trim()).filter(a=>a):[]}}catch(a){return console.error("❌ AdminProfileManagement: Error processing project:",t,a),{...t,tech:[]}}});return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(Ne.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Profile Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage your professional profile and platform information"})]}),h&&e.jsx(Ne.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Profile"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:h}),e.jsx("button",{onClick:E,className:"mt-2 text-sm text-red-600 hover:text-red-500 font-medium",children:"Try Again"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-blue-600"}),"Personal Information"]}),e.jsx(C,{onClick:()=>y(x==="personal"?null:"personal"),variant:"outline",size:"sm",children:x==="personal"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="personal"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:m.name,onChange:t=>g(a=>({...a,personal:{...a.personal,name:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",value:m.title,onChange:t=>g(a=>({...a,personal:{...a.personal,title:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:m.location,onChange:t=>g(a=>({...a,personal:{...a.personal,location:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:m.email,onChange:t=>g(a=>({...a,personal:{...a.personal,email:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",value:m.phone,onChange:t=>g(a=>({...a,personal:{...a.personal,phone:t.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GitHub"}),e.jsx("input",{type:"text",value:m.github,onChange:t=>g(a=>({...a,personal:{...a.personal,github:t.target.value}})),placeholder:"github.com/username",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Facebook"}),e.jsx("input",{type:"text",value:m.facebook,onChange:t=>g(a=>({...a,personal:{...a.personal,facebook:t.target.value}})),placeholder:"facebook.com/username or full URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),e.jsx("input",{type:"text",value:m.linkedin,onChange:t=>g(a=>({...a,personal:{...a.personal,linkedin:t.target.value}})),placeholder:"linkedin.com/in/username or full URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Twitter/X"}),e.jsx("input",{type:"text",value:m.twitter,onChange:t=>g(a=>({...a,personal:{...a.personal,twitter:t.target.value}})),placeholder:"twitter.com/username or full URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instagram"}),e.jsx("input",{type:"text",value:m.instagram,onChange:t=>g(a=>({...a,personal:{...a.personal,instagram:t.target.value}})),placeholder:"instagram.com/username or full URL",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"About Me"}),e.jsx("textarea",{value:m.aboutMe,onChange:t=>g(a=>({...a,personal:{...a.personal,aboutMe:t.target.value}})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.title})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.location})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.phone})]}),m.github&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Js,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:m.github})]}),m.facebook&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Os,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-gray-700",children:m.facebook})]}),m.linkedin&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hs,{className:"w-4 h-4 text-blue-700"}),e.jsx("span",{className:"text-gray-700",children:m.linkedin})]}),m.twitter&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gs,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-gray-700",children:m.twitter})]}),m.instagram&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ws,{className:"w-4 h-4 text-pink-600"}),e.jsx("span",{className:"text-gray-700",children:m.instagram})]}),m.aboutMe&&e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsx("p",{className:"text-gray-700 text-sm",children:m.aboutMe})})]})]}),e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5 text-blue-600"}),"Skills"]}),e.jsx(C,{onClick:()=>y(x==="skills"?null:"skills"),variant:"outline",size:"sm",children:x==="skills"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="skills"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Add New Skill Category"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Category name (e.g., Design, Marketing, Languages)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm",onKeyPress:t=>{if(t.key==="Enter"&&t.target.value.trim()){const a=t.target.value.trim().toLowerCase();k[a]||(g(l=>({...l,skills:{...l.skills,[a]:[]}})),t.target.value="")}}}),e.jsxs(C,{onClick:t=>{const a=t.target.previousElementSibling,l=a.value.trim().toLowerCase();l&&!k[l]&&(g(f=>({...f,skills:{...f.skills,[l]:[]}})),a.value="")},variant:"outline",size:"sm",className:"whitespace-nowrap",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Category"]})]})]}),Object.entries(k).map(([t,a])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",value:t,onChange:l=>{const f=l.target.value.trim().toLowerCase();if(f&&f!==t){const D={...k};D[f]=D[t],delete D[t],g(R=>({...R,skills:D}))}},className:"font-semibold text-gray-800 capitalize bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none px-1 py-1",placeholder:"Category name"})}),e.jsx(C,{onClick:()=>{if(Object.keys(k).length>1){const l={...k};delete l[t],g(f=>({...f,skills:l}))}},variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:Object.keys(k).length<=1,children:e.jsx(ie,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"space-y-2",children:[a.map((l,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:D=>{const R=[...a];R[f]=D.target.value,g(G=>({...G,skills:{...G.skills,[t]:R}}))},placeholder:"Skill name",className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx(C,{onClick:()=>{const D=a.filter((R,G)=>G!==f);g(R=>({...R,skills:{...R.skills,[t]:D}}))},variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(ie,{className:"w-3 h-3"})})]},f)),e.jsxs(C,{onClick:()=>{const l=[...a,""];g(f=>({...f,skills:{...f.skills,[t]:l}}))},variant:"outline",size:"sm",className:"w-full",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Skill"]})]})]},t))]}):e.jsx("div",{className:"space-y-4",children:Object.entries(k).map(([t,a])=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2 capitalize",children:t}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map((l,f)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:l},f))})]},t))})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-blue-600"}),"Professional Experience"]}),e.jsx(C,{onClick:()=>y(x==="experience"?null:"experience"),variant:"outline",size:"sm",children:x==="experience"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="experience"?e.jsxs("div",{className:"space-y-4",children:[$.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("input",{type:"text",value:t.position,onChange:l=>c("experience",a,{...t,position:l.target.value}),placeholder:"Job Position",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",value:t.company,onChange:l=>c("experience",a,{...t,company:l.target.value}),placeholder:"Company Name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",value:t.period,onChange:l=>c("experience",a,{...t,period:l.target.value}),placeholder:"Employment Period (e.g., 2020-2023)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("textarea",{value:t.description,onChange:l=>c("experience",a,{...t,description:l.target.value}),placeholder:"Job Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Achievements (one per line)"}),e.jsx("textarea",{value:t.achievements?t.achievements.join(`
`):"",onChange:l=>c("experience",a,{...t,achievements:l.target.value.split(`
`).filter(f=>f.trim())}),placeholder:"List your key achievements...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs(C,{onClick:()=>P("experience",a),variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Remove Experience"]})]},a)),e.jsxs(C,{onClick:()=>M("experience",{position:"",company:"",period:"",description:"",achievements:[]}),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Experience"]})]}):e.jsx("div",{className:"space-y-4",children:$.length>0?$.map((t,a)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.position}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t.period})]}),e.jsx("h4",{className:"text-md font-medium text-blue-600 mb-2",children:t.company}),e.jsx("p",{className:"text-gray-700 mb-3 leading-relaxed",children:t.description}),t.achievements&&t.achievements.length>0&&e.jsx("ul",{className:"list-disc list-inside space-y-1",children:t.achievements.map((l,f)=>e.jsx("li",{className:"text-sm text-gray-600",children:l},f))})]},a)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No experience added yet."})})]}),e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Vs,{className:"w-5 h-5 text-blue-600"}),"Education"]}),e.jsx(C,{onClick:()=>y(x==="education"?null:"education"),variant:"outline",size:"sm",children:x==="education"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="education"?e.jsxs("div",{className:"space-y-4",children:[F.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("input",{type:"text",value:t.degree,onChange:l=>c("education",a,{...t,degree:l.target.value}),placeholder:"Degree/Qualification",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",value:t.school,onChange:l=>c("education",a,{...t,school:l.target.value}),placeholder:"School/University",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",value:t.period,onChange:l=>c("education",a,{...t,period:l.target.value}),placeholder:"Study Period (e.g., 2016-2020)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("textarea",{value:t.description,onChange:l=>c("education",a,{...t,description:l.target.value}),placeholder:"Description of your studies",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs(C,{onClick:()=>P("education",a),variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Remove Education"]})]},a)),e.jsxs(C,{onClick:()=>M("education",{degree:"",school:"",period:"",description:""}),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Education"]})]}):e.jsx("div",{className:"space-y-4",children:F.length>0?F.map((t,a)=>e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.degree}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:t.period})]}),e.jsx("h4",{className:"text-md font-medium text-green-600 mb-1",children:t.school}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.description})]},a)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No education added yet."})})]}),e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5 text-blue-600"}),"Certifications"]}),e.jsx(C,{onClick:()=>y(x==="certifications"?null:"certifications"),variant:"outline",size:"sm",children:x==="certifications"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="certifications"?e.jsxs("div",{className:"space-y-4",children:[q.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 space-y-2",children:[e.jsx("input",{type:"text",value:t.name,onChange:l=>c("certifications",a,{...t,name:l.target.value}),placeholder:"Certification Name",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",value:t.issuer,onChange:l=>c("certifications",a,{...t,issuer:l.target.value}),placeholder:"Issuing Organization",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",value:t.year,onChange:l=>c("certifications",a,{...t,year:l.target.value}),placeholder:"Year",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsxs(C,{onClick:()=>P("certifications",a),variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Remove"]})]},a)),e.jsxs(C,{onClick:()=>M("certifications",{name:"",issuer:"",year:""}),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Certification"]})]}):e.jsx("div",{className:"space-y-3",children:q.length>0?q.map((t,a)=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.issuer," • ",t.year]})]},a)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No certifications added yet."})})]}),e.jsxs(V,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5 text-blue-600"}),"Key Projects"]}),e.jsx(C,{onClick:()=>y(x==="projects"?null:"projects"),variant:"outline",size:"sm",children:x==="projects"?e.jsx(de,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]}),x==="projects"?e.jsxs("div",{className:"space-y-4",children:[B.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("input",{type:"text",value:t.name,onChange:l=>c("projects",a,{...t,name:l.target.value}),placeholder:"Project Name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:t.status,onChange:l=>c("projects",a,{...t,status:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"live",children:"Live"}),e.jsx("option",{value:"development",children:"Development"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx("textarea",{value:t.description,onChange:l=>c("projects",a,{...t,description:l.target.value}),placeholder:"Project Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",value:Array.isArray(t.tech)?t.tech.join(", "):t.tech,onChange:l=>c("projects",a,{...t,tech:l.target.value.split(",").map(f=>f.trim()).filter(f=>f)}),placeholder:"Technologies (comma-separated)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs(C,{onClick:()=>P("projects",a),variant:"outline",size:"sm",className:"w-full text-red-600 hover:text-red-700",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Remove Project"]})]},a)),e.jsxs(C,{onClick:()=>M("projects",{name:"",status:"development",description:"",tech:[]}),variant:"outline",size:"sm",className:"w-full",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Add Project"]})]}):e.jsx("div",{className:"space-y-4",children:B.length>0?B.map((t,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.status==="live"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})]}),e.jsx("p",{className:"text-gray-700 mb-3 text-sm leading-relaxed",children:t.description}),t.tech&&Array.isArray(t.tech)&&t.tech.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tech.map((l,f)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:l},f))})]},a)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No projects added yet."})})]})]})]}),e.jsx(Ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:e.jsx(C,{onClick:v,disabled:p,className:"px-8 py-3 text-lg",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{className:"w-5 h-5 mr-2"}),"Save All Changes"]})})})]})})},la=()=>{const{t:s}=Ve(),{user:o,logout:p}=gs(),n=Xs(),{liveData:h,lastUpdate:N,isConnected:S,manualRefresh:g,addNotification:x}=Qs(),[y,A]=i.useState("dashboard"),[E,v]=i.useState(!0),[M,c]=i.useState(null),[P,m]=i.useState(!1),[k,$]=i.useState(""),[F,q]=i.useState(""),[Z,B]=i.useState(null),[t,a]=i.useState(!0),[l,f]=i.useState(null),[D,R]=i.useState("all"),[G,se]=i.useState(!1),[b,I]=i.useState(!1),[w,j]=i.useState(!1),[W,Y]=i.useState(!1),{jobSeekers:le,loading:Pe,fetchJobSeekers:Ae}=hs({autoFetch:!1,itemsPerPage:5}),{requests:ce,loading:ue,fetchRequests:ge}=ps({autoFetch:!1}),{fetchCategories:ae}=lt({autoFetch:!1}),u=async(_=0)=>{try{a(!0),f(null),console.log(`🔄 Loading dashboard data sequentially... (attempt ${_+1})`);try{se(!0),console.log("📊 Loading dashboard statistics...");const X=await je.getDashboardStats();X.success?(B(X.data),console.log("✅ Dashboard statistics loaded")):console.warn("⚠️ Failed to load dashboard statistics")}catch(X){console.error("❌ Error loading dashboard statistics:",X)}finally{se(!1)}try{I(!0),console.log("👥 Loading job seekers data..."),await Ae(),console.log("✅ Job seekers data loaded")}catch(X){console.error("❌ Error loading job seekers:",X)}finally{I(!1)}try{j(!0),console.log("📝 Loading employer requests..."),await ge(),console.log("✅ Employer requests loaded")}catch(X){console.error("❌ Error loading employer requests:",X)}finally{j(!1)}try{Y(!0),console.log("🏷️ Loading job categories..."),await ae(),console.log("✅ Job categories loaded")}catch(X){console.error("❌ Error loading job categories:",X)}finally{Y(!1)}console.log("✅ Dashboard data loading completed")}catch(X){if(console.error("❌ Critical error in dashboard loading:",X),_<2){console.log(`🔄 Retrying dashboard load... (${_+1}/2)`),setTimeout(()=>{u(_+1)},2e3*(_+1));return}f("Failed to load dashboard data after multiple attempts. Please refresh the page."),x({message:"Dashboard failed to load. Please refresh.",type:"error",duration:1e4})}finally{a(!1)}},r=async()=>{try{a(!0),await u(),x({message:"Dashboard refreshed successfully",type:"success",duration:3e3})}catch{f("Failed to refresh dashboard data"),x({message:"Failed to refresh dashboard",type:"error",duration:5e3})}finally{a(!1)}};i.useEffect(()=>{h.dashboard&&B(h.dashboard),h.requests,h.jobSeekers},[h]);const d=()=>{p(),n("/")},O=_=>{c(_),$(_.adminNotes||""),m(!0)},J=async(_,H,X)=>{try{const me=await je.updateRequestStatus(_,{status:H,adminNotes:X});me.success?(await ge(),m(!1),c(null),$(""),x({message:`Request ${H==="completed"?"marked as completed":"status updated"} successfully!`,type:"success",duration:5e3})):x({message:`Error: ${me.error}`,type:"error",duration:5e3})}catch(me){x({message:"Failed to update request status",type:"error",duration:5e3}),console.error("Request update error:",me)}},te=_=>{q(_)},_e=()=>{};if(i.useEffect(()=>{u()},[]),t)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(oe,{size:"lg",text:"Loading Dashboard..."})});if(l)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Dashboard Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l}),e.jsx(C,{onClick:u,className:"w-full",children:"Retry"})]})});const Fe=()=>{const _=Z||{},H=_.data||_,X=U=>{if(!Array.isArray(U))return[];const K={};return U.forEach(T=>{T.profile?.skills&&T.profile.skills.split(",").map(re=>re.trim()).forEach(re=>{K[re]=(K[re]||0)+1})}),Object.entries(K).map(([T,ee])=>({name:T,count:ee})).sort((T,ee)=>ee.count-T.count).slice(0,5)},me=(U,K=0)=>{if(K===0)return U>0?{change:"+100%",changeType:"increase"}:{change:"0%",changeType:"neutral"};const T=(U-K)/K*100,ee=T>=0?`+${Math.round(T)}%`:`${Math.round(T)}%`,re=T>0?"increase":T<0?"decrease":"neutral";return{change:ee,changeType:re}},Xe=(U,K=7)=>{const T=new Date,ee=new Date(T.getTime()-K*24*60*60*1e3),re=new Date(T.getTime()-K*2*24*60*60*1e3),Be=U.filter(Je=>new Date(Je.createdAt)>=ee).length,xe=U.filter(Je=>{const ss=new Date(Je.createdAt);return ss>=re&&ss<ee}).length;return me(Be,xe)},Qe=Xe(le||[]),Ze=Xe(ce||[]),Ke=me((ce||[]).filter(U=>U.status==="pending").length,Math.max(1,Math.floor((ce||[]).filter(U=>U.status==="pending").length*.8))),es=me(H.overview?.totalCategories||H.totalCategories||0,Math.max(1,Math.floor((H.overview?.totalCategories||H.totalCategories||0)*.9)));return X(le||[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:r,disabled:t,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})}),e.jsx(ot,{isConnected:S,lastUpdate:N,onRefresh:g,className:"text-xs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 ",children:[e.jsx(ze,{title:"Total Job Seekers",value:H.overview?.totalJobSeekers||H.totalJobSeekers||0,icon:Ie,change:Qe.change,changeType:Qe.changeType,color:"text-blue-600",bgColor:"bg-blue-100",description:"Active job seekers",index:0,trendPeriod:"7 days",loading:G}),e.jsx(ze,{title:"Employer Requests",value:H.overview?.totalEmployerRequests||H.totalEmployerRequests||0,icon:we,change:Ze.change,changeType:Ze.changeType,color:"text-green-600",bgColor:"bg-green-100",description:"Total requests",index:1,trendPeriod:"7 days",loading:w}),e.jsx(ze,{title:"Pending Requests",value:H.overview?.pendingEmployerRequests||H.pendingEmployerRequests||0,icon:Le,change:Ke.change,changeType:Ke.changeType,color:"text-orange-600",bgColor:"bg-orange-100",description:"Awaiting review",index:2,trendPeriod:"7 days",loading:w}),e.jsx(ze,{title:"Categories",value:H.overview?.totalCategories||H.totalCategories||0,icon:Re,change:es.change,changeType:es.changeType,color:"text-purple-600",bgColor:"bg-purple-100",description:"Job categories",index:3,showTrend:!1,loading:W})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(V,{title:"Latest Job Seekers",subtitle:"Most recently registered candidates (showing latest 5)",children:Pe?e.jsx(oe,{size:"md",text:"Loading job seekers..."}):(H.recentActivity?.recentJobSeekers||le||[]).length>0?e.jsx("div",{className:"space-y-3",children:(H.recentActivity?.recentJobSeekers||le||[]).slice(0,5).map((U,K)=>{const T=(le||[]).find(xe=>xe.id===U.id)||U,ee=T?.profile?.photo||T?.avatar||T?.photo||null,Be=(xe=>xe?/^https?:\/\//i.test(xe)?xe:`${ne.BASE_URL}/${xe.replace(/^\//,"")}`:null)(ee);return e.jsx(dt,{jobSeeker:{id:U.id,name:U.name||`${U?.profile?.firstName||""} ${U?.profile?.lastName||""}`.trim()||"Unknown",title:"Job Seeker",category:U.skills?.split(",")[0]||"General",avatar:Be,location:U.location||U?.profile?.location||"Unknown",dailyRate:U.dailyRate,monthlyRate:U.monthlyRate},onViewDetails:O,getCategoryColor:et,compact:!0},U.id||K)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ie,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No recent job seekers"})]})}),e.jsxs(V,{title:"Latest Employer Requests",subtitle:"Most recent job requests with candidate details (showing latest 5)",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsx("button",{onClick:()=>R("all"),className:`px-2 py-1 text-xs font-medium rounded-full border transition-colors ${D==="all"?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>R("pending"),className:`px-2 py-1 text-xs font-medium rounded-full border transition-colors ${D==="pending"?"bg-orange-100 text-orange-800 border-orange-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}`,children:"Pending"}),e.jsx("button",{onClick:()=>R("in_progress"),className:`px-2 py-1 text-xs font-medium rounded-full border transition-colors ${D==="in_progress"?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}`,children:"In Progress"}),e.jsx("button",{onClick:()=>R("approved"),className:`px-2 py-1 text-xs font-medium rounded-full border transition-colors ${D==="approved"?"bg-green-100 text-green-800 border-green-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}`,children:"Approved"}),e.jsx("button",{onClick:()=>R("completed"),className:`px-2 py-1 text-xs font-medium rounded-full border transition-colors ${D==="completed"?"bg-purple-100 text-purple-800 border-purple-200":"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}`,children:"Completed"})]})}),ue?e.jsx(oe,{size:"md",text:"Loading requests..."}):(ce||[]).length>0?e.jsx("div",{className:"space-y-3",children:(()=>{const K=(ce||[]).filter(T=>{if(D==="all")return!0;const ee=T.status?.toLowerCase()||"pending",re=D.toLowerCase();return ee===re}).slice(0,5);return K.length===0&&D!=="all"?e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(we,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsxs("p",{className:"text-sm",children:["No ",D," requests found"]})]}):K.map((T,ee)=>e.jsx(ct,{request:{...T,companyName:T.companyName||"Individual Employer",status:T.status||"pending",priority:T.priority||"normal",selectedUser:T.selectedUser||null,requestedCandidate:T.requestedCandidate||null},onContactEmployer:at,onViewDetails:O,getStatusColor:tt,getPriorityColor:st,compact:!0},T.id||ee))})()}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(we,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No recent requests"})]})]})]})]})},qe=()=>{switch(y){case"dashboard":return Fe();case"job-seekers":return e.jsx(nt,{});case"requests":return e.jsx(Ks,{});case"contact-messages":return e.jsx(Lt,{});case"categories":return e.jsx(it,{});case"reports-statistics":return e.jsx(Zs,{});case"reports-tables":return e.jsx(Mt,{});case"settings":return e.jsx($t,{});case"payment-methods":return e.jsx(Ft,{});case"profile":return e.jsx(Tt,{});default:return Fe()}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ft,{user:o,onLogout:d,onSearch:te,onFilter:_e,searchTerm:F,onRefresh:r}),e.jsxs("div",{className:"flex",children:[e.jsx(ht,{sidebarOpen:E,setSidebarOpen:v,navigationItems:[{id:"dashboard",label:"Dashboard",icon:"Home"},{id:"job-seekers",label:"Job Seekers",icon:"Users"},{id:"requests",label:"Employer Requests",icon:"MessageSquare"},{id:"contact-messages",label:"Contact Messages",icon:"Mail"},{id:"categories",label:"Categories",icon:"Briefcase"},{id:"reports",label:"Reports",icon:"BarChart3",subItems:[{id:"reports-statistics",label:"Statistics Reports"},{id:"reports-tables",label:"Table Reports"}]},{id:"settings",label:"Settings",icon:"Settings"},{id:"payment-methods",label:"Payment Methods",icon:"CreditCard"},{id:"profile",label:"Profile",icon:"Shield"}],activeTab:y,setActiveTab:A,user:o,onLogout:d}),e.jsx("div",{className:"flex-1 transition-all duration-300 ml-0",children:e.jsx("div",{className:"p-4 lg:p-6",children:qe()})})]}),P&&M&&e.jsx(Ce,{isOpen:P,onClose:()=>m(!1),title:"Update Request Status",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:M.status,onChange:_=>c({...M,status:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),e.jsx("textarea",{value:k,onChange:_=>$(_.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Add notes about this request..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(C,{onClick:()=>m(!1),variant:"outline",children:"Cancel"}),e.jsx(C,{onClick:()=>J(M.id,M.status,k),className:"bg-red-600 hover:bg-red-700",children:"Update Status"})]})]})})]})};export{la as default};
