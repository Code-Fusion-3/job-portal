import{j as e,m as lt,I as Va,C as aa,aj as it,c as q,aQ as sa,aa as ct,aL as Te,t as $,af as $e,a2 as Ee,aR as Ja,e as Ya,r as l,a7 as Za,ac as qe,aJ as _e,ah as ge,aS as Qa,aT as Xa,as as Vt,V as Jt,X as Fe,Y as es,ab as Yt,w as Zt,x as Qt,ad as ts,aD as as,aP as ss,ar as v}from"./vendor-react-Ciyz3SKt.js";import{C as ra,A as d,u as rs,L as ns,B as w,e as st,i as os}from"./index-r2M3Ub8S.js";import{a as ls}from"./useCategories-Ceb3yNAg.js";import{m as xe}from"./messagingService-DyTZ4vg8.js";import{D as is}from"./DataTable-CwZiR6Bj.js";import{M as Y}from"./Modal-C6o3KIs2.js";import{B as rt}from"./Badge-Yp7w0RGA.js";import{A as nt}from"./Avatar-CUUXCdE3.js";const cs=({title:y,value:o,change:i,changeType:r="increase",icon:m,color:u,bgColor:f,description:C,index:g=0,trendPeriod:k="7 days",showTrend:U=!0,loading:K=!1})=>e.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},children:e.jsxs(ra,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 ${f} rounded-lg flex items-center justify-center`,children:e.jsx(m,{className:`w-6 h-6 ${u}`})}),U&&i&&!K&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${r==="increase"?"text-green-600":r==="decrease"?"text-red-600":"text-gray-500"}`,children:[r==="increase"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}):r==="decrease"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 7l-9.2 9.2M7 7v10h10"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"})}),e.jsx("span",{children:i})]}),e.jsxs("div",{className:"group relative",children:[e.jsx(Va,{className:"w-3 h-3 text-gray-400 cursor-help"}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Trend based on last ",k]})]})]})]}),e.jsx("div",{children:K?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:o}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:y}),e.jsx("p",{className:"text-xs text-gray-500",children:C})]})})]})}),ds=y=>{switch(y?.toLowerCase()){case"pending":return"text-orange-600 bg-orange-50 border-orange-200";case"in_progress":return"text-blue-600 bg-blue-50 border-blue-200";case"approved":return"text-green-600 bg-green-50 border-green-200";case"completed":return"text-purple-600 bg-purple-50 border-purple-200";case"cancelled":return"text-red-600 bg-red-50 border-red-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";case"active":return"text-green-600 bg-green-50 border-green-200";case"inactive":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},Cs=y=>{switch(y?.toLowerCase()){case"pending":return"Pending";case"in_progress":return"In Progress";case"approved":return"Approved";case"completed":return"Completed";case"cancelled":return"Cancelled";case"rejected":return"Rejected";case"active":return"Active";case"inactive":return"Inactive";default:return y||"Unknown"}},Xt=y=>{switch(y){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-orange-600 bg-orange-50 border-orange-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},Ss=y=>{switch(y){case"JavaScript":return"text-blue-600 bg-blue-50 border-blue-200";case"React":return"text-cyan-600 bg-cyan-50 border-cyan-200";case"Python":return"text-green-600 bg-green-50 border-green-200";case"Java":return"text-orange-600 bg-orange-50 border-orange-200";case"Cooking":return"text-red-600 bg-red-50 border-red-200";case"Housekeeping":return"text-purple-600 bg-purple-50 border-purple-200";case"Childcare":return"text-pink-600 bg-pink-50 border-pink-200";case"Gardening":return"text-emerald-600 bg-emerald-50 border-emerald-200";case"Cleaning":return"text-gray-600 bg-gray-50 border-gray-200";case"Driving":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"Teaching":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"Nursing":return"text-rose-600 bg-rose-50 border-rose-200";case"Construction":return"text-amber-600 bg-amber-50 border-amber-200";case"Agriculture":return"text-lime-600 bg-lime-50 border-lime-200";case"domestic":return"text-blue-600 bg-blue-50 border-blue-200";case"care":return"text-pink-600 bg-pink-50 border-pink-200";case"food":return"text-orange-600 bg-orange-50 border-orange-200";case"maintenance":return"text-green-600 bg-green-50 border-green-200";case"sales":return"text-purple-600 bg-purple-50 border-purple-200";case"transport":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"Technology":return"text-blue-600 bg-blue-50 border-blue-200";case"Healthcare":return"text-green-600 bg-green-50 border-green-200";case"Education":return"text-purple-600 bg-purple-50 border-purple-200";case"Manufacturing":return"text-red-600 bg-red-50 border-red-200";case"Services":return"text-gray-600 bg-gray-50 border-gray-200";case"General":return"text-gray-600 bg-gray-50 border-gray-200";case"Job Seeker":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},ea=(y,o)=>{o==="email"?window.open(`mailto:${y.email}`,"_blank"):o==="phone"&&window.open(`tel:${y.phone}`,"_blank")};class ot{static async getWorkflowNotifications(){try{const o=await fetch(`${d.BASE_URL}/notifications/workflow`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error fetching workflow notifications:",o),o}}static async markAsRead(o){try{const i=await fetch(`${d.BASE_URL}/notifications/${o}/read`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}catch(i){throw console.error("Error marking notification as read:",i),i}}static async markAllAsRead(){try{const o=await fetch(`${d.BASE_URL}/notifications/mark-all-read`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error marking all notifications as read:",o),o}}static async createWorkflowNotification(o,i,r,m){try{const u=await fetch(`${d.BASE_URL}/notifications/workflow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({type:o,message:i,requestId:r,status:m})});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(u){throw console.error("Error creating workflow notification:",u),u}}static async getNotificationCount(){try{const o=await fetch(`${d.BASE_URL}/notifications/count`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error fetching notification count:",o),o}}static async getUserNotifications(){try{const o=await fetch(`${d.BASE_URL}/notifications/user`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error fetching user notifications:",o),o}}static async getNotificationStats(){try{const o=await fetch(`${d.BASE_URL}/notifications/stats`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw console.error("Error fetching notification stats:",o),o}}}class N{static async approveRequest(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/approve`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error approving request:",r),r}}static async rejectRequest(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({reason:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error rejecting request:",r),r}}static async requestFirstPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/request-first-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error requesting first payment:",r),r}}static async approveFirstPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/approve-first-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error approving first payment:",r),r}}static async rejectFirstPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/reject-first-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({reason:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error rejecting first payment:",r),r}}static async requestSecondPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/request-second-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error requesting second payment:",r),r}}static async approveFullDetailsRequest(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/approve-full-details-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error approving full details request:",r),r}}static async rejectFullDetailsRequest(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/reject-full-details-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({reason:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error rejecting full details request:",r),r}}static async approveSecondPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/approve-second-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error approving second payment:",r),r}}static async rejectSecondPayment(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/reject-second-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({reason:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error rejecting second payment:",r),r}}static async updateCandidateAvailability(o,i=""){try{const r=await fetch(`${d.BASE_URL}/admin/employer-requests/${o}/update-candidate-availability`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({notes:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error updating candidate availability:",r),r}}static async requestFullDetails(o,i=""){try{const r=await fetch(`${d.BASE_URL}/employer/requests/${o}/request-full-details`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({reason:i})});if(!r.ok){const u=await r.json();throw new Error(u.error||`HTTP error! status: ${r.status}`)}return await r.json()}catch(r){throw console.error("Error requesting full details:",r),r}}static async markHiringDecision(o,i,r=""){try{const m=await fetch(`${d.BASE_URL}/employer/requests/${o}/mark-${i}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({decision:i,notes:r})});if(!m.ok){const f=await m.json();throw new Error(f.error||`HTTP error! status: ${m.status}`)}return await m.json()}catch(m){throw console.error("Error marking hiring decision:",m),m}}static async getPhotoAccess(o){try{const i=await fetch(`${d.BASE_URL}/employer/requests/${o}/photo-access`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!i.ok){const m=await i.json();throw new Error(m.error||`HTTP error! status: ${i.status}`)}return await i.json()}catch(i){throw console.error("Error getting photo access:",i),i}}static async getFullDetails(o){try{const i=await fetch(`${d.BASE_URL}/employer/requests/${o}/full-details`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!i.ok){const m=await i.json();throw new Error(m.error||`HTTP error! status: ${i.status}`)}return await i.json()}catch(i){throw console.error("Error getting full details:",i),i}}static async getAllAdminRequests(o={}){try{const{page:i=1,limit:r=10,status:m,priority:u,search:f,sortBy:C,sortOrder:g,category:k,dateFrom:U,dateTo:K,...dt}=o,F=new URLSearchParams({page:i.toString(),limit:r.toString(),...dt});m&&F.append("status",m),u&&F.append("priority",u),f&&F.append("search",f),C&&F.append("sortBy",C),g&&F.append("sortOrder",g),k&&F.append("category",k),U&&F.append("dateFrom",U),K&&F.append("dateTo",K);const re=await fetch(`${d.BASE_URL}/admin/employer-requests?${F}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(!re.ok){const j=await re.json();throw new Error(j.error||`HTTP error! status: ${re.status}`)}const he=await re.json();return{success:!0,data:{requests:he.requests||[],pagination:he.pagination||{page:parseInt(i),limit:parseInt(r),total:0,totalPages:1}}}}catch(i){return console.error("Error getting all admin requests:",i),{success:!1,error:i.message}}}}const ta=({status:y,className:o=""})=>{const r=(m=>{switch(m){case"pending":return{icon:e.jsx($e,{className:"w-5 h-5"}),color:"text-yellow-600",bgColor:"bg-yellow-100",label:"Pending Review",description:"Request is waiting for admin approval"};case"approved":return{icon:e.jsx(q,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"bg-green-100",label:"Approved",description:"Request approved, payment required"};case"first_payment_required":return{icon:e.jsx(Te,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"First Payment Required",description:"Pay 5,000 RWF for photo access"};case"first_payment_confirmed":return{icon:e.jsx(q,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"Payment Confirmed",description:"Waiting for admin approval"};case"photo_access_granted":return{icon:e.jsx($,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"bg-green-100",label:"Photo Access Granted",description:"You can view candidate photo"};case"full_details_requested":return{icon:e.jsx(ct,{className:"w-5 h-5"}),color:"text-purple-600",bgColor:"bg-purple-100",label:"Full Details Requested",description:"Waiting for admin approval"};case"second_payment_required":return{icon:e.jsx(Te,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"Second Payment Required",description:"Pay for full details access"};case"second_payment_confirmed":return{icon:e.jsx(q,{className:"w-5 h-5"}),color:"text-blue-600",bgColor:"bg-blue-100",label:"Second Payment Confirmed",description:"Waiting for admin approval"};case"full_access_granted":return{icon:e.jsx(ct,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"bg-green-100",label:"Full Access Granted",description:"You can view all candidate details"};case"hiring_decision_made":return{icon:e.jsx(sa,{className:"w-5 h-5"}),color:"text-purple-600",bgColor:"bg-purple-100",label:"Hiring Decision Made",description:"Waiting for admin to update availability"};case"completed":return{icon:e.jsx(q,{className:"w-5 h-5"}),color:"text-green-600",bgColor:"bg-green-100",label:"Completed",description:"Request completed successfully"};case"cancelled":return{icon:e.jsx(it,{className:"w-5 h-5"}),color:"text-red-600",bgColor:"bg-red-100",label:"Cancelled",description:"Request was cancelled"};default:return{icon:e.jsx(aa,{className:"w-5 h-5"}),color:"text-gray-600",bgColor:"bg-gray-100",label:"Unknown Status",description:"Status not recognized"}}})(y);return e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${r.bgColor} ${r.color} ${o}`,children:[r.icon,e.jsx("span",{children:r.label})]})},ms=({currentStatus:y,className:o=""})=>{const i=[{id:"pending",label:"Request Submitted",icon:e.jsx(Ee,{className:"w-5 h-5"}),description:"Request submitted and waiting for admin review"},{id:"approved",label:"Request Approved",icon:e.jsx(q,{className:"w-5 h-5"}),description:"Admin approved the request"},{id:"first_payment_required",label:"First Payment",icon:e.jsx(Te,{className:"w-5 h-5"}),description:"Pay 5,000 RWF for photo access"},{id:"photo_access_granted",label:"Photo Access",icon:e.jsx($,{className:"w-5 h-5"}),description:"View candidate photo and basic info"},{id:"second_payment_required",label:"Second Payment",icon:e.jsx(Te,{className:"w-5 h-5"}),description:"Pay for full details access"},{id:"full_access_granted",label:"Full Access",icon:e.jsx(ct,{className:"w-5 h-5"}),description:"View all candidate details"},{id:"hiring_decision_made",label:"Hiring Decision",icon:e.jsx(sa,{className:"w-5 h-5"}),description:"Mark candidate as hired or not hired"},{id:"completed",label:"Completed",icon:e.jsx(q,{className:"w-5 h-5"}),description:"Request completed successfully"}],r=f=>{const C=["pending","approved","first_payment_required","first_payment_confirmed","photo_access_granted","full_details_requested","second_payment_required","second_payment_confirmed","full_access_granted","hiring_decision_made","completed"],g=C.indexOf(y),k=C.indexOf(f);return g===-1||k===-1?"pending":k<g?"completed":k===g?"current":"pending"},m=(f,C)=>C==="completed"?e.jsx(q,{className:"w-5 h-5 text-green-600"}):C==="current"?e.jsx($e,{className:"w-5 h-5 text-blue-600"}):e.jsx(Ja,{className:"w-5 h-5 text-gray-400"}),u=f=>{switch(f){case"completed":return"text-green-600 bg-green-50 border-green-200";case"current":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-400 bg-gray-50 border-gray-200"}};return e.jsxs("div",{className:`space-y-4 ${o}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request Progress"}),e.jsx("div",{className:"space-y-3",children:i.map((f,C)=>{const g=r(f.id),k=C===i.length-1;return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center ${u(g)}`,children:m(f,g)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:`text-sm font-medium ${g==="current"?"text-blue-900":g==="completed"?"text-green-900":"text-gray-500"}`,children:f.label}),g==="current"&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Current"})]}),e.jsx("p",{className:`text-sm mt-1 ${g==="current"?"text-blue-700":g==="completed"?"text-green-700":"text-gray-400"}`,children:f.description})]}),!k&&e.jsx("div",{className:"absolute left-5 top-10 w-0.5 h-8 bg-gray-200"})]},f.id)})})]})},us=({stats:y,className:o=""})=>e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${o}`,children:y.map((i,r)=>e.jsx(cs,{...i,index:r},i.title))}),ps=()=>{const{t:y}=Ya(),{user:o}=rs(),[i,r]=l.useState([]),[m,u]=l.useState(!1),[f,C]=l.useState(null),[g,k]=l.useState(1),[U,K]=l.useState(1),[dt,F]=l.useState(0),[re,he]=l.useState({}),[j,na]=l.useState(""),[L,Le]=l.useState({}),[mt,ut]=l.useState(!1),A=l.useCallback(async(t=g,s=j,n=L)=>{u(!0),C(null);try{const c={page:t,limit:10,search:s,...n},p=await N.getAllAdminRequests(c);p.success?(r(p.data.requests||[]),K(p.data.pagination?.totalPages||1),F(p.data.pagination?.total||0),k(p.data.pagination?.page||1),he(p.data.pagination||{})):C(p.error||"Failed to fetch requests")}catch(c){C("An error occurred while fetching requests"),console.error("Error fetching requests:",c)}finally{u(!1)}},[g,j,L]),Z=l.useCallback(t=>{k(t),A(t,j,L)},[A,j,L]);l.useCallback(()=>{g<U&&Z(g+1)},[g,U,Z]),l.useCallback(()=>{g>1&&Z(g-1)},[g,Z]),l.useMemo(()=>g<U,[g,U]),l.useMemo(()=>g>1,[g]);const pt=l.useCallback(()=>{A(g,j,L)},[A,g,j,L]);l.useEffect(()=>{A()},[]);const V=l.useCallback(t=>{na(t),k(1),A(1,t,L)},[L,A]),Q=l.useCallback((t,s)=>{const n={...L,[t]:s};Le(n),Ot(c=>({...c,[t]:s})),k(1),A(1,j,n)},[L,j,A]);l.useCallback(t=>{V(t)},[V]),l.useCallback(t=>{Le(t),k(1),A(1,j,t)},[j,A]);const oa=()=>{},la=()=>{},ia=async()=>{if(!window.confirm(`âš ï¸ DANGER: This will permanently delete all testing data!

This includes:
â€¢ All job seekers and their profiles
â€¢ All employer accounts and requests
â€¢ All payments and messages
â€¢ All notifications and progress data

This action CANNOT be undone!

Admin accounts and job categories will be preserved.

Are you absolutely sure you want to continue?`)||!window.confirm(`ðŸš¨ FINAL WARNING!

You are about to delete ALL testing data.

Type "DELETE" in the next prompt to confirm:`))return;if(window.prompt('Type "DELETE" to confirm deletion:')!=="DELETE"){alert('Deletion cancelled. You must type "DELETE" exactly as shown.');return}ut(!0);try{const c=await os.cleanTestingData();if(c.success)alert(`âœ… Testing data cleaned successfully!

Summary:
â€¢ ${c.summary.users||0} users deleted
â€¢ ${c.summary.employerRequests||0} employer requests deleted
â€¢ ${c.summary.profiles||0} job seeker profiles deleted
â€¢ ${c.summary.payments||0} payments deleted
â€¢ ${c.summary.messages||0} messages deleted
â€¢ ${c.summary.notifications||0} notifications deleted
â€¢ ${c.summary.contacts||0} contacts deleted
â€¢ ${c.summary.auditLogs||0} audit logs deleted

Preserved: Admin accounts, Job categories`),A(1,"",{});else throw new Error(c.details||"Failed to clean data")}catch(c){console.error("Error cleaning testing data:",c),alert(`âŒ Failed to clean testing data!

Error: ${c.message}

Please check the console for more details and try again.`)}finally{ut(!1)}},gt=()=>{},{categories:ca,loadingCategories:xt,fetchCategories:ht}=ls(),X={status:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"first_payment_required",label:"First Payment Required"},{value:"first_payment_confirmed",label:"First Payment Confirmed"},{value:"photo_access_granted",label:"Photo Access Granted"},{value:"full_details_requested",label:"Full Details Requested"},{value:"second_payment_required",label:"Second Payment Required"},{value:"second_payment_confirmed",label:"Second Payment Confirmed"},{value:"full_access_granted",label:"Full Access Granted"},{value:"hiring_decision_made",label:"Hiring Decision Made"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"payment_required",label:"Payment Required (Legacy)"},{value:"payment_confirmed",label:"Payment Confirmed (Legacy)"}],priority:[{value:"",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"normal",label:"Normal"},{value:"low",label:"Low"}],category:[{value:"",label:"All Categories"},...(ca||[]).map(t=>({value:t.name_en.toLowerCase(),label:t.name_en}))],dateRange:[{value:"",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"quarter",label:"This Quarter"},{value:"year",label:"This Year"}],monthlyRateRange:[{value:"",label:"All Rates"},{value:"0-50000",label:"0 - 50,000 frw"},{value:"50000-100000",label:"50,000 - 100,000 frw"},{value:"100000-200000",label:"100,000 - 200,000 frw"},{value:"200000+",label:"200,000+ frw"}]},[a,_]=l.useState(null),[Ie,Me]=l.useState(!1),[ne,ee]=l.useState(!1),[B,oe]=l.useState(null),[yt,ye]=l.useState(""),[le,Oe]=l.useState(""),[te,bt]=l.useState(!1),[ft,be]=l.useState(""),[gs,He]=l.useState(null),[fe,jt]=l.useState(!1),[Nt,je]=l.useState(""),[xs,vt]=l.useState(!1),[hs,wt]=l.useState("picture"),[ie,kt]=l.useState(!1),[Ct,E]=l.useState(!1),[Ue,da]=l.useState(null),[ce,I]=l.useState(!1),[St,M]=l.useState(""),[P,Ne]=l.useState(""),[Pt,ve]=l.useState(""),[we,Be]=l.useState(""),[ma,At]=l.useState({}),[Rt,de]=l.useState([]),[ke,Dt]=l.useState(!1),[me,ue]=l.useState(0),[ua,qt]=l.useState(!1),[Ce,ze]=l.useState(!1),[_t,pe]=l.useState([]),[Se,Pe]=l.useState(""),[Ae,Re]=l.useState(!1),[Ft,ae]=l.useState(""),[Et,We]=l.useState(!1),[pa,ga]=l.useState([]),[Ge,Tt]=l.useState(!1),[$t,J]=l.useState(""),[h,O]=l.useState({amount:"",currency:"RWF",description:"",paymentMethodId:"",paymentType:"photo_access",dueDate:""}),[Lt,Ke]=l.useState(!1),[Ve,It]=l.useState(!1),[Mt,G]=l.useState(""),[D,se]=l.useState({action:"approve",notes:""}),[xa,De]=l.useState(!1),[b,Ot]=l.useState({status:"",priority:"",category:"",dateRange:"",monthlyRateRange:""}),[Je,ha]=l.useState(!1),[ya,Ht]=l.useState(!1),S=l.useCallback(()=>{ee(!1),oe(null),_(null),Oe(""),ye(""),be(""),Be(""),ve(""),He(null),je(""),Me(!1),ze(!1),pe([]),Pe(""),ae(""),J(""),We(!1),O({amount:"",currency:"RWF",description:"",paymentMethodId:"",paymentType:"photo_access",dueDate:""}),J(""),Ke(!1),se({action:"approve",notes:""}),G(""),De(!1)},[]),ba=async t=>{try{_(t),ze(!0),Re(!0),ae("");const s=await xe.getMessagesByRequest(t.id);pe(s.messages||[])}catch(s){console.error("Error opening messaging:",s),ae("Failed to load messages"),v.error("Failed to load messages")}finally{Re(!1)}},fa=()=>{ze(!1),pe([]),Pe(""),ae("")},Ut=async()=>{if(!(!Se.trim()||!a))try{Re(!0),ae(""),await xe.sendMessage(a.id,{content:Se.trim(),messageType:"text"}),Pe("");const t=await xe.getMessagesByRequest(a.id);pe(t.messages||[]),v.success("Message sent successfully")}catch(t){console.error("Error sending message:",t),ae("Failed to send message"),v.error("Failed to send message")}finally{Re(!1)}},ja=async()=>{if(a)try{await xe.markMessagesAsRead(a.id);const t=await xe.getMessagesByRequest(a.id);pe(t.messages||[])}catch(t){console.error("Error marking messages as read:",t)}};l.useEffect(()=>{Ce&&a&&ja()},[Ce,a]);const Bt=async()=>{try{qt(!0);const t=await ot.getWorkflowNotifications();de(t.notifications||[]),ue(t.unreadCount||0)}catch(t){console.error("Error fetching notifications:",t),de([]),ue(0)}finally{qt(!1)}},Na=async t=>{try{await ot.markAsRead(t),de(s=>s.map(n=>n.id===t?{...n,isRead:!0}:n)),ue(s=>Math.max(0,s-1))}catch(s){console.error("Error marking notification as read:",s)}},va=async()=>{try{await ot.markAllAsRead(),de(t=>t.map(s=>({...s,isRead:!0}))),ue(0)}catch(t){console.error("Error marking all notifications as read:",t)}},wa=(t,s,n,c)=>{const p={id:Date.now(),type:t,message:s,requestId:n,status:c,timestamp:new Date,isRead:!1};de(H=>[p,...H]),ue(H=>H+1),v.success(s,{duration:5e3,position:"top-right"})};l.useEffect(()=>{Bt();const t=setInterval(Bt,3e4);return()=>clearInterval(t)},[]),l.useEffect(()=>{const t=s=>{ke&&!s.target.closest(".notification-dropdown")&&Dt(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[ke]);const ka=async()=>{try{const s=await(await fetch(`${d.BASE_URL}/payment-methods/active`)).json();ga(s.paymentMethods||[])}catch(t){console.error("Error fetching payment methods:",t),v.error("Failed to load payment methods")}},Ca=async t=>{_(t),We(!0),O({amount:t.paymentAmount||"5000",currency:t.paymentCurrency||"RWF",description:t.paymentDescription||"",paymentMethodId:"",paymentType:"photo_access",dueDate:""}),await ka()},Ye=()=>{We(!1),O({amount:"",currency:"RWF",description:"",paymentMethodId:"",paymentType:"photo_access",dueDate:""}),J("")},Sa=async t=>{if(t.preventDefault(),!h.paymentMethodId||!h.amount){J("Please select a payment method and enter amount");return}try{Tt(!0),J("");const s=await fetch(`${d.BASE_URL}/payments/request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`},body:JSON.stringify({employerRequestId:a.id,amount:h.amount,currency:h.currency,description:h.description,paymentMethodId:h.paymentMethodId,paymentType:h.paymentType,dueDate:h.dueDate||null})}),n=await s.json();s.ok?(v.success("Payment request sent successfully!"),Ye(),R()):J(n.error||"Failed to send payment request")}catch(s){console.error("Error sending payment request:",s),J("Network error. Please try again.")}finally{Tt(!1)}},Pa=async t=>{console.log("Opening request details modal for request:",t);try{De(!0);const s=await fetch(`${d.BASE_URL}/admin/employer-requests/${t.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(s.ok){const n=await s.json();console.log("Fetched full request data from backend:",n),console.log("Employer Account data:",n.employerAccount),console.log("Employer User data:",n.employerAccount?.user);const c=Qe(n);console.log("Transformed request data:",c),_(c)}else console.error("Failed to fetch full request data"),_(t)}catch(s){console.error("Error fetching request details:",s),_(t)}finally{De(!1)}Me(!0)},Aa=async t=>{console.log("Opening payment approval modal for request:",t),console.log("Request latestPayment:",t.latestPayment),console.log("Request _backendData:",t._backendData);try{const s=await fetch(`${d.BASE_URL}/admin/employer-requests/${t.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem(d.AUTH_CONFIG.tokenKey)}`}});if(s.ok){const n=await s.json();console.log("Fetched full request data from backend:",n);const c=Qe(n);console.log("Transformed request data:",c),_(c)}else console.error("Failed to fetch full request data"),_(t)}catch(s){console.error("Error fetching request details:",s),_(t)}Ke(!0),se({action:"approve",notes:""}),G("")},Ze=()=>{Ke(!1),se({action:"approve",notes:""}),G("")},Ra=async t=>{if(t.preventDefault(),!a){G("No request selected");return}try{It(!0),G("");let s;const n=a.id;if(a.status==="first_payment_confirmed"||a.status==="payment_confirmed")D.action==="approve"?s=await N.approveFirstPayment(n,D.notes):s=await N.rejectFirstPayment(n,D.notes);else if(a.status==="second_payment_confirmed")D.action==="approve"?s=await N.approveSecondPayment(n,D.notes):s=await N.rejectSecondPayment(n,D.notes);else{G("Invalid status for payment approval");return}if(s){const c=D.action==="approve"?"approved":"rejected";v.success(`Payment ${c} successfully!`),Ze(),R()}else G("Failed to process payment approval")}catch(s){console.error("Error processing payment approval:",s),G(s.message||"Network error. Please try again.")}finally{It(!1)}},zt=l.useCallback(()=>{},[ne,B,a,Ie,le,yt,we]),Qe=t=>{if(!t)return null;try{const s=n=>{if(!n||n==="Not specified")return"Not specified";if(typeof n=="number")return new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(n);if(typeof n=="string"){const c=parseFloat(n);return isNaN(c)?n:new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(c)}return"Not specified"};return{id:t.id,employerName:t.employerAccount?.user?.name||t.employerAccount?.companyName||t.name||"Unknown",companyName:t.employerAccount?.companyName||t.companyName||"Private",candidateName:t.requestedCandidate&&`${t.requestedCandidate.profile?.firstName||""} ${t.requestedCandidate.profile?.lastName||""}`.trim()||"Not specified",position:t.requestedCandidate?.profile?.skills||"General",status:t.status||"pending",priority:t.priority||"normal",date:t.createdAt,monthlyRate:s(t.requestedCandidate?.profile?.monthlyRate),message:t.message||"",employerContact:{email:t.employerAccount?.user?.email||t.employerAccount?.email||t.email||"",phone:t.employerAccount?.phoneNumber||t.employerAccount?.user?.phoneNumber||t.phoneNumber||""},employerDetails:{companyAddress:t.employerAccount?.companyAddress||"",industry:t.employerAccount?.industry||"",companySize:t.employerAccount?.companySize||"",website:t.employerAccount?.website||"",description:t.employerAccount?.description||"",establishedYear:t.employerAccount?.establishedYear||"",contactPerson:t.employerAccount?.contactPerson||""},adminNotes:"",lastContactDate:t.updatedAt,isCompleted:t.status==="completed",category:t.requestedCandidate?.profile?.jobCategory?.name_en||"General",latestPayment:t.payments&&t.payments.length>0?{id:t.payments[0].id,amount:t.payments[0].amount,currency:t.payments[0].currency||"RWF",paymentType:t.payments[0].paymentType,status:t.payments[0].status,confirmationName:t.payments[0].confirmationName,confirmationPhone:t.payments[0].confirmationPhone,confirmationDate:t.payments[0].confirmationDate,paymentReference:t.payments[0].paymentReference,adminNotes:t.payments[0].adminNotes,createdAt:t.payments[0].createdAt,updatedAt:t.payments[0].updatedAt}:null,candidateExperience:t.requestedCandidate?.profile?.experience||"Not specified",candidateExperienceLevel:t.requestedCandidate?.profile?.experienceLevel||"Not specified",candidateEducation:t.requestedCandidate?.profile?.educationLevel||"Not specified",candidateLocation:t.requestedCandidate?.profile?.location||"Not specified",candidateCity:t.requestedCandidate?.profile?.city||"Not specified",candidateCountry:t.requestedCandidate?.profile?.country||"Not specified",candidateContact:t.requestedCandidate?.profile?.contactNumber||"Not specified",candidateEmail:t.requestedCandidate?.email||"Not specified",candidateLanguages:t.requestedCandidate?.profile?.languages||"Not specified",candidateCertifications:t.requestedCandidate?.profile?.certifications||"Not specified",candidateAvailability:t.requestedCandidate?.profile?.availability||"Not specified",candidateDescription:t.requestedCandidate?.profile?.description||"Not specified",candidateGender:t.requestedCandidate?.profile?.gender||"Not specified",candidateMaritalStatus:t.requestedCandidate?.profile?.maritalStatus||"Not specified",candidateIdNumber:t.requestedCandidate?.profile?.idNumber||"Not specified",candidateReferences:t.requestedCandidate?.profile?.references||"Not specified",_backendData:t}}catch(s){return console.error("Error transforming request data:",s),{id:t?.id||"unknown",employerName:"Data unavailable",companyName:"Data unavailable",candidateName:"Data unavailable",position:"Data unavailable",status:"pending",priority:"normal",date:new Date,monthlyRate:"Data unavailable",message:"Data unavailable",employerContact:{email:"",phone:""},adminNotes:"",lastContactDate:new Date,isCompleted:!1,category:"Data unavailable",_backendData:t,_hasError:!0}}},Xe=l.useMemo(()=>!i||!Array.isArray(i)?[]:i.map(Qe).filter(Boolean),[i]),z=Xe.map(t=>t._hasError?{...t,employerName:"Data unavailable",companyName:"Data unavailable",candidateName:"Data unavailable",position:"Data unavailable",status:"pending",priority:"normal",monthlyRate:"Data unavailable",message:"Data unavailable",employerContact:{email:"",phone:""}}:{...t,employerName:t.employerName||"Unknown",companyName:t.companyName||"Private",candidateName:t.candidateName||"Not specified",position:t.position||"General",status:t.status||"pending",priority:t.priority||"normal",monthlyRate:t.monthlyRate||"Not specified",message:t.message||"",employerContact:{email:t.employerContact?.email||"",phone:t.employerContact?.phone||""}});Za.useEffect(()=>{try{Xe.forEach(t=>{const s=t._backendData?.requestedCandidate?.profile?.photo||t._backendData?.requestedCandidate?.photo||null})}catch(t){console.log("EmployerRequestsPage: debug logging error",t)}},[Xe]);const Da=[{key:"employerInfo",label:"Employer",sortable:!1,render:t=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Yt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.employerName}),e.jsx("div",{className:"text-sm text-gray-500",children:t.companyName})]})]})},{key:"candidateInfo",label:"Candidate",sortable:!1,render:t=>{const s=t._backendData?.requestedCandidate,n=s?.profile?.photo||s?.photo||null,c=n?/^https?:\/\//i.test(n)?n:`${d.BASE_URL}/${n.replace(/^\//,"")}`:null;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(nt,{src:c,alt:t.candidateName,size:"sm",fallback:t.candidateName,fallbackSrc:st}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.candidateName}),e.jsx("div",{className:"text-sm text-gray-500",children:t.position})]})]})}},{key:"category",label:"Category",sortable:!0,searchable:!0,type:"badge",badgeColor:t=>{switch(t?.toLowerCase()){case"domestic":return"text-blue-600 bg-blue-50 border-blue-200";case"care":return"text-pink-600 bg-pink-50 border-pink-200";case"food":return"text-orange-600 bg-orange-50 border-orange-200";case"maintenance":return"text-green-600 bg-green-50 border-green-200";case"transport":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"general":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}},{key:"monthlyRate",label:"Monthly Rate",sortable:!0,type:"text"},{key:"status",label:"Status",sortable:!0,type:"badge",badgeColor:ds},{key:"priority",label:"Priority",sortable:!0,type:"badge",badgeColor:Xt},{key:"date",label:"Request Date",sortable:!0,type:"date"},{key:"actions",label:"Actions",sortable:!1,render:t=>e.jsxs("div",{className:"flex items-center gap-1",children:[at(t).slice(0,4).map((s,n)=>{const c=s.icon,p=ma[`${s.key}-${t.id}`];return e.jsxs("button",{onClick:()=>et(s.key,t),disabled:p,className:`relative group p-2 rounded-lg transition-all duration-200 hover:scale-110 ${s.className} border border-gray-200 hover:border-current ${p?"opacity-50 cursor-not-allowed":""}`,title:s.title,children:[p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):e.jsx(c,{className:"w-4 h-4"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:[p?"Processing...":s.title,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]},n)}),at(t).length>4&&e.jsxs("button",{onClick:()=>et("openActions",t),className:"relative group p-2 rounded-lg transition-all duration-200 hover:scale-110 text-gray-600 hover:bg-gray-50 border border-gray-200 hover:border-gray-400",title:"More actions",children:[e.jsx(ss,{className:"w-4 h-4"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-1 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["More actions",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]})]})}];l.useEffect(()=>{ht()},[ht]),l.useEffect(()=>()=>{S()},[S]),l.useEffect(()=>{zt()},[zt]);const T=l.useMemo(()=>{let t=z||[];if(b.status&&b.status!=="all"&&(t=t.filter(s=>s.status===b.status)),j.trim()){const s=j.toLowerCase();t=t.filter(n=>n.employerName?.toLowerCase().includes(s)||n.companyName?.toLowerCase().includes(s)||n.candidateName?.toLowerCase().includes(s)||n.message?.toLowerCase().includes(s)||n.position?.toLowerCase().includes(s))}if(b.status&&(t=t.filter(s=>s.status===b.status)),b.priority&&(t=t.filter(s=>s.priority===b.priority)),b.category&&(t=t.filter(s=>s.category?.toLowerCase()===b.category.toLowerCase())),b.dateRange){const s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate());t=t.filter(c=>{const p=new Date(c.date);switch(b.dateRange){case"today":return p>=n;case"week":const H=new Date(n.getTime()-10080*60*1e3);return p>=H;case"month":const Wa=new Date(n.getTime()-720*60*60*1e3);return p>=Wa;case"quarter":const Ga=new Date(n.getTime()-2160*60*60*1e3);return p>=Ga;case"year":const Ka=new Date(n.getTime()-365*24*60*60*1e3);return p>=Ka;default:return!0}})}return b.monthlyRateRange&&(t=t.filter(s=>{const n=s.monthlyRate;if(n==="Not specified")return!1;const c=typeof n=="string"?parseFloat(n.replace(/[^\d.]/g,"")):n;if(isNaN(c))return!1;switch(b.monthlyRateRange){case"0-50000":return c>=0&&c<=5e4;case"50000-100000":return c>5e4&&c<=1e5;case"100000-200000":return c>1e5&&c<=2e5;case"200000+":return c>2e5;default:return!0}})),t},[z,j,b]),qa=l.useCallback(t=>{V(t),Ht(!0);const s=setTimeout(()=>{Ht(!1)},300);return()=>clearTimeout(s)},[]),Wt=l.useCallback(()=>{const t={status:"",priority:"",category:"",dateRange:"",monthlyRateRange:""};Ot(t),Le(t),V(""),k(1),A(1,"",t)},[A,V]),W=l.useMemo(()=>{let t=0;return j.trim()&&t++,Object.values(b).forEach(s=>{s&&t++}),t},[j,b]),_a=l.useMemo(()=>[{title:"Total Requests",value:T.length.toString(),change:`+${T.length-(z||[]).length}`,changeType:T.length>=(z||[]).length?"increase":"decrease",icon:qe,color:"text-blue-600",bgColor:"bg-blue-50",description:`${W>0?"Filtered":"All"} employer requests`},{title:"Pending Review",value:T.filter(t=>t.status==="pending").length.toString(),change:"+2",changeType:"increase",icon:$e,color:"text-orange-600",bgColor:"bg-orange-50",description:"Awaiting admin approval"},{title:"Payment Pending",value:T.filter(t=>["first_payment_required","second_payment_required","first_payment_confirmed","second_payment_confirmed","payment_required","payment_confirmed"].includes(t.status)).length.toString(),change:"+1",changeType:"increase",icon:_e,color:"text-yellow-600",bgColor:"bg-yellow-50",description:"Payment processing"},{title:"Completed",value:T.filter(t=>t.status==="completed").length.toString(),change:"+3",changeType:"increase",icon:q,color:"text-green-600",bgColor:"bg-green-50",description:"Successfully closed"}],[T,z,W]),R=l.useCallback(()=>{Z(1),pt()},[Z,pt]),et=(t,s)=>{switch(_(s),ye(s.adminNotes||""),t){case"openActions":ee(!0),oe(null);break;case"view":Pa(s),ee(!1);break;case"contact":ea(s.employerContact,"email"),S();break;case"call":ea(s.employerContact,"phone"),S();break;case"reply":oe("reply"),ee(!0);break;case"message":ba(s);break;case"payment":Ca(s);break;case"paymentApproval":Aa(s);break;case"select":oe("select"),ee(!0);break;case"approveRequest":x("approveRequest",s);break;case"rejectRequest":x("rejectRequest",s);break;case"requestFirstPayment":x("requestFirstPayment",s);break;case"viewPaymentDetails":x("viewPaymentDetails",s);break;case"approveFirstPayment":x("approveFirstPayment",s);break;case"rejectFirstPayment":x("rejectFirstPayment",s);break;case"requestSecondPayment":x("requestSecondPayment",s);break;case"viewPhotoAccess":x("viewPhotoAccess",s);break;case"approveFullDetailsRequest":x("approveFullDetailsRequest",s);break;case"rejectFullDetailsRequest":x("rejectFullDetailsRequest",s);break;case"approveSecondPayment":x("approveSecondPayment",s);break;case"rejectSecondPayment":x("rejectSecondPayment",s);break;case"viewFullDetails":x("viewFullDetails",s);break;case"waitForHiringDecision":x("waitForHiringDecision",s);break;case"reviewHiringDecision":x("reviewHiringDecision",s);break;case"updateCandidateAvailability":x("updateCandidateAvailability",s);break;case"viewCompletedRequest":x("viewCompletedRequest",s);break;case"start":tt("in_progress","Starting to process this request"),S();break;case"approve":tt("approved","Request approved and ready for completion"),S();break;case"complete":oe("complete"),ee(!0);break;case"reactivate":tt("pending","Request reactivated and back to pending status"),S();break;default:console.warn("Unknown action:",t),S()}},tt=async(t,s)=>{if(a)try{const n=await gt(a.id,{status:t,adminNotes:s});n.success?(v.success(`Request status updated to ${t}. ${s||""}`),R()):(console.error("âŒ Failed to update status:",n.error),v.error(`Failed to update status: ${n.error}`))}catch(n){console.error("âŒ Error updating status:",n),v.error("Network error. Please try again.")}},Fa=async()=>{if(!(!a||!le.trim())){bt(!0),be("");try{const t=await oa(a.id,{content:le});if(t.success){const s=t.data.emailSent?`Reply sent successfully to ${a.employerName} at ${a.employerContact.email}`:"Reply saved but email delivery failed. Please check the email configuration.";v.success(s),Oe(""),ye(""),S(),R()}else console.error("âŒ Reply failed:",t.error),be(t.error||"Failed to send reply")}catch(t){console.error("âŒ Error sending reply:",t),be("Network error. Please try again.")}finally{bt(!1)}}},Gt=async(t,s="picture")=>{if(a){jt(!0),je("");try{const n=await la(a.id,t,s);if(n.success){const c=s==="picture"?`Candidate profile picture sent to ${a.employerName}`:`Complete candidate details sent to ${a.employerName}`;v.success(c),S(),R()}else console.error("âŒ Failed to send candidate information:",n.error),je(n.error||"Failed to send candidate information")}catch(n){console.error("âŒ Error sending candidate information:",n),je("Network error. Please try again.")}finally{jt(!1)}}},Ea=async()=>{if(a){kt(!0),ve("");try{const t=await gt(a.id,{status:"completed",adminNotes:we});t.success?(v.success(`Request completed successfully. ${we?"Notes have been saved.":""}`),Be(""),S(),R()):(console.error("âŒ Failed to complete request:",t.error),ve(t.error||"Failed to complete request"))}catch(t){console.error("âŒ Error completing request:",t),ve("Network error. Please try again.")}finally{kt(!1)}}},Ta=async()=>{if(a)try{I(!0),M("");const t=await N.requestFullDetails(a.id,P);t.message&&(v.success(t.message),E(!1),Ne(""),R())}catch(t){console.error("Error requesting full details:",t),M(t.message||"Failed to request full details")}finally{I(!1)}},Kt=async t=>{if(a)try{I(!0),M("");const s=await N.markHiringDecision(a.id,t,P);s.message&&(v.success(s.message),E(!1),Ne(""),R())}catch(s){console.error("Error marking hiring decision:",s),M(s.message||"Failed to mark hiring decision")}finally{I(!1)}},$a=async()=>{if(a)try{I(!0),M("");const t=await N.getPhotoAccess(a.id);He(t),wt("photo"),vt(!0),E(!1)}catch(t){console.error("Error getting photo access:",t),M(t.message||"Failed to get photo access")}finally{I(!1)}},La=async()=>{if(a)try{I(!0),M("");const t=await N.getFullDetails(a.id);He(t),wt("full"),vt(!0),E(!1)}catch(t){console.error("Error getting full details:",t),M(t.message||"Failed to get full details")}finally{I(!1)}},Ia=t=>({approveRequest:"Approve Request",rejectRequest:"Reject Request",requestFirstPayment:"Request First Payment",viewPaymentDetails:"View Payment Details",approveFirstPayment:"Approve First Payment",rejectFirstPayment:"Reject First Payment",requestSecondPayment:"Request Second Payment",viewPhotoAccess:"View Photo Access",approveFullDetailsRequest:"Approve Full Details Request",rejectFullDetailsRequest:"Reject Full Details Request",approveSecondPayment:"Approve Second Payment",rejectSecondPayment:"Reject Second Payment",viewFullDetails:"View Full Details",waitForHiringDecision:"Wait for Hiring Decision",reviewHiringDecision:"Review Hiring Decision",updateCandidateAvailability:"Update Candidate Availability",viewCompletedRequest:"View Completed Request",request_full_details:"Request Full Details",mark_hired:"Mark as Hired",mark_not_hired:"Mark as Not Hired",get_photo_access:"View Photo Access",get_full_details:"View Full Details"})[t]||"Workflow Action",Ma=t=>["approveRequest","rejectRequest","requestFirstPayment","approveFirstPayment","rejectFirstPayment","requestSecondPayment","approveFullDetailsRequest","rejectFullDetailsRequest","approveSecondPayment","rejectSecondPayment","updateCandidateAvailability","request_full_details","mark_hired","mark_not_hired"].includes(t)?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:Oa(t)}),e.jsx("textarea",{value:P,onChange:n=>Ne(n.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:Ha(t)})]}):t.startsWith("view")||t==="reviewHiringDecision"||t==="waitForHiringDecision"?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Information"}),e.jsx("p",{className:"text-blue-800 text-sm",children:Ua(t)})]}):null,Oa=t=>({approveRequest:"Approval Notes (Optional)",rejectRequest:"Rejection Reason (Required)",requestFirstPayment:"Payment Request Notes (Optional)",approveFirstPayment:"Approval Notes (Optional)",rejectFirstPayment:"Rejection Reason (Required)",requestSecondPayment:"Payment Request Notes (Optional)",approveFullDetailsRequest:"Approval Notes (Optional)",rejectFullDetailsRequest:"Rejection Reason (Required)",approveSecondPayment:"Approval Notes (Optional)",rejectSecondPayment:"Rejection Reason (Required)",updateCandidateAvailability:"Update Notes (Optional)",request_full_details:"Reason for requesting full details (optional)",mark_hired:"Notes about hiring decision (optional)",mark_not_hired:"Notes about not hiring (optional)"})[t]||"Notes (Optional)",Ha=t=>({approveRequest:"Add any notes about approving this request...",rejectRequest:"Explain why this request is being rejected...",requestFirstPayment:"Add any notes about the payment request...",approveFirstPayment:"Add any notes about approving the first payment...",rejectFirstPayment:"Explain why the first payment is being rejected...",requestSecondPayment:"Add any notes about the second payment request...",approveFullDetailsRequest:"Add any notes about approving full details access...",rejectFullDetailsRequest:"Explain why full details access is being rejected...",approveSecondPayment:"Add any notes about approving the second payment...",rejectSecondPayment:"Explain why the second payment is being rejected...",updateCandidateAvailability:"Add any notes about updating candidate availability...",request_full_details:"Explain why you need full details...",mark_hired:"Add any notes about the hiring decision...",mark_not_hired:"Add any notes about why the candidate was not hired..."})[t]||"Add notes...",Ua=t=>({viewPaymentDetails:"View payment confirmation details and approve or reject the payment.",viewPhotoAccess:"View the photo access that has been granted to the employer.",viewFullDetails:"View the full details access that has been granted to the employer.",reviewHiringDecision:"Review the hiring decision made by the employer and update candidate availability.",waitForHiringDecision:"The employer has full access and should make a hiring decision soon.",viewCompletedRequest:"This request has been completed successfully."})[t]||"No additional information available.",Ba=t=>({approveRequest:"Approving Request...",rejectRequest:"Rejecting Request...",requestFirstPayment:"Requesting Payment...",approveFirstPayment:"Approving Payment...",rejectFirstPayment:"Rejecting Payment...",requestSecondPayment:"Requesting Payment...",approveFullDetailsRequest:"Approving Full Details...",rejectFullDetailsRequest:"Rejecting Full Details...",approveSecondPayment:"Approving Payment...",rejectSecondPayment:"Rejecting Payment...",updateCandidateAvailability:"Updating Status...",request_full_details:"Requesting Details...",mark_hired:"Marking as Hired...",mark_not_hired:"Marking as Not Hired...",get_photo_access:"Loading Photo Access...",get_full_details:"Loading Full Details..."})[t]||"Processing...",za=t=>{const n={approveRequest:{text:"Approve Request",className:"bg-green-600 hover:bg-green-700",onClick:()=>x("approveRequest",a)},rejectRequest:{text:"Reject Request",className:"bg-red-600 hover:bg-red-700",onClick:()=>x("rejectRequest",a)},requestFirstPayment:{text:"Request First Payment",className:"bg-yellow-600 hover:bg-yellow-700",onClick:()=>x("requestFirstPayment",a)},approveFirstPayment:{text:"Approve First Payment",className:"bg-green-600 hover:bg-green-700",onClick:()=>x("approveFirstPayment",a)},rejectFirstPayment:{text:"Reject First Payment",className:"bg-red-600 hover:bg-red-700",onClick:()=>x("rejectFirstPayment",a)},requestSecondPayment:{text:"Request Second Payment",className:"bg-yellow-600 hover:bg-yellow-700",onClick:()=>x("requestSecondPayment",a)},approveFullDetailsRequest:{text:"Approve Full Details",className:"bg-green-600 hover:bg-green-700",onClick:()=>x("approveFullDetailsRequest",a)},rejectFullDetailsRequest:{text:"Reject Full Details",className:"bg-red-600 hover:bg-red-700",onClick:()=>x("rejectFullDetailsRequest",a)},approveSecondPayment:{text:"Approve Second Payment",className:"bg-green-600 hover:bg-green-700",onClick:()=>x("approveSecondPayment",a)},rejectSecondPayment:{text:"Reject Second Payment",className:"bg-red-600 hover:bg-red-700",onClick:()=>x("rejectSecondPayment",a)},updateCandidateAvailability:{text:"Update Candidate Status",className:"bg-purple-600 hover:bg-purple-700",onClick:()=>x("updateCandidateAvailability",a)},request_full_details:{text:"Request Full Details",className:"bg-purple-600 hover:bg-purple-700",onClick:Ta},mark_hired:{text:"Mark as Hired",className:"bg-green-600 hover:bg-green-700",onClick:()=>Kt("hired")},mark_not_hired:{text:"Mark as Not Hired",className:"bg-red-600 hover:bg-red-700",onClick:()=>Kt("not_hired")},get_photo_access:{text:"View Photo Access",className:"bg-blue-600 hover:bg-blue-700",onClick:$a},get_full_details:{text:"View Full Details",className:"bg-indigo-600 hover:bg-indigo-700",onClick:La}}[t];return n?e.jsx(w,{onClick:n.onClick,disabled:ce,className:n.className,children:ce?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),Ba(t)]}):n.text}):null},x=async(t,s)=>{_(s),da(t),M(""),Ne("");const n=`${t}-${s.id}`;At(c=>({...c,[n]:!0}));try{I(!0);let c;const p=s.id;switch(t){case"approveRequest":c=await N.approveRequest(p,P);break;case"rejectRequest":c=await N.rejectRequest(p,P);break;case"requestFirstPayment":c=await N.requestFirstPayment(p,P);break;case"viewPaymentDetails":E(!0);return;case"approveFirstPayment":console.log("Approving first payment for request:",p,"with notes:",P),c=await N.approveFirstPayment(p,P),console.log("First payment approval result:",c);break;case"rejectFirstPayment":c=await N.rejectFirstPayment(p,P);break;case"requestSecondPayment":c=await N.requestSecondPayment(p,P);break;case"viewPhotoAccess":E(!0);return;case"approveFullDetailsRequest":c=await N.approveFullDetailsRequest(p,P);break;case"rejectFullDetailsRequest":c=await N.rejectFullDetailsRequest(p,P);break;case"approveSecondPayment":c=await N.approveSecondPayment(p,P);break;case"rejectSecondPayment":c=await N.rejectSecondPayment(p,P);break;case"viewFullDetails":E(!0);return;case"waitForHiringDecision":v.info("Waiting for employer to make hiring decision...");return;case"reviewHiringDecision":E(!0);return;case"updateCandidateAvailability":c=await N.updateCandidateAvailability(p,P);break;case"viewCompletedRequest":E(!0);return;default:throw new Error(`Unknown workflow action: ${t}`)}if(c){const H=c.message||`${t.replace(/([A-Z])/g," $1").toLowerCase()} completed successfully`;v.success(H),wa(t,H,p,c.newStatus||"updated"),R()}else{const H=`${t.replace(/([A-Z])/g," $1").toLowerCase()} completed successfully`;v.success(H),R()}}catch(c){console.error(`Error in workflow action ${t}:`,c),M(c.message||`Failed to ${t.replace(/([A-Z])/g," $1").toLowerCase()}`),v.error(`Failed to ${t.replace(/([A-Z])/g," $1").toLowerCase()}`)}finally{I(!1),At(c=>({...c,[n]:!1}))}},at=t=>{const s=[{key:"view",title:"View Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"view"},{key:"message",title:"Message",icon:qe,className:"text-indigo-600 hover:bg-indigo-50",group:"contact"}],n=[];switch(t.status){case"pending":n.push({key:"approveRequest",title:"Approve Request",icon:q,className:"text-green-600 hover:bg-green-50",group:"workflow"},{key:"rejectRequest",title:"Reject Request",icon:it,className:"text-red-600 hover:bg-red-50",group:"workflow"});break;case"approved":n.push({key:"requestFirstPayment",title:"Request First Payment",icon:_e,className:"text-yellow-600 hover:bg-yellow-50",group:"workflow"});break;case"first_payment_required":n.push({key:"viewPaymentDetails",title:"View Payment Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"});break;case"first_payment_confirmed":n.push({key:"paymentApproval",title:"Approve First Payment",icon:q,className:"text-green-600 hover:bg-green-50",group:"workflow"});break;case"photo_access_granted":n.push({key:"requestSecondPayment",title:"Request Second Payment",icon:_e,className:"text-yellow-600 hover:bg-yellow-50",group:"workflow"},{key:"viewPhotoAccess",title:"View Photo Access",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"});break;case"full_details_requested":n.push({key:"approveFullDetailsRequest",title:"Approve Full Details",icon:q,className:"text-green-600 hover:bg-green-50",group:"workflow"},{key:"rejectFullDetailsRequest",title:"Reject Full Details",icon:it,className:"text-red-600 hover:bg-red-50",group:"workflow"});break;case"second_payment_required":n.push({key:"viewPaymentDetails",title:"View Payment Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"});break;case"second_payment_confirmed":n.push({key:"paymentApproval",title:"Approve Second Payment",icon:q,className:"text-green-600 hover:bg-green-50",group:"workflow"});break;case"payment_required":n.push({key:"viewPaymentDetails",title:"View Payment Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"});break;case"payment_confirmed":n.push({key:"paymentApproval",title:"Approve Payment",icon:q,className:"text-green-600 hover:bg-green-50",group:"workflow"});break;case"full_access_granted":n.push({key:"viewFullDetails",title:"View Full Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"},{key:"waitForHiringDecision",title:"Wait for Hiring Decision",icon:$e,className:"text-orange-600 hover:bg-orange-50",group:"workflow"});break;case"hiring_decision_made":n.push({key:"reviewHiringDecision",title:"Review Hiring Decision",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"},{key:"updateCandidateAvailability",title:"Update Candidate Status",icon:Ee,className:"text-purple-600 hover:bg-purple-50",group:"workflow"});break;case"completed":n.push({key:"viewCompletedRequest",title:"View Completed Request",icon:$,className:"text-gray-600 hover:bg-gray-50",group:"workflow"});break;case"cancelled":n.push({key:"reactivate",title:"Reactivate",icon:ge,className:"text-blue-600 hover:bg-blue-50",group:"workflow"});break;default:n.push({key:"view",title:"View Details",icon:$,className:"text-blue-600 hover:bg-blue-50",group:"workflow"})}return[...s,...n]};return m||!i||!z?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(ns,{size:"lg",text:"Loading employer requests..."})}):f?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Requests"}),e.jsx("p",{className:"text-gray-600 mb-4",children:f}),e.jsxs(w,{onClick:R,variant:"primary",disabled:m,children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),m?"Retrying...":"Try Again"]})]})}):!m&&z&&z.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"E"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Employer Requests"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(w,{variant:"outline",size:"sm",onClick:R,disabled:m,children:"Refresh"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No Employer Requests"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"There are currently no employer requests to display."}),e.jsxs(w,{onClick:R,variant:"primary",disabled:m,children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),m?"Refreshing...":"Refresh Data"]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Employer Requests"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:ia,disabled:mt,className:"flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 hover:border-red-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Clean all testing data (preserves admin accounts and job categories)",children:mt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600 mr-2"}),"Cleaning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Clean Data"]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>Dt(!ke),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Workflow Notifications",children:[me>0?e.jsx(Xa,{className:"h-5 w-5 text-orange-500"}):e.jsx(Vt,{className:"h-5 w-5"}),me>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:me>9?"9+":me})]}),ke&&e.jsxs("div",{className:"notification-dropdown absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Workflow Notifications"}),me>0&&e.jsx("button",{onClick:va,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:ua?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading notifications..."})]}):Rt.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(Vt,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):Rt.map(t=>e.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${t.isRead?"":"bg-blue-50"}`,onClick:()=>{t.isRead||Na(t.id),t.requestId},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 ${t.isRead?"bg-gray-300":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.timestamp).toLocaleString()}),t.status&&e.jsxs("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:["Status: ",t.status]})]})]})},t.id))})]})]}),e.jsxs(w,{variant:"outline",size:"sm",onClick:R,disabled:m,children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),m?"Refreshing...":"Refresh"]})]})]})})}),e.jsxs("div",{className:" mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx(us,{stats:_a})}),e.jsx(lt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(ra,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Employer Requests (",T.length,")"]}),W>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",T.length," of ",(z||[]).length," total requests"]})]})}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Jt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by employer name, company, candidate, or message...",value:j,onChange:t=>qa(t.target.value),className:"block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm"}),ya&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"})}),j&&e.jsx("button",{onClick:()=>V(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(Fe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:()=>ha(!Je),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${Je?"bg-red-50 border-red-200 text-red-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(es,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters"}),W>0&&e.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full",children:W})]}),W>0&&e.jsxs("button",{onClick:Wt,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Clear All"]})]}),Je&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:b.status,onChange:t=>Q("status",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:X.status.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{value:b.priority,onChange:t=>Q("priority",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:X.priority.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:b.category,onChange:t=>Q("category",t.target.value),disabled:xt,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:xt?e.jsx("option",{value:"",children:"Loading categories..."}):X.category.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsx("select",{value:b.dateRange,onChange:t=>Q("dateRange",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:X.dateRange.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Rate"}),e.jsx("select",{value:b.monthlyRateRange,onChange:t=>Q("monthlyRateRange",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:X.monthlyRateRange.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),W>0&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[j&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:['Search: "',j,'"',e.jsx("button",{onClick:()=>V(""),className:"ml-1 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(Fe,{className:"h-3 w-3"})})]}),Object.entries(b).map(([t,s])=>{if(!s)return null;const n=X[t]?.find(c=>c.value===s);return n?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full",children:[n.label,e.jsx("button",{onClick:()=>Q(t,""),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:e.jsx(Fe,{className:"h-3 w-3"})})]},t):null})]})})]})]}),e.jsx("div",{className:"space-y-4",children:T.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(Jt,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:W>0?"Try adjusting your search terms or filters to find what you're looking for.":"There are no employer requests to display."}),W>0&&e.jsx(w,{onClick:Wt,variant:"outline",size:"sm",className:"mx-auto",children:"Clear All Filters"})]}):e.jsx(is,{data:T,columns:Da,pagination:!0,itemsPerPage:15,showSearch:!1})})]})})]}),Ie&&a&&e.jsx(Y,{isOpen:Ie,onClose:()=>{Me(!1),_(null),De(!1)},title:`Request Details - #${a.id}`,size:"xl",children:e.jsxs("div",{className:"space-y-6 relative",children:[xa&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Loading request details..."}),e.jsx("div",{className:"text-xs text-gray-500 text-center max-w-xs",children:"Fetching the latest information from the database."})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Request #",a.id]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Created on ",new Date(a.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ta,{status:a.status}),e.jsxs(rt,{color:Xt(a.priority),children:[a.priority," Priority"]})]})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Yt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Employer Information"]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Full Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.employerName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Company Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.companyName})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsxs("label",{className:"text-sm font-medium text-blue-600 block mb-1 flex items-center",children:[e.jsx(Zt,{className:"w-4 h-4 mr-1"}),"Email Address"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.employerContact.email||"Not provided"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsxs("label",{className:"text-sm font-medium text-blue-600 block mb-1 flex items-center",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Phone Number"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.employerContact.phone||"Not provided"})]})]})]}),(a.employerDetails.companyAddress||a.employerDetails.industry||a.employerDetails.companySize||a.employerDetails.website||a.employerDetails.description||a.employerDetails.establishedYear||a.employerDetails.contactPerson)&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-blue-200",children:[e.jsx("h4",{className:"text-md font-semibold text-blue-900 mb-3",children:"Additional Company Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.employerDetails.companyAddress&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Company Address"}),e.jsx("p",{className:"text-gray-900 text-sm",children:a.employerDetails.companyAddress})]}),a.employerDetails.industry&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Industry"}),e.jsx("p",{className:"text-gray-900 text-sm",children:a.employerDetails.industry})]}),a.employerDetails.companySize&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Company Size"}),e.jsx("p",{className:"text-gray-900 text-sm",children:a.employerDetails.companySize})]}),a.employerDetails.website&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Website"}),e.jsx("a",{href:a.employerDetails.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm underline",children:a.employerDetails.website})]}),a.employerDetails.establishedYear&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Established Year"}),e.jsx("p",{className:"text-gray-900 text-sm",children:a.employerDetails.establishedYear})]}),a.employerDetails.contactPerson&&e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-1",children:"Contact Person"}),e.jsx("p",{className:"text-gray-900 text-sm",children:a.employerDetails.contactPerson})]})]}),a.employerDetails.description&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[e.jsx("label",{className:"text-sm font-medium text-blue-600 block mb-2",children:"Company Description"}),e.jsx("p",{className:"text-gray-900 text-sm leading-relaxed",children:a.employerDetails.description})]})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(qe,{className:"w-5 h-5 mr-2 text-green-600"}),"Request Information"]}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[e.jsx("label",{className:"text-sm font-medium text-green-600 block mb-2",children:"Request Message"}),e.jsx("p",{className:"text-gray-900 leading-relaxed",children:a.message||"No message provided"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[e.jsx("label",{className:"text-sm font-medium text-green-600 block mb-1",children:"Request Date"}),e.jsx("p",{className:"text-gray-900 font-medium",children:new Date(a.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[e.jsx("label",{className:"text-sm font-medium text-green-600 block mb-1",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900 font-medium",children:new Date(a.lastContactDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[e.jsx("label",{className:"text-sm font-medium text-green-600 block mb-1",children:"Request ID"}),e.jsxs("p",{className:"text-gray-900 font-mono text-sm",children:["#",a.id]})]})]})]})})]}),a.candidateName!=="Not specified"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ee,{className:"w-5 h-5 mr-2 text-purple-600"}),"Candidate Information"]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl p-6 border border-purple-100",children:[e.jsxs("div",{className:"flex items-center space-x-6 pb-6 border-b border-purple-200 mb-6",children:[(()=>{const t=a._backendData?.requestedCandidate?.profile?.photo||a._backendData?.requestedCandidate?.photo||null,s=t?/^https?:\/\//i.test(t)?t:`${d.BASE_URL}/${t.replace(/^\//,"")}`:null;return e.jsx(nt,{src:s,alt:a.candidateName,size:"xl",fallback:a.candidateName,fallbackSrc:st})})(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.candidateName}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx(rt,{color:"text-purple-600 bg-purple-100 border-purple-200",children:a.category}),e.jsx(rt,{color:"text-blue-600 bg-blue-100 border-blue-200",children:a.position})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-lg font-semibold text-green-600",children:a.monthlyRate})]}),a.candidateExperienceLevel!=="Not specified"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Experience:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.candidateExperienceLevel})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Job Category"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.category})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Skills/Position"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.position})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Experience Level"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateExperienceLevel})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Education Level"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateEducation})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsxs("label",{className:"text-sm font-medium text-purple-600 block mb-1 flex items-center",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Contact Number"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateContact})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsxs("label",{className:"text-sm font-medium text-purple-600 block mb-1 flex items-center",children:[e.jsx(Zt,{className:"w-4 h-4 mr-1"}),"Email Address"]}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateEmail})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Location Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateLocation})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"City"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateCity})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Country"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateCountry})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Skills & Qualifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Languages"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateLanguages})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Certifications"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateCertifications})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Gender"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateGender})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Marital Status"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateMaritalStatus})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"ID Number"}),e.jsx("p",{className:"text-gray-900 font-medium font-mono text-sm",children:a.candidateIdNumber})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Availability"}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:[e.jsx("label",{className:"text-sm font-medium text-purple-600 block mb-1",children:"Availability Status"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.candidateAvailability})]})]}),a.candidateDescription!=="Not specified"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"Description"}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:e.jsx("p",{className:"text-gray-900 leading-relaxed",children:a.candidateDescription})})]}),a.candidateReferences!=="Not specified"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-purple-900 mb-3",children:"References"}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-purple-100",children:e.jsx("p",{className:"text-gray-900 leading-relaxed",children:a.candidateReferences})})]})]})]})]})]})}),ne&&a&&!B&&e.jsx(Y,{isOpen:ne,onClose:S,title:`Actions for ${a.employerName} - ${a.companyName}`,maxWidth:"max-w-md",children:e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"grid grid-cols-4 gap-3",children:at(a).map((t,s)=>{const n=t.icon;return e.jsxs("button",{onClick:()=>et(t.key,a),className:`relative group flex items-center justify-center p-4 rounded-lg transition-all duration-200 hover:scale-105 ${t.className} border border-gray-200 hover:border-current`,title:t.title,children:[e.jsx(n,{className:"w-6 h-6"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:[t.title,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]},s)})})})}),ne&&a&&B&&e.jsxs(Y,{isOpen:ne,onClose:S,title:B==="reply"?"Reply to Request":B==="select"?"Send Candidate Details":B==="complete"?"Complete Request":"Action",size:"md",children:[B==="reply"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Replying to:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Email:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.employerContact.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Phone:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.employerContact.phone})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reply Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:le,onChange:t=>Oe(t.target.value),className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your reply message to the employer...",disabled:te}),te&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Sending reply to employer..."]}),ft&&e.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:ft})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Internal)"}),e.jsx("textarea",{value:yt,onChange:t=>ye(t.target.value),className:"w-full h-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Add internal notes for your reference...",disabled:te}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes are for internal use only and won't be sent to the employer."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{variant:"outline",onClick:()=>{S()},disabled:te,children:"Cancel"}),e.jsx(w,{variant:"primary",onClick:Fa,disabled:!le.trim()||te,children:te?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Reply"})]})]}),B==="select"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Selecting candidate for:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Employer:"}),e.jsx("span",{className:"text-green-900 ml-1",children:a.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-green-900 ml-1",children:a.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Position:"}),e.jsx("span",{className:"text-green-900 ml-1",children:a.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Category:"}),e.jsx("span",{className:"text-green-900 ml-1",children:a.category})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Send Candidate Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Send the requested candidate's information to the employer. Choose whether to send just a profile picture or complete details."}),a._backendData?.requestedCandidate?e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const t=a._backendData?.requestedCandidate?.profile?.photo||a._backendData?.requestedCandidate?.photo||null,s=t?/^https?:\/\//i.test(t)?t:`${d.BASE_URL}/${t.replace(/^\//,"")}`:null;return e.jsx(nt,{src:s,alt:a.candidateName,size:"md",fallback:a.candidateName,fallbackSrc:st})})(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 text-lg",children:a.candidateName}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[a.position," â€¢ ",a.candidateExperience]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",a.candidateLocation]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rate:"})," ",a.monthlyRate]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Experience Level:"})," ",a.candidateExperienceLevel]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Education:"})," ",a.candidateEducation]})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(w,{variant:"outline",size:"sm",onClick:()=>Gt(a._backendData.requestedCandidate.id,"picture"),disabled:fe,children:"Send Profile Picture"}),e.jsx(w,{variant:"primary",size:"sm",onClick:()=>Gt(a._backendData.requestedCandidate.id,"full"),disabled:fe,children:"Send Complete Details"})]})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ee,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No candidate specified in this request"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"The employer did not specify a particular candidate"})]})]}),Nt&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:Nt}),fe&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"Sending candidate information to employer..."]}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx(w,{variant:"outline",onClick:()=>{S()},disabled:fe,children:"Cancel"})})]}),B==="complete"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-900 mb-2",children:"Completing Request:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Employer:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:a.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:a.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Position:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:a.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Current Status:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:a.status})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Completion Notes (Optional)"}),e.jsx("textarea",{value:we,onChange:t=>Be(t.target.value),className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Add notes about how this request was completed...",disabled:ie}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes will be saved with the request and sent to the employer."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-yellow-800 text-xs",children:"!"})}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This action will permanently mark the request as completed and close it. This action cannot be undone."]})]})}),Pt&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:Pt}),ie&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600 mr-2"}),"Completing request..."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{variant:"outline",onClick:()=>{S()},disabled:ie,children:"Cancel"}),e.jsx(w,{variant:"primary",onClick:Ea,disabled:ie,className:"bg-orange-600 hover:bg-orange-700",children:ie?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete Request"})]})]})]}),Ce&&a&&e.jsx(Y,{isOpen:Ce,onClose:fa,title:`Messaging - Request #${a.id}`,maxWidth:"max-w-2xl",children:e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto pr-4 space-y-4 mb-4",children:[Ae?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ge,{className:"animate-spin h-8 w-8 text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]}):_t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Start the conversation!"})]}):_t.map(t=>e.jsx("div",{className:`flex ${t.fromAdmin?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg shadow-sm ${t.fromAdmin?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:[e.jsx("p",{className:"text-sm",children:t.content}),e.jsx("p",{className:`text-xs mt-1 ${t.fromAdmin?"text-blue-100":"text-gray-500"}`,children:new Date(t.createdAt).toLocaleString()})]})},t.id)),Ft&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:Ft})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Type a message...",value:Se,onChange:t=>Pe(t.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:Ae,onKeyPress:t=>t.key==="Enter"&&Ut()}),e.jsx(w,{variant:"primary",onClick:Ut,disabled:!Se.trim()||Ae,children:Ae?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(ts,{className:"h-5 w-5"})})]})]})}),Et&&a&&e.jsx(Y,{isOpen:Et,onClose:Ye,title:`Request Payment - Request #${a.id}`,maxWidth:"max-w-2xl",children:e.jsxs("form",{onSubmit:Sa,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Request Details:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Employer:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Candidate:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.candidateName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Status:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:a.status})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentType",value:"photo_access",checked:h.paymentType==="photo_access",onChange:t=>O({...h,paymentType:t.target.value}),className:"mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Photo Access"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Basic candidate photo"})]})]}),e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentType",value:"full_details",checked:h.paymentType==="full_details",onChange:t=>O({...h,paymentType:t.target.value}),className:"mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Full Details"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Complete candidate information"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:h.paymentMethodId,onChange:t=>O({...h,paymentMethodId:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),pa.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.accountNumber]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Amount ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:h.amount,onChange:t=>O({...h,amount:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5000",min:"0",step:"100",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),e.jsxs("select",{value:h.currency,onChange:t=>O({...h,currency:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"RWF",children:"RWF (Rwandan Franc)"}),e.jsx("option",{value:"USD",children:"USD (US Dollar)"}),e.jsx("option",{value:"EUR",children:"EUR (Euro)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:t=>O({...h,description:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:`Payment for ${h.paymentType==="photo_access"?"photo access":"full details"} access to candidate information`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:h.dueDate,onChange:t=>O({...h,dueDate:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:new Date().toISOString().split("T")[0]})]}),$t&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:$t}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{type:"button",variant:"outline",onClick:Ye,disabled:Ge,children:"Cancel"}),e.jsx(w,{type:"submit",variant:"primary",disabled:Ge,className:"bg-green-600 hover:bg-green-700",children:Ge?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Payment Request"})]})]})}),Lt&&a&&e.jsx(Y,{isOpen:Lt,onClose:Ze,title:`Approve Payment - Request #${a.id}`,maxWidth:"max-w-2xl",children:e.jsxs("form",{onSubmit:Ra,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Request Overview"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("span",{className:"text-blue-600 font-medium block mb-1",children:"Employer:"}),e.jsx("span",{className:"text-gray-900",children:a.employerName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("span",{className:"text-blue-600 font-medium block mb-1",children:"Company:"}),e.jsx("span",{className:"text-gray-900",children:a.companyName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("span",{className:"text-blue-600 font-medium block mb-1",children:"Candidate:"}),e.jsx("span",{className:"text-gray-900",children:a.candidateName})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-blue-100",children:[e.jsx("span",{className:"text-blue-600 font-medium block mb-1",children:"Request Status:"}),e.jsx("span",{className:"text-gray-900 capitalize",children:a.status?.replace("_"," ")})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100",children:[e.jsxs("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Payment Confirmation Details"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-1",children:"Payer Name:"}),e.jsx("span",{className:"text-gray-900",children:a.latestPayment?.confirmationName||"Not specified"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-1",children:"Phone Number:"}),e.jsx("span",{className:"text-gray-900",children:a.latestPayment?.confirmationPhone||"Not specified"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-1",children:"Payment Reference:"}),e.jsx("span",{className:"text-gray-900 font-mono text-xs",children:a.latestPayment?.paymentReference||"Not specified"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-1",children:"Transfer Amount:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:a.latestPayment?.amount?`${a.latestPayment.amount} RWF`:"Not specified"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-1",children:"Confirmation Date:"}),e.jsx("span",{className:"text-gray-900",children:a.latestPayment?.confirmationDate?new Date(a.latestPayment.confirmationDate).toLocaleDateString():"Not specified"})]})]}),a.latestPayment?.adminNotes&&a.latestPayment.adminNotes!=="No additional notes"&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 border border-green-100",children:[e.jsx("span",{className:"text-green-600 font-medium block mb-2",children:"Additional Notes:"}),e.jsx("p",{className:"text-gray-900 text-sm leading-relaxed",children:a.latestPayment.adminNotes})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl p-6 border border-purple-100",children:[e.jsxs("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"System Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-100",children:[e.jsx("span",{className:"text-purple-600 font-medium block mb-1",children:"Payment Type:"}),e.jsx("span",{className:"text-gray-900 capitalize",children:a.latestPayment?.paymentType?.replace("_"," ")||"Not specified"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-100",children:[e.jsx("span",{className:"text-purple-600 font-medium block mb-1",children:"Payment Status:"}),e.jsx("span",{className:"text-gray-900 capitalize",children:a.latestPayment?.status||"Not specified"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Action ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"action",value:"approve",checked:D.action==="approve",onChange:t=>se({...D,action:t.target.value}),className:"mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Approve"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Approve the payment"})]})]}),e.jsxs("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"action",value:"reject",checked:D.action==="reject",onChange:t=>se({...D,action:t.target.value}),className:"mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reject"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Reject the payment"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:D.notes,onChange:t=>se({...D,notes:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Add any additional notes for the payment approval..."})]}),Mt&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:Mt}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{type:"button",variant:"outline",onClick:Ze,disabled:Ve,children:"Cancel"}),e.jsx(w,{type:"submit",variant:"primary",disabled:Ve,className:"bg-green-600 hover:bg-green-700",children:Ve?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Submit Approval"})]})]})}),Ct&&a&&e.jsx(Y,{isOpen:Ct,onClose:ce?void 0:()=>E(!1),title:`${Ia(Ue)}`,className:"max-w-2xl",children:e.jsxs("div",{className:"space-y-6 relative",children:[ce&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Processing your request..."}),e.jsx("div",{className:"text-xs text-gray-500 text-center max-w-xs",children:"This may take a few moments as we send notifications and update the system."})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Request Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Request ID:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["#",a.id]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:"ml-2",children:e.jsx(ta,{status:a.status})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Employer:"}),e.jsx("span",{className:"ml-2 font-medium",children:a.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Candidate:"}),e.jsx("span",{className:"ml-2 font-medium",children:a.candidateName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"ml-2",children:new Date(a.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Company:"}),e.jsx("span",{className:"ml-2 font-medium",children:a.companyName})]})]})]}),e.jsx(ms,{currentStatus:a.status}),Ma(Ue),St&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(aa,{className:"h-5 w-5 text-red-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:St})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(w,{variant:"outline",onClick:()=>E(!1),disabled:ce,children:"Cancel"}),za(Ue)]})]})}),e.jsx(as,{position:"top-right"})]})},Ps=Object.freeze(Object.defineProperty({__proto__:null,default:ps},Symbol.toStringTag,{value:"Module"}));export{ps as E,ot as N,cs as S,Ss as a,Xt as b,ds as c,Ps as d,Cs as g,ea as h};
