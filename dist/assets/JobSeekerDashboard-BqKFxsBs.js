import{c as D,b as P,r as x,j as e,a0 as p,a1 as M,a2 as v,a3 as J,I as $,f as T,s as B,_ as U,y as G,a4 as H,z as K,U as w,g as q,P as F,C as O}from"./vendor-react-DCVpIq7q.js";import{u as Q,L as V,B as n,C as t,f as W,c as X}from"./index-DRNx2Vuk.js";import{B as k}from"./Badge-CBal7hbk.js";import{A as C}from"./Avatar-CWT3j43R.js";import{m as j}from"./vendor-motion-BnaYlrdq.js";import"./vendor-common-BZD0eUgH.js";import"./vendor-gsap-lnFyu4_T.js";const le=()=>{const{t:_}=D(),{user:s,logout:R}=Q(),m=P(),[g,c]=x.useState(null),[l,N]=x.useState(!1);x.useEffect(()=>{s||m("/login")},[s,m]),x.useEffect(()=>{const a=()=>{const d=sessionStorage.getItem("dashboardRefreshErrors");d&&parseInt(d)>2&&c("Multiple refresh attempts failed. Please use manual refresh or contact support.")},r=setInterval(a,3e4);return a(),()=>clearInterval(r)},[]),x.useEffect(()=>{const a=r=>{if(r.key==="dashboardRefreshErrors"){const d=parseInt(r.newValue||"0");d>0&&c(`Auto-refresh has failed ${d} times. Consider using manual refresh.`)}};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)},[]);const S=()=>{R(),m("/")},E=()=>{m("/update-profile")},o=async()=>{N(!0),c(null);try{await new Promise(a=>setTimeout(a,1e3)),window.location.reload()}catch{c("Failed to refresh. Please try again."),N(!1)}},L=()=>{c(null)};if(!s)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(V,{size:"lg",text:"Loading dashboard..."})});const i=()=>s?.profile?.firstName&&s?.profile?.lastName?`${s.profile.firstName} ${s.profile.lastName}`:s?.profile?.firstName||s?.profile?.lastName||s?.email||"No Name",u=()=>({1:"Software Developer",2:"Housemaid",3:"Gardener",4:"Driver",5:"Cook",6:"Security Guard"})[s?.profile?.jobCategoryId]||"Job Seeker",y=()=>s?.profile?.skills?s.profile.skills.split(",").map(a=>a.trim()):[],b=()=>["Kinyarwanda","English"],h=()=>({email:s?.email||"No email",phone:s?.profile?.contactNumber||"No phone",linkedin:null}),f=()=>({dailyRate:null,monthlyRate:s?.profile?.monthlyRate||null}),A=()=>s?.profile?.experience||"No experience specified",I=()=>"Not specified",z=()=>"Not specified";try{return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"text-green-600 font-bold p-4",children:"✅ JobSeekerDashboard is rendering!"}),e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"J"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"JobPortal"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:o,disabled:l,className:"text-gray-600 hover:text-blue-600 transition-colors",title:"Refresh dashboard data",children:[e.jsx(p,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),l?"Refreshing...":"Refresh"]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{src:s?.avatar,alt:i(),size:"sm",fallback:i()}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i()}),e.jsx("p",{className:"text-xs text-gray-500",children:s?.role})]})]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:S,className:"text-gray-600 hover:text-red-600",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),g&&e.jsx(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-5 h-5 text-red-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Auto-refresh failed"}),e.jsx("p",{className:"text-sm text-red-700",children:g})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:o,disabled:l,className:"text-red-700 hover:text-red-800 hover:bg-red-100",children:[e.jsx(p,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),"Retry"]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:L,className:"text-red-700 hover:text-red-800 hover:bg-red-100",children:e.jsx(v,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3 animate-pulse"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Dashboard connected • Auto-refresh enabled"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:["Last updated: ",new Date().toLocaleTimeString()]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:o,disabled:l,className:"text-blue-700 hover:text-blue-800 hover:bg-blue-100 text-xs",children:[e.jsx(p,{className:`w-3 h-3 mr-1 ${l?"animate-spin":""}`}),"Manual Refresh"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",i(),"!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's your complete profile. Keep your information up to date for potential employers."})]}),e.jsxs(n,{variant:"primary",onClick:E,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Update Profile"]})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-6",children:e.jsx(t,{className:"bg-amber-50 border-amber-200",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx($,{className:"w-5 h-5 text-amber-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800 mb-2",children:"Auto-refresh Status"}),e.jsx("p",{className:"text-sm text-amber-700 mb-3",children:"If you're experiencing issues with profile updates not reflecting automatically, you can manually refresh the dashboard using the refresh button in the header."}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-amber-200",children:[e.jsx("p",{className:"text-xs text-amber-800 font-medium mb-2",children:"Quick Troubleshooting:"}),e.jsxs("ul",{className:"text-xs text-amber-700 space-y-1",children:[e.jsx("li",{children:"• Click the refresh button in the header to manually update data"}),e.jsx("li",{children:"• Check your internet connection if auto-refresh fails"}),e.jsx("li",{children:"• Contact support if issues persist"})]})]})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx(C,{src:s?.profile?.photo,alt:i(),size:"xl",fallback:i()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:i()}),e.jsx("p",{className:"text-xl text-gray-600 mb-3",children:u()}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:s?.profile?.location||"No Location"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:A()})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:z()})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:I()})]})]})]})]})}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"About"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s?.profile?.description||"No bio available"})]}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y().length>0?y().map((a,r)=>e.jsx(k,{variant:"primary",size:"md",children:a},r)):e.jsx("p",{className:"text-gray-500",children:"No skills listed"})})]}),e.jsxs(t,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Languages"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b().length>0?b().map((a,r)=>e.jsx(k,{variant:"secondary",size:"md",children:a},r)):e.jsx("p",{className:"text-gray-500",children:"No languages listed"})})]}),e.jsxs(t,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(K,{className:"w-5 h-5 mr-2"}),"Certifications"]}),s?.profile?.certifications&&s.profile.certifications.length>0?e.jsx("div",{className:"space-y-3",children:s.profile.certifications.map((a,r)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.issuer}),e.jsx("p",{className:"text-xs text-gray-500",children:a.date})]},r))}):e.jsx("p",{className:"text-gray-500",children:"No certifications listed"})]}),e.jsxs(t,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),"References"]}),s?.profile?.references?e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-700",children:s.profile.references})}):e.jsx("p",{className:"text-gray-500",children:"No references listed"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:h().email})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:h().phone})]}),h().linkedin&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:h().linkedin})]})]})]}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"Rates"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Rate:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:f().dailyRate?W(f().dailyRate):"Not set"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Monthly Rate:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:f().monthlyRate?X(f().monthlyRate):"Not set"})]})]})]}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Category"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category:"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:u()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Category ID:"}),e.jsx("p",{className:"font-medium text-gray-900",children:s?.profile?.jobCategoryId||"Not specified"})]})]})]}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Completion"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Profile Score"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"85%"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"85%"}})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Complete your profile to increase your chances of getting hired"}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Data Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-green-600",children:"Live"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:o,disabled:l,className:"text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 p-1",children:[e.jsx(p,{className:`w-3 h-3 mr-1 ${l?"animate-spin":""}`}),"Refresh"]})]})]})]})]})]})]})]})]})}catch(a){return console.error("Error rendering JobSeekerDashboard:",a),e.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[e.jsx(O,{className:"w-16 h-16 text-red-500 mb-4"}),e.jsx("p",{className:"text-lg text-gray-800",children:"An error occurred while rendering the JobSeekerDashboard. Please try again later."})]})}};export{le as default};
