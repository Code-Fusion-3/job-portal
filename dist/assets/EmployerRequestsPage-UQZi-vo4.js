import{r,j as e,ad as es,ag as ss,aR as ts,aW as _e,aY as rs,ae as as,af as ue,b8 as me,aI as Le,ac as ge,aJ as ls,aQ as pe,bi as ns,br as is,aV as os,aw as cs,az as ds,ay as us,bj as Z,bs as ms}from"./vendor-react-BGn7VswH.js";import{e as M,h as F,g as ee,C as Ie,u as gs,L as ps,B as R,A as fe,d as be}from"./index-C7FXNmYZ.js";import{a as xs}from"./useCategories-BQOel4QK.js";import{D as hs}from"./DataTable-D4gQs-in.js";import{m as ve}from"./vendor-motion-DwrKfzy9.js";import{M as je}from"./Modal-DL9fvMFM.js";import{B as Me}from"./Badge-BQeAVSNL.js";import{A as Ne}from"./Avatar-2tQtliHc.js";const se={submitRequest:async o=>{try{const d=await M.post("/employer/request",o);return{success:!0,data:d.data.request,message:d.data.message}}catch(d){if(d.response?.data){const{data:i}=d.response;if(i.details&&Array.isArray(i.details))return{success:!1,error:i.details.map(g=>`${g.field}: ${g.message}`).join(", ")};if(i.error)return{success:!1,error:i.error};if(i.message)return{success:!1,error:i.message}}return{success:!1,error:F(d,{context:"submit_employer_request"}).userMessage}}},getAllRequests:async(o={})=>{try{const{page:d=1,limit:n=10,status:i,priority:m,search:g,sortBy:b,sortOrder:y,category:T,dateFrom:h,dateTo:D,...$}=o,x=new URLSearchParams({page:d.toString(),limit:n.toString(),...$});i&&x.append("status",i),m&&x.append("priority",m),g&&x.append("search",g),b&&x.append("sortBy",b),y&&x.append("sortOrder",y),T&&x.append("category",T),h&&x.append("dateFrom",h),D&&x.append("dateTo",D);const S=await M.get(`/employer/requests?${x}`,{headers:ee()});return{success:!0,data:{requests:S.data.requests||[],pagination:S.data.pagination||{page:parseInt(d),limit:parseInt(n),total:0,totalPages:1}}}}catch(d){return d.response?.data?.error?{success:!1,error:d.response.data.error}:{success:!1,error:F(d,{context:"get_all_employer_requests"}).userMessage}}},getRequestById:async o=>{try{return{success:!0,data:(await M.get(`/employer/requests/${o}`,{headers:ee()})).data}}catch(d){return d.response?.data?.error?{success:!1,error:d.response.data.error}:{success:!1,error:F(d,{context:"get_employer_request_by_id"}).userMessage}}},replyToRequest:async(o,d)=>{try{const n=await M.post(`/employer/requests/${o}/reply`,d,{headers:ee()});return{success:!0,data:n.data.messageData,message:n.data.message}}catch(n){if(n.response?.data){const{data:m}=n.response;if(m.details&&Array.isArray(m.details))return{success:!1,error:m.details.map(b=>`${b.field}: ${b.message}`).join(", ")};if(m.error)return{success:!1,error:m.error};if(m.message)return{success:!1,error:m.message}}return{success:!1,error:F(n,{context:"reply_to_employer_request"}).userMessage}}},selectJobSeeker:async(o,d,n="picture")=>{try{const i=await M.post(`/employer/requests/${o}/select`,{selectedUserId:d,detailsType:n},{headers:ee()});return{success:!0,data:i.data.request,message:i.data.message}}catch(i){if(i.response?.data){const{data:g}=i.response;if(g.details&&Array.isArray(g.details))return{success:!1,error:g.details.map(y=>`${y.field}: ${y.message}`).join(", ")};if(g.error)return{success:!1,error:g.error};if(g.message)return{success:!1,error:g.message}}return{success:!1,error:F(i,{context:"select_job_seeker_for_request"}).userMessage}}},updateRequestStatus:async(o,d)=>{try{const n=await M.put(`/employer/requests/${o}/status`,d,{headers:ee()});return{success:!0,data:n.data.request,message:n.data.message}}catch(n){if(n.response?.data){const{data:m}=n.response;if(m.details&&Array.isArray(m.details))return{success:!1,error:m.details.map(b=>`${b.field}: ${b.message}`).join(", ")};if(m.error)return{success:!1,error:m.error};if(m.message)return{success:!1,error:m.message}}return{success:!1,error:F(n,{context:"update_request_status"}).userMessage}}},getRequestStatistics:async()=>{try{const o=await M.get("/admin/dashboard/stats",{headers:ee()});return{success:!0,data:{totalRequests:o.data.overview?.totalEmployerRequests||0,pendingRequests:o.data.overview?.pendingEmployerRequests||0,recentRequests:o.data.recentActivity?.recentEmployerRequests||[],requestDistribution:o.data.distributions?.employerRequests||[]}}}catch(o){return o.response?.data?.error?{success:!1,error:o.response.data.error}:{success:!1,error:F(o,{context:"get_request_statistics"}).userMessage}}},getPublicConversation:async(o,d)=>{try{return{success:!0,data:(await M.get(`/public/employer/requests/${o}`,{params:{email:d}})).data}}catch(n){return n.response?.data?.error?{success:!1,error:n.response.data.error}:{success:!1,error:F(n,{context:"get_public_conversation"}).userMessage}}},replyAsEmployer:async(o,d,n)=>{try{const i=await M.post(`/public/employer/requests/${o}/reply`,{...n,email:d});return{success:!0,data:i.data.messageData,message:i.data.message}}catch(i){if(i.response?.data){const{data:g}=i.response;if(g.details&&Array.isArray(g.details))return{success:!1,error:g.details.map(y=>`${y.field}: ${y.message}`).join(", ")};if(g.error)return{success:!1,error:g.error};if(g.message)return{success:!1,error:g.message}}return{success:!1,error:F(i,{context:"reply_as_employer"}).userMessage}}}},Be=(o={})=>{const{autoFetch:d=!0,includeAdmin:n=!1,itemsPerPage:i=10}=o,[m,g]=r.useState([]),[b,y]=r.useState(!1),[T,h]=r.useState(null),[D,$]=r.useState(null),[x,S]=r.useState(1),[t,te]=r.useState(1),[re,ae]=r.useState(0),[U,I]=r.useState({}),[j,O]=r.useState(""),[q,J]=r.useState({}),[k,le]=r.useState("createdAt"),[w,ce]=r.useState("desc"),v=r.useCallback(async(u=x,p=j,c=q,N={field:k,order:w})=>{if(n){y(!0),h(null);try{const A={page:u,limit:i,search:p,sortBy:N.field,sortOrder:N.order,...c},P=await se.getAllRequests(A);P.success?(g(P.data.requests||[]),te(P.data.pagination?.totalPages||1),ae(P.data.pagination?.total||0),S(P.data.pagination?.page||1),I(P.data.pagination||{})):h(P.error||"Failed to fetch requests")}catch(A){h("An error occurred while fetching requests"),console.error("Error fetching requests:",A)}finally{y(!1)}}},[n,i,x,j,q,k,w]),W=r.useCallback(async u=>{y(!0),h(null);try{const p=await se.submitRequest(u);return p.success?{success:!0,data:p.data}:(h(p.error||"Failed to submit request"),{success:!1,error:p.error})}catch{const c="An error occurred while submitting request";return h(c),{success:!1,error:c}}finally{y(!1)}},[]),Ce=r.useCallback(async u=>{if(!n||!u)return null;y(!0),h(null);try{const p=await se.getRequestById(u);return p.success?($(p.data),{success:!0,data:p.data}):(h(p.error||"Failed to fetch request"),{success:!1,error:p.error})}catch{const c="An error occurred while fetching request";return h(c),{success:!1,error:c}}finally{y(!1)}},[n]),xe=r.useCallback(async(u,p)=>{if(!n)return{success:!1,error:"Unauthorized"};y(!0),h(null);try{const c=await se.replyToRequest(u,p);return c.success?(await v(),{success:!0,data:c.data}):(h(c.error||"Failed to reply to request"),{success:!1,error:c.error})}catch{const N="An error occurred while replying to request";return h(N),{success:!1,error:N}}finally{y(!1)}},[n,v]),H=r.useCallback(async(u,p,c="picture")=>{if(!n)return{success:!1,error:"Unauthorized"};y(!0),h(null);try{const N=await se.selectJobSeeker(u,p,c);return N.success?(await v(),{success:!0,data:N.data}):(h(N.error||"Failed to send candidate information"),{success:!1,error:N.error})}catch{const A="An error occurred while sending candidate information";return h(A),{success:!1,error:A}}finally{y(!1)}},[n,v]),de=r.useCallback(async(u,p)=>{if(!n)return{success:!1,error:"Unauthorized"};y(!0),h(null);try{const c=await se.updateRequestStatus(u,p);return c.success?(await v(),{success:!0,data:c.data}):(h(c.error||"Failed to update request status"),{success:!1,error:c.error})}catch{const N="An error occurred while updating request status";return h(N),{success:!1,error:N}}finally{y(!1)}},[n,v]),B=r.useCallback(u=>{S(u),v(u,j,q,{field:k,order:w})},[v,j,q,k,w]),V=r.useCallback(()=>{x<t&&B(x+1)},[x,t,B]),we=r.useCallback(()=>{x>1&&B(x-1)},[x,B]),Se=r.useMemo(()=>x<t,[x,t]),ke=r.useMemo(()=>x>1,[x]),qe=r.useCallback(u=>{O(u),S(1)},[]),G=r.useCallback((u,p)=>{const c={...q,[u]:p};J(c),S(1)},[q]),ne=r.useCallback((u,p)=>{le(u),ce(p)},[]),Y=r.useCallback(()=>{v(x,j,q,{field:k,order:w})},[v,x,j,q,k,w]);r.useEffect(()=>{n&&Y()},[Y,n]);const Q=r.useCallback(u=>{$(u)},[]),X=r.useCallback(()=>{$(null)},[]),ie=r.useMemo(()=>m.filter(u=>!0),[m]);return r.useEffect(()=>{d&&n&&v()},[v,d,n]),r.useEffect(()=>{h(null)},[D]),{requests:ie,selectedRequest:D,loading:b,error:T,currentPage:x,totalPages:t,totalItems:re,pageInfo:U,hasNextPage:Se,hasPrevPage:ke,searchTerm:j,filters:q,sortBy:k,sortOrder:w,fetchRequests:v,submitRequest:W,getRequestById:Ce,replyToRequest:xe,selectJobSeekerForRequest:H,updateRequestStatus:de,goToPage:B,nextPage:V,prevPage:we,setSearchTerm:qe,setFilters:G,setSortBy:u=>ne(u,w),setSortOrder:u=>ne(k,u),applyFilters:Y,selectRequest:Q,clearSelection:X,hasRequests:m.length>0,requestsCount:m.length,isAdmin:n}},Rs=(o={})=>Be({...o,includeAdmin:!0}),ys=({title:o,value:d,change:n,changeType:i="increase",icon:m,color:g,bgColor:b,description:y,index:T=0,trendPeriod:h="7 days",showTrend:D=!0})=>e.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:T*.1},children:e.jsxs(Ie,{className:"p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 ${b} rounded-lg flex items-center justify-center`,children:e.jsx(m,{className:`w-6 h-6 ${g}`})}),D&&n&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${i==="increase"?"text-green-600":i==="decrease"?"text-red-600":"text-gray-500"}`,children:[i==="increase"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 17l9.2-9.2M17 17V7H7"})}):i==="decrease"?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 7l-9.2 9.2M7 7v10h10"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"})}),e.jsx("span",{children:n})]}),e.jsxs("div",{className:"group relative",children:[e.jsx(es,{className:"w-3 h-3 text-gray-400 cursor-help"}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-10",children:["Trend based on last ",h]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:d}),e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:o}),e.jsx("p",{className:"text-xs text-gray-500",children:y})]})]})}),Fe=o=>{switch(o?.toLowerCase()){case"pending":return"text-orange-600 bg-orange-50 border-orange-200";case"in_progress":return"text-blue-600 bg-blue-50 border-blue-200";case"approved":return"text-green-600 bg-green-50 border-green-200";case"completed":return"text-purple-600 bg-purple-50 border-purple-200";case"cancelled":return"text-red-600 bg-red-50 border-red-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";case"active":return"text-green-600 bg-green-50 border-green-200";case"inactive":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},Es=o=>{switch(o?.toLowerCase()){case"pending":return"Pending";case"in_progress":return"In Progress";case"approved":return"Approved";case"completed":return"Completed";case"cancelled":return"Cancelled";case"rejected":return"Rejected";case"active":return"Active";case"inactive":return"Inactive";default:return o||"Unknown"}},Te=o=>{switch(o){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-orange-600 bg-orange-50 border-orange-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},As=o=>{switch(o){case"JavaScript":return"text-blue-600 bg-blue-50 border-blue-200";case"React":return"text-cyan-600 bg-cyan-50 border-cyan-200";case"Python":return"text-green-600 bg-green-50 border-green-200";case"Java":return"text-orange-600 bg-orange-50 border-orange-200";case"Cooking":return"text-red-600 bg-red-50 border-red-200";case"Housekeeping":return"text-purple-600 bg-purple-50 border-purple-200";case"Childcare":return"text-pink-600 bg-pink-50 border-pink-200";case"Gardening":return"text-emerald-600 bg-emerald-50 border-emerald-200";case"Cleaning":return"text-gray-600 bg-gray-50 border-gray-200";case"Driving":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"Teaching":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"Nursing":return"text-rose-600 bg-rose-50 border-rose-200";case"Construction":return"text-amber-600 bg-amber-50 border-amber-200";case"Agriculture":return"text-lime-600 bg-lime-50 border-lime-200";case"domestic":return"text-blue-600 bg-blue-50 border-blue-200";case"care":return"text-pink-600 bg-pink-50 border-pink-200";case"food":return"text-orange-600 bg-orange-50 border-orange-200";case"maintenance":return"text-green-600 bg-green-50 border-green-200";case"sales":return"text-purple-600 bg-purple-50 border-purple-200";case"transport":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"Technology":return"text-blue-600 bg-blue-50 border-blue-200";case"Healthcare":return"text-green-600 bg-green-50 border-green-200";case"Education":return"text-purple-600 bg-purple-50 border-purple-200";case"Manufacturing":return"text-red-600 bg-red-50 border-red-200";case"Services":return"text-gray-600 bg-gray-50 border-gray-200";case"General":return"text-gray-600 bg-gray-50 border-gray-200";case"Job Seeker":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},$e=(o,d)=>{d==="email"?window.open(`mailto:${o.email}`,"_blank"):d==="phone"&&window.open(`tel:${o.phone}`,"_blank")},fs=({stats:o,className:d=""})=>e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 ${d}`,children:o.map((n,i)=>e.jsx(ys,{...n,index:i},n.title))}),bs=()=>{const{t:o}=ss(),{user:d}=gs(),{requests:n,loading:i,error:m,goToPage:g,applyFilters:b,replyToRequest:y,selectJobSeekerForRequest:T,updateRequestStatus:h}=Be({includeAdmin:!0}),{categories:D,loadingCategories:$,fetchCategories:x}=xs(),S={status:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"approved",label:"Approved"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],priority:[{value:"",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"normal",label:"Normal"},{value:"low",label:"Low"}],category:[{value:"",label:"All Categories"},...(D||[]).map(s=>({value:s.name_en.toLowerCase(),label:s.name_en}))],dateRange:[{value:"",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"quarter",label:"This Quarter"},{value:"year",label:"This Year"}],monthlyRateRange:[{value:"",label:"All Rates"},{value:"0-50000",label:"0 - 50,000 frw"},{value:"50000-100000",label:"50,000 - 100,000 frw"},{value:"100000-200000",label:"100,000 - 200,000 frw"},{value:"200000+",label:"200,000+ frw"}]},[t,te]=r.useState(null),[re,ae]=r.useState(!1),[U,I]=r.useState(!1),[j,O]=r.useState(null),[q,J]=r.useState(""),[k,le]=r.useState(""),[w,ce]=r.useState(!1),[v,W]=r.useState(""),[Ce,xe]=r.useState(null),[H,de]=r.useState(!1),[B,V]=r.useState(""),[we,Se]=r.useState(!1),[ke,qe]=r.useState("picture"),[G,ne]=r.useState(!1),[Y,Q]=r.useState(""),[X,ie]=r.useState(""),[u,p]=r.useState(""),[c,N]=r.useState({status:"",priority:"",category:"",dateRange:"",monthlyRateRange:""}),[A,P]=r.useState(!1),[ze,Re]=r.useState(!1),C=r.useCallback(()=>{I(!1),O(null),te(null),le(""),J(""),W(""),ie(""),Q(""),xe(null),V(""),ae(!1)},[]),Ee=r.useCallback(()=>{},[U,j,t,re,k,q,X]),Ue=s=>{if(!s)return null;try{const a=l=>{if(!l||l==="Not specified")return"Not specified";if(typeof l=="number")return new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(l);if(typeof l=="string"){const f=parseFloat(l);return isNaN(f)?l:new Intl.NumberFormat("en-RW",{style:"currency",currency:"frw",minimumFractionDigits:0}).format(f)}return"Not specified"};return{id:s.id,employerName:s.name||"Unknown",companyName:s.companyName||"Private",candidateName:s.requestedCandidate&&`${s.requestedCandidate.profile?.firstName||""} ${s.requestedCandidate.profile?.lastName||""}`.trim()||"Not specified",position:s.requestedCandidate?.profile?.skills||"General",status:s.status||"pending",priority:s.priority||"normal",date:s.createdAt,monthlyRate:a(s.requestedCandidate?.profile?.monthlyRate),message:s.message||"",employerContact:{email:s.email||"",phone:s.phoneNumber||""},adminNotes:"",lastContactDate:s.updatedAt,isCompleted:s.status==="completed",category:s.requestedCandidate?.profile?.jobCategory?.name_en||"General",candidateExperience:s.requestedCandidate?.profile?.experience||"Not specified",candidateExperienceLevel:s.requestedCandidate?.profile?.experienceLevel||"Not specified",candidateEducation:s.requestedCandidate?.profile?.educationLevel||"Not specified",candidateLocation:s.requestedCandidate?.profile?.location||"Not specified",candidateCity:s.requestedCandidate?.profile?.city||"Not specified",candidateCountry:s.requestedCandidate?.profile?.country||"Not specified",candidateContact:s.requestedCandidate?.profile?.contactNumber||"Not specified",candidateEmail:s.requestedCandidate?.email||"Not specified",candidateLanguages:s.requestedCandidate?.profile?.languages||"Not specified",candidateCertifications:s.requestedCandidate?.profile?.certifications||"Not specified",candidateAvailability:s.requestedCandidate?.profile?.availability||"Not specified",candidateDescription:s.requestedCandidate?.profile?.description||"Not specified",candidateGender:s.requestedCandidate?.profile?.gender||"Not specified",candidateMaritalStatus:s.requestedCandidate?.profile?.maritalStatus||"Not specified",candidateIdNumber:s.requestedCandidate?.profile?.idNumber||"Not specified",candidateReferences:s.requestedCandidate?.profile?.references||"Not specified",_backendData:s}}catch(a){return console.error("Error transforming request data:",a),{id:s?.id||"unknown",employerName:"Data unavailable",companyName:"Data unavailable",candidateName:"Data unavailable",position:"Data unavailable",status:"pending",priority:"normal",date:new Date,monthlyRate:"Data unavailable",message:"Data unavailable",employerContact:{email:"",phone:""},adminNotes:"",lastContactDate:new Date,isCompleted:!1,category:"Data unavailable",_backendData:s,_hasError:!0}}},he=n.map(Ue).filter(Boolean),_=he.map(s=>s._hasError?{...s,employerName:"Data unavailable",companyName:"Data unavailable",candidateName:"Data unavailable",position:"Data unavailable",status:"pending",priority:"normal",monthlyRate:"Data unavailable",message:"Data unavailable",employerContact:{email:"",phone:""}}:{...s,employerName:s.employerName||"Unknown",companyName:s.companyName||"Private",candidateName:s.candidateName||"Not specified",position:s.position||"General",status:s.status||"pending",priority:s.priority||"normal",monthlyRate:s.monthlyRate||"Not specified",message:s.message||"",employerContact:{email:s.employerContact?.email||"",phone:s.employerContact?.phone||""}});ts.useEffect(()=>{try{he.forEach(s=>{const a=s._backendData?.requestedCandidate?.profile?.photo||s._backendData?.requestedCandidate?.photo||null})}catch(s){console.log("EmployerRequestsPage: debug logging error",s)}},[he]);const Oe=[{key:"employerInfo",label:"Employer",sortable:!1,render:s=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(os,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.employerName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.companyName})]})]})},{key:"candidateInfo",label:"Candidate",sortable:!1,render:s=>{const a=s._backendData?.requestedCandidate,l=a?.profile?.photo||a?.photo||null,f=l?/^https?:\/\//i.test(l)?l:`${fe.BASE_URL}/${l.replace(/^\//,"")}`:null;return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ne,{src:f,alt:s.candidateName,size:"sm",fallback:s.candidateName,fallbackSrc:be}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.candidateName}),e.jsx("div",{className:"text-sm text-gray-500",children:s.position})]})]})}},{key:"category",label:"Category",sortable:!0,searchable:!0,type:"badge",badgeColor:s=>{switch(s?.toLowerCase()){case"domestic":return"text-blue-600 bg-blue-50 border-blue-200";case"care":return"text-pink-600 bg-pink-50 border-pink-200";case"food":return"text-orange-600 bg-orange-50 border-orange-200";case"maintenance":return"text-green-600 bg-green-50 border-green-200";case"transport":return"text-indigo-600 bg-indigo-50 border-indigo-200";case"general":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}},{key:"monthlyRate",label:"Monthly Rate",sortable:!0,type:"text"},{key:"status",label:"Status",sortable:!0,type:"badge",badgeColor:Fe},{key:"priority",label:"Priority",sortable:!0,type:"badge",badgeColor:Te},{key:"date",label:"Request Date",sortable:!0,type:"date"}];r.useEffect(()=>{x()},[x]),r.useEffect(()=>()=>{C()},[C]),r.useEffect(()=>{Ee()},[Ee]);const E=r.useMemo(()=>{let s=_||[];if(u.trim()){const a=u.toLowerCase();s=s.filter(l=>l.employerName?.toLowerCase().includes(a)||l.companyName?.toLowerCase().includes(a)||l.candidateName?.toLowerCase().includes(a)||l.message?.toLowerCase().includes(a)||l.position?.toLowerCase().includes(a))}if(c.status&&(s=s.filter(a=>a.status===c.status)),c.priority&&(s=s.filter(a=>a.priority===c.priority)),c.category&&(s=s.filter(a=>a.category?.toLowerCase()===c.category.toLowerCase())),c.dateRange){const a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate());s=s.filter(f=>{const oe=new Date(f.date);switch(c.dateRange){case"today":return oe>=l;case"week":const Qe=new Date(l.getTime()-10080*60*1e3);return oe>=Qe;case"month":const Xe=new Date(l.getTime()-720*60*60*1e3);return oe>=Xe;case"quarter":const Ke=new Date(l.getTime()-2160*60*60*1e3);return oe>=Ke;case"year":const Ze=new Date(l.getTime()-365*24*60*60*1e3);return oe>=Ze;default:return!0}})}return c.monthlyRateRange&&(s=s.filter(a=>{const l=a.monthlyRate;if(l==="Not specified")return!1;const f=typeof l=="string"?parseFloat(l.replace(/[^\d.]/g,"")):l;if(isNaN(f))return!1;switch(c.monthlyRateRange){case"0-50000":return f>=0&&f<=5e4;case"50000-100000":return f>5e4&&f<=1e5;case"100000-200000":return f>1e5&&f<=2e5;case"200000+":return f>2e5;default:return!0}})),s},[_,u,c]),Ge=r.useCallback(s=>{p(s),Re(!0);const a=setTimeout(()=>{Re(!1)},300);return()=>clearTimeout(a)},[]),K=r.useCallback((s,a)=>{N(l=>({...l,[s]:a}))},[]),Ae=r.useCallback(()=>{N({status:"",priority:"",category:"",dateRange:"",monthlyRateRange:""}),p("")},[]),L=r.useMemo(()=>{let s=0;return u.trim()&&s++,Object.values(c).forEach(a=>{a&&s++}),s},[u,c]),Je=r.useMemo(()=>[{title:"Total Requests",value:E.length.toString(),change:`+${E.length-(_||[]).length}`,changeType:E.length>=(_||[]).length?"increase":"decrease",icon:_e,color:"text-blue-600",bgColor:"bg-blue-50",description:`${L>0?"Filtered":"All"} employer requests`},{title:"Pending Review",value:E.filter(s=>s.status==="pending").length.toString(),change:"+2",changeType:"increase",icon:rs,color:"text-orange-600",bgColor:"bg-orange-50",description:"Awaiting admin review"},{title:"In Progress",value:E.filter(s=>s.status==="in_progress").length.toString(),change:"+1",changeType:"increase",icon:as,color:"text-blue-600",bgColor:"bg-blue-50",description:"Under negotiation"},{title:"Completed",value:E.filter(s=>s.status==="completed").length.toString(),change:"+3",changeType:"increase",icon:ue,color:"text-green-600",bgColor:"bg-green-50",description:"Successfully closed"}],[E,_,L]),z=r.useCallback(()=>{g(1),b()},[g,b]),De=(s,a)=>{switch(te(a),J(a.adminNotes||""),s){case"openActions":I(!0),O(null);break;case"view":ae(!0),I(!1);break;case"contact":$e(a.employerContact,"email"),C();break;case"call":$e(a.employerContact,"phone"),C();break;case"reply":O("reply"),I(!0);break;case"select":O("select"),I(!0);break;case"start":ye("in_progress","Starting to process this request"),C();break;case"approve":ye("approved","Request approved and ready for completion"),C();break;case"complete":O("complete"),I(!0);break;case"reactivate":ye("pending","Request reactivated and back to pending status"),C();break;default:console.warn("Unknown action:",s),C()}},ye=async(s,a)=>{if(t)try{const l=await h(t.id,{status:s,adminNotes:a});l.success?(Z.success(`Request status updated to ${s}. ${a||""}`),z()):(console.error("❌ Failed to update status:",l.error),Z.error(`Failed to update status: ${l.error}`))}catch(l){console.error("❌ Error updating status:",l),Z.error("Network error. Please try again.")}},We=async()=>{if(!(!t||!k.trim())){ce(!0),W("");try{const s=await y(t.id,{content:k});if(s.success){const a=s.data.emailSent?`Reply sent successfully to ${t.employerName} at ${t.employerContact.email}`:"Reply saved but email delivery failed. Please check the email configuration.";Z.success(a),le(""),J(""),C(),z()}else console.error("❌ Reply failed:",s.error),W(s.error||"Failed to send reply")}catch(s){console.error("❌ Error sending reply:",s),W("Network error. Please try again.")}finally{ce(!1)}}},Pe=async(s,a="picture")=>{if(t){de(!0),V("");try{const l=await T(t.id,s,a);if(l.success){const f=a==="picture"?`Candidate profile picture sent to ${t.employerName}`:`Complete candidate details sent to ${t.employerName}`;Z.success(f),C(),z()}else console.error("❌ Failed to send candidate information:",l.error),V(l.error||"Failed to send candidate information")}catch(l){console.error("❌ Error sending candidate information:",l),V("Network error. Please try again.")}finally{de(!1)}}},He=async()=>{if(t){ne(!0),Q("");try{const s=await h(t.id,{status:"completed",adminNotes:X});s.success?(Z.success(`Request completed successfully. ${X?"Notes have been saved.":""}`),ie(""),C(),z()):(console.error("❌ Failed to complete request:",s.error),Q(s.error||"Failed to complete request"))}catch(s){console.error("❌ Error completing request:",s),Q("Network error. Please try again.")}finally{ne(!1)}}},Ve=s=>[{key:"openActions",title:"Actions",icon:is,className:"text-gray-600 hover:bg-gray-50"}],Ye=s=>{const a=[{key:"view",title:"View Details",icon:cs,className:"text-blue-600 hover:bg-blue-50",group:"view"},{key:"call",title:"Call",icon:ds,className:"text-purple-600 hover:bg-purple-50",group:"contact"},{key:"contact",title:"Contact Email",icon:us,className:"text-green-600 hover:bg-green-50",group:"contact"}];s.status!=="completed"&&s.status!=="cancelled"&&s.status!=="approved"&&a.push({key:"reply",title:"Reply",icon:_e,className:"text-orange-600 hover:bg-orange-50",group:"contact"});const l=[];switch(s.status){case"pending":l.push({key:"start",title:"Start Processing",icon:ms,className:"text-blue-600 hover:bg-blue-50",group:"status"},{key:"select",title:"Send Candidate Details",icon:pe,className:"text-indigo-600 hover:bg-indigo-50",group:"candidate"});break;case"in_progress":l.push({key:"approve",title:"Approve Request",icon:ue,className:"text-green-600 hover:bg-green-50",group:"status"},{key:"select",title:"Send Candidate Details",icon:pe,className:"text-indigo-600 hover:bg-indigo-50",group:"candidate"});break;case"approved":l.push({key:"complete",title:"Mark Complete",icon:ue,className:"text-green-600 hover:bg-green-50",group:"status"});break;case"completed":break;case"cancelled":l.push({key:"reactivate",title:"Reactivate",icon:me,className:"text-blue-600 hover:bg-blue-50",group:"status"});break;default:l.push({key:"select",title:"Send Candidate Details",icon:pe,className:"text-indigo-600 hover:bg-indigo-50",group:"candidate"},{key:"complete",title:"Mark Complete",icon:ue,className:"text-green-600 hover:bg-green-50",group:"status"})}return[...a,...l]};return i||!n||!_?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(ps,{size:"lg",text:"Loading employer requests..."})}):m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Requests"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsxs(R,{onClick:z,variant:"primary",disabled:i,children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),i?"Retrying...":"Try Again"]})]})}):!i&&_&&_.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"E"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Employer Requests"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(R,{variant:"outline",size:"sm",onClick:z,disabled:i,children:"Refresh"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No Employer Requests"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"There are currently no employer requests to display."}),e.jsxs(R,{onClick:z,variant:"primary",disabled:i,children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),i?"Refreshing...":"Refresh Data"]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"",children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Employer Requests"})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(R,{variant:"outline",size:"sm",onClick:z,disabled:i,children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),i?"Refreshing...":"Refresh"]})})]})})}),e.jsxs("div",{className:" mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsx(fs,{stats:Je})}),e.jsx(ve.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(Ie,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Employer Requests (",E.length,")"]}),L>0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",E.length," of ",(_||[]).length," total requests"]})]})}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Le,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by employer name, company, candidate, or message...",value:u,onChange:s=>Ge(s.target.value),className:"block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm"}),ze&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"})}),u&&e.jsx("button",{onClick:()=>p(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx(ge,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:()=>P(!A),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${A?"bg-red-50 border-red-200 text-red-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(ls,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters"}),L>0&&e.jsx("span",{className:"bg-red-100 text-red-700 text-xs px-2 py-1 rounded-full",children:L})]}),L>0&&e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),"Clear All"]})]}),A&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:c.status,onChange:s=>K("status",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:S.status.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsx("select",{value:c.priority,onChange:s=>K("priority",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:S.priority.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsx("select",{value:c.category,onChange:s=>K("category",s.target.value),disabled:$,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:$?e.jsx("option",{value:"",children:"Loading categories..."}):S.category.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsx("select",{value:c.dateRange,onChange:s=>K("dateRange",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:S.dateRange.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Rate"}),e.jsx("select",{value:c.monthlyRateRange,onChange:s=>K("monthlyRateRange",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",children:S.monthlyRateRange.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),L>0&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[u&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:['Search: "',u,'"',e.jsx("button",{onClick:()=>p(""),className:"ml-1 hover:bg-blue-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]}),Object.entries(c).map(([s,a])=>{if(!a)return null;const l=S[s]?.find(f=>f.value===a);return l?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-full",children:[l.label,e.jsx("button",{onClick:()=>K(s,""),className:"ml-1 hover:bg-gray-200 rounded-full p-0.5",children:e.jsx(ge,{className:"h-3 w-3"})})]},s):null})]})})]})]}),e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(Le,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:L>0?"Try adjusting your search terms or filters to find what you're looking for.":"There are no employer requests to display."}),L>0&&e.jsx(R,{onClick:Ae,variant:"outline",size:"sm",className:"mx-auto",children:"Clear All Filters"})]}):e.jsx(hs,{data:E,columns:Oe,onRowAction:De,actionButtons:Ve,pagination:!0,itemsPerPage:15,showSearch:!1})})]})})]}),re&&t&&e.jsx(je,{isOpen:re,onClose:()=>{ae(!1),te(null)},title:"Request Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Employer Information"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-900",children:t.employerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Company"}),e.jsx("p",{className:"text-gray-900",children:t.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t.employerContact.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:t.employerContact.phone})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Request Details"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx(Me,{color:Fe(t.status),children:t.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Priority"}),e.jsx(Me,{color:Te(t.priority),children:t.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Request Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Message"}),e.jsx("p",{className:"text-gray-900 mt-1",children:t.message})]})]})})]}),t.candidateName!=="Not specified"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Candidate Information"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 pb-4 border-b border-gray-200",children:[(()=>{const s=t._backendData?.requestedCandidate?.profile?.photo||t._backendData?.requestedCandidate?.photo||null,a=s?/^https?:\/\//i.test(s)?s:`${fe.BASE_URL}/${s.replace(/^\//,"")}`:null;return e.jsx(Ne,{src:a,alt:t.candidateName,size:"lg",fallback:t.candidateName,fallbackSrc:be})})(),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:t.candidateName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t.category," • ",t.position]}),e.jsx("p",{className:"text-sm font-medium text-green-600",children:t.monthlyRate})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Job Category"}),e.jsx("p",{className:"text-gray-900",children:t.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Skills/Position"}),e.jsx("p",{className:"text-gray-900",children:t.position})]})]}),t.candidateExperience!=="Not specified"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Experience Level"}),e.jsx("p",{className:"text-gray-900",children:t.candidateExperienceLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Education"}),e.jsx("p",{className:"text-gray-900",children:t.candidateEducation})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Location"}),e.jsx("p",{className:"text-gray-900",children:t.candidateLocation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"City"}),e.jsx("p",{className:"text-gray-900",children:t.candidateCity})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Country"}),e.jsx("p",{className:"text-gray-900",children:t.candidateCountry})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Contact Number"}),e.jsx("p",{className:"text-gray-900",children:t.candidateContact})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t.candidateEmail})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Languages"}),e.jsx("p",{className:"text-gray-900",children:t.candidateLanguages})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Certifications"}),e.jsx("p",{className:"text-gray-900",children:t.candidateCertifications})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Availability"}),e.jsx("p",{className:"text-gray-900",children:t.candidateAvailability})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Gender"}),e.jsx("p",{className:"text-gray-900",children:t.candidateGender})]})]}),t.candidateDescription!=="Not specified"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:t.candidateDescription})]}),t.candidateReferences!=="Not specified"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"References"}),e.jsx("p",{className:"text-gray-900",children:t.candidateReferences})]}),t.candidateIdNumber!=="Not specified"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"ID Number"}),e.jsx("p",{className:"text-gray-900",children:t.candidateIdNumber})]})]})]})})]})]})}),U&&t&&!j&&e.jsx(je,{isOpen:U,onClose:C,title:`Actions for ${t.employerName} - ${t.companyName}`,maxWidth:"max-w-md",children:e.jsx("div",{className:"space-y-3",children:Ye(t).map((s,a)=>{const l=s.icon;return e.jsxs("button",{onClick:()=>De(s.key,t),className:`w-full flex items-center space-x-3 p-3 text-left rounded-lg transition-colors duration-200 ${s.className}`,children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{className:"text-gray-900",children:s.title})]},a)})})}),U&&t&&j&&e.jsxs(je,{isOpen:U,onClose:C,title:j==="reply"?"Reply to Request":j==="select"?"Send Candidate Details":j==="complete"?"Complete Request":"Action",size:"md",children:[j==="reply"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Replying to:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:t.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:t.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Email:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:t.employerContact.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Phone:"}),e.jsx("span",{className:"text-blue-900 ml-1",children:t.employerContact.phone})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reply Message ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:k,onChange:s=>le(s.target.value),className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your reply message to the employer...",disabled:w}),w&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Sending reply to employer..."]}),v&&e.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Internal)"}),e.jsx("textarea",{value:q,onChange:s=>J(s.target.value),className:"w-full h-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Add internal notes for your reference...",disabled:w}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes are for internal use only and won't be sent to the employer."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(R,{variant:"outline",onClick:()=>{C()},disabled:w,children:"Cancel"}),e.jsx(R,{variant:"primary",onClick:We,disabled:!k.trim()||w,children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Reply"})]})]}),j==="select"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Selecting candidate for:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Employer:"}),e.jsx("span",{className:"text-green-900 ml-1",children:t.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-green-900 ml-1",children:t.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Position:"}),e.jsx("span",{className:"text-green-900 ml-1",children:t.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Category:"}),e.jsx("span",{className:"text-green-900 ml-1",children:t.category})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Send Candidate Information"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Send the requested candidate's information to the employer. Choose whether to send just a profile picture or complete details."}),t._backendData?.requestedCandidate?e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(()=>{const s=t._backendData?.requestedCandidate?.profile?.photo||t._backendData?.requestedCandidate?.photo||null,a=s?/^https?:\/\//i.test(s)?s:`${fe.BASE_URL}/${s.replace(/^\//,"")}`:null;return e.jsx(Ne,{src:a,alt:t.candidateName,size:"md",fallback:t.candidateName,fallbackSrc:be})})(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 text-lg",children:t.candidateName}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[t.position," • ",t.candidateExperience]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",t.candidateLocation]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Rate:"})," ",t.monthlyRate]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Experience Level:"})," ",t.candidateExperienceLevel]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Education:"})," ",t.candidateEducation]})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>Pe(t._backendData.requestedCandidate.id,"picture"),disabled:H,children:"Send Profile Picture"}),e.jsx(R,{variant:"primary",size:"sm",onClick:()=>Pe(t._backendData.requestedCandidate.id,"full"),disabled:H,children:"Send Complete Details"})]})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(pe,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"No candidate specified in this request"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"The employer did not specify a particular candidate"})]})]}),B&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:B}),H&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"Sending candidate information to employer..."]}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx(R,{variant:"outline",onClick:()=>{C()},disabled:H,children:"Cancel"})})]}),j==="complete"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-900 mb-2",children:"Completing Request:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Employer:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:t.employerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Company:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:t.companyName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Position:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:t.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-700 font-medium",children:"Current Status:"}),e.jsx("span",{className:"text-orange-900 ml-1",children:t.status})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Completion Notes (Optional)"}),e.jsx("textarea",{value:X,onChange:s=>ie(s.target.value),className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Add notes about how this request was completed...",disabled:G}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"These notes will be saved with the request and sent to the employer."})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-yellow-800 text-xs",children:"!"})}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This action will permanently mark the request as completed and close it. This action cannot be undone."]})]})}),Y&&e.jsx("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded",children:Y}),G&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600 mr-2"}),"Completing request..."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(R,{variant:"outline",onClick:()=>{C()},disabled:G,children:"Cancel"}),e.jsx(R,{variant:"primary",onClick:He,disabled:G,className:"bg-orange-600 hover:bg-orange-700",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete Request"})]})]})]}),e.jsx(ns,{position:"top-right"})]})},Ds=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"}));export{bs as E,ys as S,As as a,Te as b,Fe as c,Ds as d,Es as g,$e as h,Rs as u};
