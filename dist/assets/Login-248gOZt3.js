import{r as l,j as e}from"./vendor-react-P9HPe7xp.js";import{a as S,u as F,L as b}from"./vendor-router-DtDQR2uf.js";import{u as M,H as E,B as I,F as L}from"./index-DLQthGki.js";import{F as P}from"./FormInput-oBZQDjFw.js";import{P as C}from"./PasswordInput-M3f1aQTM.js";import{F as A}from"./FormCheckbox-BpjfGQgE.js";import{H as q}from"./HeroSection-Ci5lw8IM.js";import{j as D}from"./jobseekerBackground-BLVGbC9a.js";import{ae as H,aJ as R,ac as B,aw as T,aK as z}from"./vendor-common-QxmXWwBZ.js";import{m as g}from"./vendor-motion-Dcrv-VGC.js";import"./vendor-gsap-lnFyu4_T.js";const Z=()=>{const{t:s}=H(),o=S(),t=F(),{login:j}=M(),[i,w]=l.useState({identifier:"",password:"",rememberMe:!1}),[p,u]=l.useState(!1),[n,d]=l.useState({}),[h,f]=l.useState("");l.useEffect(()=>{t.state?.message?(f(t.state.message),o(t.pathname,{replace:!0})):t.search.includes("session=expired")&&(f(s("login.sessionExpired")),o(t.pathname,{replace:!0}))},[t.state,t.search,o]);const c=a=>{const{name:r,value:m,type:N,checked:k}=a.target;w(x=>({...x,[r]:N==="checkbox"?k:m})),n[r]&&d(x=>({...x,[r]:""}))},y=()=>{const a={};if(!i.identifier)a.identifier=s("login.errors.identifierRequired");else{const r=/\S+@\S+\.\S+/.test(i.identifier),m=i.identifier.replace(/\D/g,"").length>=9;!r&&!m&&(a.identifier=s("login.errors.identifierInvalid"))}return i.password?i.password.length<6&&(a.password=s("login.errors.passwordLength")):a.password=s("login.errors.passwordRequired"),d(a),Object.keys(a).length===0},v=async a=>{if(a.preventDefault(),!!y()){u(!0);try{const r=await j(i.identifier,i.password,"jobseeker");r.success&&r.user?r.user.role==="jobseeker"?o("/update-profile"):r.user.role==="admin"?o("/dashboard/admin"):o("/"):d({general:r.error||s("login.errors.general")})}catch(r){console.error("Login error:",r),d({general:s("login.errors.general")})}finally{u(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-cover bg-center bg-fixed",style:{backgroundImage:`url(${D})`},children:[e.jsx(E,{}),e.jsx(q,{title:s("login.hero.title"),description:s("login.hero.description")}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20",children:[h&&e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),e.jsx("span",{className:"text-yellow-800 text-sm",children:h})]})}),n.general&&e.jsx(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 text-sm",children:n.general})]})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsx(P,{type:"text",id:"identifier",name:"identifier",label:s("login.identifier"),value:i.identifier,onChange:c,placeholder:s("login.identifierPlaceholder"),error:n.identifier,icon:T,required:!0}),e.jsx(C,{id:"password",name:"password",label:s("login.password"),value:i.password,onChange:c,placeholder:s("login.passwordPlaceholder"),error:n.password,required:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{id:"rememberMe",name:"rememberMe",label:s("login.rememberMe"),checked:i.rememberMe,onChange:c}),e.jsx(b,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors duration-200 font-medium",children:s("login.forgotPassword")})]}),e.jsx(I,{type:"submit",variant:"primary",size:"lg",className:"w-full group bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("login.signingIn")]}):e.jsxs(e.Fragment,{children:[s("login.signIn"),e.jsx(z,{className:"ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:s("login.newToPlatform")})})]}),e.jsxs("p",{className:"text-gray-600",children:[s("login.noAccount")," ",e.jsx(b,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors duration-200",children:s("login.signUp")})]})]})]})]})})}),e.jsx(L,{})]})};export{Z as default};
