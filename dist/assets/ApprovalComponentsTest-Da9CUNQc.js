import{r as g,j as e,a4 as C,a as w,aP as A}from"./vendor-react-BrVnDVka.js";import{S as a}from"./StatusBadge-TCCT4iN-.js";import{v as S,p as R,q as P,B as $}from"./index-DEZ7Zrk4.js";import{R as T}from"./RejectionReasonModal-b-TQpsPG.js";import"./vendor-common-BZD0eUgH.js";import"./vendor-motion-DiEA6HXZ.js";import"./vendor-gsap-lnFyu4_T.js";import"./Modal-B6E3tqXW.js";const k=({profileId:c,currentStatus:n,onApprovalChange:h,disabled:l=!1,className:m="",...p})=>{const[d,u]=g.useState(!1),[j,t]=g.useState(null),r=S(c)?c:null,f=n||"pending",b=(s=>{const i={approvalStatus:s},x=[];return R(i)&&x.push("approve"),P(i)&&x.push("reject"),x})(f),v=async s=>{if(!(l||d||!r)){u(!0),t(s);try{s==="approve"?await h("approved"):s==="reject"&&await h("rejected")}catch(i){console.error(`❌ Error performing ${s} action:`,i)}finally{u(!1),t(null)}}},N=s=>{const i=j===s,x=l||d||!r,o={approve:{variant:"primary",icon:w,label:"Approve",color:"text-green-600",bgColor:"bg-green-50 hover:bg-green-100"},reject:{variant:"danger",icon:C,label:"Reject",color:"text-red-600",bgColor:"bg-red-50 hover:bg-red-100"}}[s],y=o.icon;return e.jsxs($,{variant:o.variant,size:"sm",onClick:()=>v(s),disabled:x,className:`min-w-[100px] ${o.bgColor} ${o.color} border ${o.color.replace("text-","border-")} hover:${o.bgColor}`,"aria-label":`${o.label} profile ${r||"unknown"}`,title:`${o.label} this profile`,...p,children:[d&&i?e.jsx(A,{className:"w-4 h-4 animate-spin mr-2","aria-hidden":"true"}):e.jsx(y,{className:"w-4 h-4 mr-2","aria-hidden":"true"}),d&&i?`${s==="approve"?"Approving":"Rejecting"}...`:o.label]},s)};return b.length===0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{status:n,size:"sm"}),e.jsx("span",{className:"text-sm text-gray-500",children:"No actions available"})]}):e.jsxs("div",{className:`flex items-center gap-3 ${m}`,children:[e.jsx(a,{status:f,size:"sm"}),e.jsx("div",{className:"flex gap-2",children:b.map(s=>N(s))})]})},W=()=>{const[c,n]=g.useState("pending"),[h,l]=g.useState(!1),[m,p]=g.useState({id:1,name:"John Doe",status:"pending"}),d=async t=>{if(t==="rejected"){l(!0);return}console.log(`Changing status from ${c} to ${t}`),n(t),p(r=>({...r,status:t}))},u=async t=>{console.log("Rejection reason submitted:",t),await new Promise(r=>setTimeout(r,1e3)),n("rejected"),p(r=>({...r,status:"rejected"})),l(!1)},j=()=>{n("pending"),p(t=>({...t,status:"pending"}))};return e.jsxs("div",{className:"p-8 max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Approval Components Test"}),e.jsx("p",{className:"text-gray-600",children:"Testing all three foundation components for the approval system"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"StatusBadge Component Tests"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"All Statuses:"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(a,{status:"pending"}),e.jsx(a,{status:"approved"}),e.jsx(a,{status:"rejected"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Different Sizes:"}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx(a,{status:"pending",size:"sm"}),e.jsx(a,{status:"approved",size:"md"}),e.jsx(a,{status:"rejected",size:"lg"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Without Icons:"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(a,{status:"pending",showIcon:!1}),e.jsx(a,{status:"approved",showIcon:!1}),e.jsx(a,{status:"rejected",showIcon:!1})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"ApprovalActions Component Tests"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Status: ",c]}),e.jsx(k,{profileId:m.id,currentStatus:c,onApprovalChange:d})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Reset to Pending"}),e.jsx("button",{onClick:()=>n("approved"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Set to Approved"}),e.jsx("button",{onClick:()=>n("rejected"),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Set to Rejected"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"RejectionReasonModal Test"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Click the button below to test the rejection reason modal"}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Open Rejection Modal"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Profile State:"}),e.jsx("pre",{className:"text-sm text-gray-600 bg-white p-3 rounded border",children:JSON.stringify(m,null,2)})]}),e.jsx(T,{isOpen:h,onClose:()=>l(!1),onSubmit:u,profileName:m.name})]})};export{W as default};
