import{j as e,aD as I,aE as R,aF as F,c as O,r as b,a7 as k,a0 as P,U as W,s as Z,J as M,aG as _,aH as H,al as h,am as Y,aa as D}from"./vendor-react-TQpn0NF6.js";import{i as S,L as K,B as d,C as g}from"./index-BTp3XDAZ.js";import{ab as Q,a$ as V,b0 as X,b1 as ee,b2 as se,b3 as re,b4 as te,b5 as ae,b6 as le,b7 as oe}from"./vendor-common-BZD0eUgH.js";import"./vendor-motion-Qia1b_wX.js";import"./vendor-gsap-lnFyu4_T.js";Q.register(V,X,ee,se,re,te,ae,le,oe);const z=({data:t,title:a="Growth Trend"})=>{const i={labels:t.map(r=>new Date(r.date).toLocaleDateString()),datasets:[{label:"Count",data:t.map(r=>r.count),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{color:"rgba(0, 0, 0, 0.1)"}}}};return e.jsx(I,{data:i,options:n})},ie=({data:t,title:a="Top Categories"})=>{const i={labels:t.map(r=>r.name),datasets:[{label:"Job Seekers",data:t.map(r=>r.count),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(34, 197, 94)","rgb(251, 146, 60)"],borderWidth:2}]},n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{color:"rgba(0, 0, 0, 0.1)"}}}};return e.jsx(R,{data:i,options:n})},ne=({data:t,title:a="Top Locations"})=>{const i={labels:t.map(r=>`${r.city}, ${r.country}`),datasets:[{label:"Job Seekers",data:t.map(r=>r.count),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)"],borderWidth:2}]},n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{color:"rgba(0, 0, 0, 0.1)"}}}};return e.jsx(R,{data:i,options:n})},ce=({data:t,title:a="Top Skills in Demand"})=>{const i={labels:t.map(r=>r.skill),datasets:[{label:"Mentions",data:t.map(r=>r.count),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(6, 182, 212, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(6, 182, 212)","rgb(168, 85, 247)"],borderWidth:2}]},n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},x:{grid:{color:"rgba(0, 0, 0, 0.1)"}}}};return e.jsx(R,{data:i,options:n})},de=({data:t,title:a="Skills Distribution"})=>{const i={labels:t.map(r=>r.skill),datasets:[{data:t.map(r=>r.count),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(6, 182, 212, 0.8)","rgba(168, 85, 247, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(6, 182, 212)","rgb(168, 85, 247)"],borderWidth:2}]},n={responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}}};return e.jsx(F,{data:i,options:n})},ge=({data:t,title:a="Categories Distribution"})=>{const i={labels:t.map(r=>r.name),datasets:[{data:t.map(r=>r.count),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(245, 158, 11)","rgb(239, 68, 68)","rgb(139, 92, 246)","rgb(236, 72, 153)","rgb(34, 197, 94)","rgb(251, 146, 60)"],borderWidth:2}]},n={responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:a,font:{size:16,weight:"bold"}}}};return e.jsx(F,{data:i,options:n})},pe=()=>{const{t}=O(),[a,i]=b.useState("30"),[n,r]=b.useState("all"),[c,y]=b.useState(!1),[l,$]=b.useState(null),[q,E]=b.useState(!0),[T,v]=b.useState(""),[p,A]=b.useState(null);b.useEffect(()=>{C()},[a]);const C=async()=>{try{E(!0),v("");const[s,o]=await Promise.all([S.getAnalytics({period:a}),S.getDashboardStats()]);s.success?$(s.data):v(s.error||"Failed to load analytics data"),o.success?A(o.data):console.error("Failed to load dashboard stats:",o.error)}catch(s){console.error("Error loading report data:",s),v("Network error. Please try again.")}finally{E(!1)}},G=[{value:"7",label:"Last 7 Days"},{value:"30",label:"Last 30 Days"},{value:"90",label:"Last 90 Days"},{value:"365",label:"Last Year"}],J=s=>{i(s)},m=async s=>{y(!0);try{const o=await S.exportSystemData({type:s,format:"pdf",startDate:new Date(Date.now()-parseInt(a)*24*60*60*1e3).toISOString(),endDate:new Date().toISOString()});if(o.success){const x=o.data,j=new Blob([x],{type:"application/pdf"}),u=window.URL.createObjectURL(j),f=document.createElement("a");f.href=u,f.download=o.filename||`report-${s}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(u),document.body.removeChild(f),D.success(`${s} report exported successfully as PDF!`)}else D.error(`Failed to export report: ${o.error}`)}catch(o){console.error("Error exporting report:",o),D.error("Error exporting report. Please try again.")}finally{y(!1)}},U=async()=>{y(!0);try{await C()}catch(s){console.error("Error refreshing data:",s),v("Failed to refresh data. Please try again.")}finally{y(!1)}};if(q)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(K,{size:"lg",text:"Loading reports..."})});if(T)return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-red-600"})})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Error Loading Reports"}),e.jsx("p",{className:"text-red-600 mb-4",children:T}),e.jsxs(d,{onClick:C,variant:"outline",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})});if(!l||!p)return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-gray-600"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Report Data Available"}),e.jsx("p",{className:"text-gray-600",children:"There is no data available for the selected period."})]})});const L=s=>{if(!s||s.length<2)return 0;const o=s.slice(-7).reduce((j,u)=>j+u.count,0),x=s.slice(-14,-7).reduce((j,u)=>j+u.count,0);return x===0?o>0?100:0:Math.round((o-x)/x*100)},N=L(l.growth?.jobSeekers),w=L(l.growth?.employerRequests),B=[{title:"Total Job Seekers",value:p.overview?.totalJobSeekers?.toString()||"0",change:N>0?`+${N}%`:`${N}%`,changeType:N>=0?"increase":"decrease",icon:W,color:"text-blue-600",bgColor:"bg-blue-50",description:"All registered job seekers"},{title:"Total Requests",value:p.overview?.totalEmployerRequests?.toString()||"0",change:w>0?`+${w}%`:`${w}%`,changeType:w>=0?"increase":"decrease",icon:Z,color:"text-green-600",bgColor:"bg-green-50",description:"All employer requests"},{title:"Pending Requests",value:p.overview?.pendingEmployerRequests?.toString()||"0",change:"",changeType:"neutral",icon:M,color:"text-orange-600",bgColor:"bg-orange-50",description:"Requests awaiting response"},{title:"Categories",value:p.overview?.totalCategories?.toString()||"0",change:"",changeType:"neutral",icon:k,color:"text-purple-600",bgColor:"bg-purple-50",description:"Active job categories"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive insights and performance metrics"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(d,{onClick:U,variant:"outline",disabled:c,className:"flex items-center gap-2",children:[e.jsx(P,{className:`w-4 h-4 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]})})]}),e.jsx(g,{className:"p-4",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsx("select",{value:a,onChange:s=>J(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:G.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map((s,o)=>{const x=s.icon;return e.jsx(g,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value}),s.change&&e.jsxs("div",{className:"flex items-center mt-2",children:[s.changeType==="increase"?e.jsx(_,{className:"w-4 h-4 text-green-500 mr-1"}):s.changeType==="decrease"?e.jsx(H,{className:"w-4 h-4 text-red-500 mr-1"}):null,e.jsx("span",{className:`text-sm ${s.changeType==="increase"?"text-green-600":s.changeType==="decrease"?"text-red-600":"text-gray-600"}`,children:s.change})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description})]}),e.jsx("div",{className:`w-12 h-12 ${s.bgColor} rounded-lg flex items-center justify-center`,children:e.jsx(x,{className:`w-6 h-6 ${s.color}`})})]})},o)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.growth&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Seeker Growth"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("job-seekers"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(z,{data:l.growth.jobSeekers||[],title:"Job Seeker Growth Trend"})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Employer Request Growth"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("employer-requests"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(z,{data:l.growth.employerRequests||[],title:"Employer Request Growth Trend"})})]})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Categories"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("categories"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(ie,{data:l.categories?.top||[],title:"Top Job Categories"})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Locations"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("locations"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(ne,{data:l.locations||[],title:"Geographic Distribution"})})]}),l.skills&&l.skills.length>0&&e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Skills in Demand"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("skills"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(ce,{data:l.skills.slice(0,10)||[],title:"Most Requested Skills"})})]}),l.skills&&l.skills.length>0&&e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Skills Distribution"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("skills"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(de,{data:l.skills.slice(0,8)||[],title:"Skills Distribution"})})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Categories Distribution"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>m("categories"),disabled:c,children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]}),e.jsx("div",{className:"h-80",children:e.jsx(ge,{data:l.categories?.top?.slice(0,8)||[],title:"Categories Distribution"})})]})]}),e.jsx(Y,{position:"top-right"})]})};export{pe as default};
